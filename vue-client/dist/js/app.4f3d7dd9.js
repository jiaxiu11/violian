(function(e){function t(t){for(var r,o,a=t[0],c=t[1],l=t[2],d=0,h=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,a=1;a<s.length;a++){var c=s[a];0!==n[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={app:0},i=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([1,"chunk-vendors"]),s()})({0:function(e,t){},"0296":function(e,t,s){},"0313":function(e,t,s){"use strict";var r=s("0c05"),n=s.n(r);n.a},"034f":function(e,t,s){"use strict";var r=s("85ec"),n=s.n(r);n.a},"036d":function(e,t,s){"use strict";var r=s("0296"),n=s.n(r);n.a},"04e3":function(e,t,s){"use strict";var r=s("c1ba"),n=s.n(r);n.a},"0a62":function(e,t,s){"use strict";var r=s("d2e0"),n=s.n(r);n.a},"0c05":function(e,t,s){},1:function(e,t,s){e.exports=s("56d7")},"118f":function(e,t,s){},"17d3":function(e,t){e.exports="data:audio/mpeg;base64,SUQzAwAAAAAAMlRJVDIAAAAHAAAANjAgYnBtVFhYWAAAABcAAABTb2Z0d2FyZQBMYXZmNTguMjkuMTAw//uQZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAFAAAJXwBra2tra2tra2tra2tra2tra2trmpqampqampqampqampqampqamprKysrKysrKysrKysrKysrKysrKyvLy8vLy8vLy8vLy8vLy8vLy8vLy//////////////////////////8AAABQTEFNRTMuMTAwBLkAAAAAAAAAADUgJAYzTQAB4AAACV/kHDWDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//vQZAAAAeYl1/0EQAgAAA0goAABIBmVY/m9AEAAADSDAAAAm6rXVDISAAJLxuQAAAjMeACkbyNI3QhNCNOdyAYG5CKc7nP/+c7oBi3EGD/Lv4If5/Jl38H+vwf////wf/Lm6UwAwFlAwEAqABZkd/MVFGAqVkQaYwDCEFkZkhsYEfmwtgACTIBExYsAyIKgZjta0U4IkCBDGzqEgKIMopgUIBqhddeIyAHhwYeR4SGf9cqUZiAi0YCbKYBHBUgUqMSWLfJGpxqiV4UFQUBDHi03kVeIw4YpltK49PXcBpToxuIrFftKTUCZQ1mw5V7zxRh89P09t2q7dZXTWtIDE/XkhvfNTtqWX6TDs3P1ZTelcfga8+T6/vHXuHAdJTx9x5RHIjF79fKX1olXqawpdVZdHbLpSbeq+Vamd6jxnM8M7HP/PvcMM+xmmrRbK/vCMSiZnLeNnD8t/t8ILjrZsdWlmf21AAAAAgDFwMPQpQmsVGQC21OWspioVt1WFnYKUqMWYNXINySFuMYL0JUHIJY+UECTNzM0NajA8dJhuJMX0R3hEiBhzDw6D1C6jCgTEJUpOVEw0QQOEiikpBSqikjWalFETEL6JiOU2TJo4SiYGz12//9aqVFE1XOPWsxNmQJUsKLfpmz/+iil///+ZrSn6JiXUd/+6mAAAgAAqcFShcIwFBpIAhGKKl8EAF4R4FCah8z1nCPURWiA7DLZuXWCxJ3VY+GeHt21OcNdJ5nmQ47jvBGyShTjdQlB2UKgYTMQaNcnFyvXcb3piV1HjuOrqBVQlGdz7jcXGQaciDIeop/JuB6W6PKKHYwIRfIIicQA7ZD1CJSze0dXNHDv/H0bHAsGR/ujUQOHVz//k2M84Vyh/02P8axvH//+OQqc7/xgAhAAATnEMTtMCMgFMUBKiSKGw4IOFI1hCtMoejHHx1kK4igTW3+gafizsxS7VlkOzFjVyHr+MxS01mnXk6K6kT7L9ieXzRsnxxIaRVr/T1PtfIKdGVCacDAcwYtox1sQIQujHTUwV4wfBRFklkFC2PDIo0kP+d1CiODoeERjx4fDBcgn4TxXFRWpe79Ya3HvXNf/jLKrEeLrn+P6kkqnUv/7gGTwgPSgXlP/aaAAAAANIOAAARUNn0vsvQ/gAAA0gAAABK57vPxAAAABKk/BpqQw1Cm62wJPMIRe7HwKCXaJrclgmONJDEQDMAiXNfdup4vlPCUaRSChUjR+/iTrmkkdvNBVl0WWRyRT1+sPX0KG8jwtRn0OWPJaeekGJqDRpP4/iuhM1gkUHxRNGpA9UUfd7D7Pi9ReiTW2BTRo2/n3d6QhaurGSOp2nfKsgRg6koyq5KGFbErykTxe3XKEl1kfUlDkrqvv3GADAgISTcBcQHgKi+RG1BIRxUFTCTWIQMKfaAET6JARDQ+gCiU4bQCMYpfKbTzPzYxdpd52FS6bklYuOnF7QNvZLqxXKJm2UlpzpxK7zu7EfH7jBbBx0rNtp2YmmeiWNs285c2k7MvLcWNCDByue6ZmZWwL784hu9aOKbfStf9Yby+70PVt07WbT8zM5tK3Xc5tZ16JSwz6ml3CqqcLoIoDkFkB//uAZPaA9ShhUnssRigAAA0gAAABFBlpQ+y9EYAAADSAAAAEcBw4IhQIAADLjsKjD/Tv+CkwzYkMbRjDzj/MNATFRMWZzWJX/AxYghoGckgFWMBYAA0JEOA2sQDGqgYZ6Qxo+g/oWgibQxSFoPk+FwolEgLAGAwwgHbFnCefi1ENHkmiIjvLkyIsTRG/iiizRsiQlEmlGEyTWic/lUpk4yRlUOlX//yLEyXlpF1zVRqu3Pf/10xBTUUzLjEwMFVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+3Bk+AAE+FpSfWGACAAADSCgAAETHRM7+boCAAAANIMAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAaQcAAAgAAA0g4AABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU="},"187d":function(e,t,s){"use strict";var r=s("d298"),n=s.n(r);n.a},2:function(e,t){},"21e5":function(e,t,s){"use strict";var r=s("f49b"),n=s.n(r);n.a},"2bd4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAABlCAYAAACbUhkMAAAACXBIWXMAAAsSAAALEgHS3X78AAABCUlEQVRYhe3YPQ/BQBgH8L/GZDKxidHHKFaNmsTmy4gPIRKT2FpqFR2ZkVi8xCLBwFCLoXKXXlXf2Aye/9K7e369l/VJ2LYNEUWvyQBkvGIaqmaKGceKXksD6AGoIpghgKahalfJKekREM56j+9c0VR27DQCelOUfHeMi5wUxXKuhGwqE2r76wH75F1sPSw0CvUAnBzcG+7FAzE7zrG8rN6g9bijs+i6c8lb9BZYRhuDnxiKt7cdRpsxH5/uZ3HXcCwe4z9eJOlfYMe25m0sLssADuzMEgYjcVQIEyb895gwYcKECRMmTJgw4V9jt9nxIabkdEZYwyMuQ+bEA5sxP/DOCRt835MB8AT8017JOPCIxgAAAABJRU5ErkJggg=="},3:function(e,t){},"325b":function(e,t,s){e.exports=s.p+"img/violian_logo.84309c6b.png"},"359f":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cb29"),core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("466d"),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_14__);Vex.UI={};var VF=Vex.Flow;function getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}function getStyle(e,t){var s=null,r=document.getElementById(e);return r.currentStyle?s=r.currentStyle[t]:window.getComputedStyle&&(s=document.defaultView.getComputedStyle(r,null).getPropertyValue(t)),s}function getMousePositionInCanvas(e,t){var s=getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=getStyle(e.id,"padding-left"),i=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,o=e.getBoundingClientRect();return{x:(t.clientX-o.left-r-i)/Vex.UI.scale,y:(t.clientY-o.top-r-i)/Vex.UI.scale}}function getAbsoluteMousePositionInCanvas(e,t){var s=getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=getStyle(e.id,"padding-left"),i=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,o=e.getBoundingClientRect();return{x:t.clientX-o.left-r-i,y:t.clientY-o.top-r-i}}function isCursorWithinRectangle(e,t,s,r,n,i){return n>e&&n<e+s&&i>t&&i<t+r}function getFirstTickableAfterXPosition(e,t){for(var s=null,r=0;r<e.getTickables().length;r++)if(t<e.getTickables()[r].getAbsoluteX()&&(s=e.getTickables()[r]),null!=s)break;return s}function getLastTickableBeforeXPosition(e,t){for(var s=null,r=e.getTickables().length-1;r>=0;r--)if(t>e.getTickables()[r].getAbsoluteX()&&(s=e.getTickables()[r]),null!=s)break;return s}function mergeProperties(e,t){var s={};for(var r in e)s[r]=e[r];for(var r in t)s[r]=t[r];return s}function getStemDirection(e,t){var s=e.getYForLine(2);return t<s?Vex.Flow.StaveNote.STEM_DOWN:Vex.Flow.StaveNote.STEM_UP}Vex.UI.provisoryTickableStyle={shadowBlur:0,shadowColor:"gray",fillStyle:"gray",strokeStyle:"gray"},Vex.UI.highlightNoteStyle={backgroundColor:"rgba(169,169,169,1)",fillStyle:"rgba(169,169,169,1)",strokeStyle:"rgba(169,169,169,1)"},Vex.UI.defaultNoteStyle={shadowBlur:0,shadowColor:"black",fillStyle:"black",strokeStyle:"black"},Vex.UI.scale=1,Vex.UI.Handler=function(e,t,s){this.container=s||document.getElementById(e);var r={canEdit:!0,canPlay:!0,canAddStaves:!0,canChangeNoteValue:!0,showToolbar:!0,numberOfStaves:4,stavesPerRow:2,lessStaveHeight:!1,timeSignature:"4/4",keySignature:"C",canvasProperties:{id:e+"-canvas",width:.9*window.innerWidth,tabindex:1}};this.options=mergeProperties(r,t||{}),this.canvas=this.createCanvas(),this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init()},Vex.UI.Handler.prototype.numBars=4,Vex.UI.Handler.prototype.timeSignature="4/4",Vex.UI.Handler.prototype.createCanvas=function(){for(var e=document.createElement("canvas"),t=Object.keys(this.options.canvasProperties),s=0;s<t.length;s++)e[t[s]]=this.options.canvasProperties[t[s]];return this.options.lessStaveHeight?e.height=90*Vex.UI.scale:e.height=130*Math.ceil(this.options.numberOfStaves/this.options.stavesPerRow)*Vex.UI.scale,this.container.appendChild(e),e},Vex.UI.Handler.prototype.createStaves=function(){var e=[],t=0,s=10;this.options.lessStaveHeight&&(t=-20);for(var r=(this.canvas.width/Vex.UI.scale-20)/this.options.stavesPerRow,n=0;n<this.options.numberOfStaves;n++){var i={};(n+1)%this.options.stavesPerRow==0?(i=new Vex.Flow.Stave(s,t,r),t+=130,s=10):(i=new Vex.Flow.Stave(s,t,r),s+=r),n%this.options.stavesPerRow==0&&i.addClef("treble").addTimeSignature(this.options.timeSignature).addKeySignature(this.options.keySignature),i.font={family:"sans-serif",size:12,weight:""},e.push(i),i.setContext(this.ctx),i.setTickables([])}return e},Vex.UI.Handler.prototype.init=function(){return this.redraw(),this.options.canEdit&&this.mouseListener.startListening(),this},Vex.UI.Handler.prototype.resize=function(e){var t={id:this.canvas.id,width:e,height:this.canvas.height,tabindex:1};this.options.canvasProperties=t;for(var s=document.createElement("canvas"),r=Object.keys(t),n=0;n<r.length;n++)s[r[n]]=t[r[n]];this.container.removeChild(this.container.childNodes[0]),this.container.appendChild(s),this.convas=s,this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init(),this.redraw(),this.options.canEdit&&this.mouseListener.startListening()},Vex.UI.Handler.prototype.redraw=function(e){this.ctx.clear(),this.drawStaves(),e?this.drawNotes(void 0,!0):this.drawNotes()},Vex.UI.Handler.prototype.redrawStave=function(e){var t=e.getBoundingBox(),s=this.staveList.indexOf(e);(s+1)%2==0?this.ctx.clearRect(t.getX(),t.getY(),t.getW()+15,t.getH()+5):this.ctx.clearRect(t.getX()-15,t.getY(),t.getW()+16,t.getH()),this.drawStaves(e,!0),this.drawNotes(e)},Vex.UI.Handler.prototype.drawStaves=function(e){if(e)e.format(),e.draw();else for(var t=0;t<this.staveList.length;t++)this.staveList[t].format(),this.staveList[t].draw()},Vex.UI.Handler.prototype.drawNotes=function(e,t){if(void 0===e)for(var s=0;s<this.staveList.length;s++)this.drawNotes(this.staveList[s],t);else{var r=new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT);r.setStrict(!1),r.addTickables(e.getTickables());var n=new Vex.Flow.Formatter;0!=e.getTickables().length&&(n.joinVoices([r]),n.formatToStave([r],e),r.draw(this.ctx,e),t?this.drawBeams(e,!0):this.drawBeams(e))}},Vex.UI.Handler.prototype.drawBeams=function(e,t){(t||null==e.beams)&&(e.beams=Vex.Flow.Beam.generateBeams(e.getTickables()));for(var s=0;s<e.beams.length;s++)e.beams[s].setContext(this.ctx).draw()},Vex.UI.Handler.prototype.updateProvisoryKey=function(e){if(null==this.provisoryTickable&&(this.provisoryTickable=new Vex.Flow.StaveNote({keys:["d/4"],duration:"4"})),null!=this.currentStave){if(this.provisoryTickable instanceof Vex.Flow.StaveNote&&"r"!=this.provisoryTickable.noteType){var t=NoteMap.getNoteName(this.currentStave,e);t!=this.provisoryTickable.keys[0]&&(this.provisoryTickable=this.provisoryTickable.clone({keys:[t]}),void 0!==this.provisoryTickable&&this.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle),this.provisoryTickable.setStemDirection(getStemDirection(this.currentStave,e.y)),this.provisoryTickable.setStave(this.currentStave),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext))}else;this.drawProvisoryTickable(e)}},Vex.UI.Handler.prototype.updateProvisoryDuration=function(e){var t=null;this.provisoryTickable&&(t=this.provisoryTickable.x_shift),this.provisoryTickable=this.provisoryTickable.clone({duration:e}),t&&(this.provisoryTickable.x_shift=t),this.provisoryTickable.setStave(this.currentStave||this.staveList[0]),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext),this.drawProvisoryTickable()},Vex.UI.Handler.prototype.updateProvisoryType=function(e){var t=null;switch(this.provisoryTickable&&(t=this.provisoryTickable.x_shift),e){case Vex.UI.TickableType.NOTE:this.provisoryTickable=new Vex.Flow.StaveNote({keys:["d/4"],duration:"4"});break;case Vex.UI.TickableType.REST:var s="4";this.provisoryTickable&&(s=this.provisoryTickable.duration),this.provisoryTickable=new Vex.Flow.StaveNote({keys:["b/4"],duration:s+"r"});break;case Vex.UI.TickableType.BAR:this.provisoryTickable=new Vex.Flow.BarNote;break;case Vex.UI.TickableType.CLEF:this.provisoryTickable=new Vex.Flow.ClefNote("treble"),this.provisoryTickable.clefKey="treble";break}this.provisoryTickable.setStave(this.currentStave||this.staveList[0]),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext),void 0!==this.provisoryTickable.setStyle&&this.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle),t&&(this.provisoryTickable.x_shift=t),this.drawProvisoryTickable()},Vex.UI.Handler.prototype.drawProvisoryTickable=function(e){if(this.provisoryTickable&&null!=this.currentStave){if(this.redrawStave(this.currentStave),void 0!==e)if(this.provisoryTickable instanceof Vex.Flow.StaveNote)this.provisoryTickable.x_shift=e.x-this.provisoryTickable.getAbsoluteX()-5;else if(this.provisoryTickable instanceof Vex.Flow.BarNote){var t=new Vex.Flow.Barline(1);t.setX(e.x),t.draw(this.currentStave)}else this.provisoryTickable.getTickContext().setX(e.x-this.currentStave.getNoteStartX()-this.provisoryTickable.render_options.stave_padding);if(null==this.currentNote){var s=this.ctx.fillStyle,r=this.ctx.strokeStyle;this.ctx.fillStyle="gray",this.ctx.strokeStyle="gray",this.provisoryTickable instanceof Vex.Flow.BarNote||this.provisoryTickable.draw(),this.ctx.fillStyle=s,this.ctx.strokeStyle=r}}},Vex.UI.Handler.prototype.openMenuForKey=function(e,t){this.mouseListener.stopListening(),this.noteMenu.setNote(this.currentNote),this.noteMenu.setKeyIndex(this.currentNote.indexOfKey(e)),this.noteMenu.open(t)},Vex.UI.Handler.prototype.noteMenuClosed=function(){this.redraw(),this.mouseListener.startListening()},Vex.UI.Handler.prototype.addAccidentalToNote=function(e,t,s){void 0!==s&&-1!=s||(s=0);var r=new Vex.Flow.Accidental(e);t.addAccidental(s,r)},Vex.UI.Handler.prototype.addDotToNote=function(e){0==e.dots&&e.addDotToAll()},Vex.UI.Handler.prototype.beamWithNextNote=function(e){var t=this.currentStave.getNextNote(e);if(null!=t){notes=[e,t],t.setStemDirection(e.getStemDirection());var s=new Vex.Flow.Beam(notes);this.currentStave.pushBeam(s)}},Vex.UI.Handler.prototype.deleteNote=function(e){for(var t=0;t<this.staveList.length;t++){var s=this.staveList[t].getNotes(),r=s.indexOf(e);r>-1&&this.staveList[t].removeTickable(e)}},Vex.UI.NoteMenu=function(e,t,s){this.handler=e,this.canvas=t,this.ctx=s,this.note=null,this.keyIndex=null,this.panelProps=null,this.buttons=[],this.accidentals=["doubleFlat","flat","natural","sharp","doubleSharp"],this.canRender=!1,this.currentButton=null,this.buttonRenderer=new Vex.UI.NoteMenuButtonRenderer},Vex.UI.NoteMenu.prototype.init=function(){},Vex.UI.NoteMenu.prototype.setTipArea=function(){var e=5,t=5,s=5,r=10,n=this.panelProps.x+e,i=this.panelProps.bottomY-s-r,o=this.panelProps.width-e-t,a=r-s;this.handler.tipRenderer.boundingBox={x:n,y:i,width:o,height:a},this.handler.tipRenderer.backgroundColor=this.panelProps.backgroundColor},Vex.UI.NoteMenu.prototype.open=function(e){this.panelProps=this.drawMenuPanel(e),this.buttonRenderer.panel=this.panelProps,this.buttonRenderer.context=this.ctx,this.buttonRenderer.ready&&(this.drawButtons(),this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),this.canvas.addEventListener("contextmenu",this,!1),this.setTipArea())},Vex.UI.NoteMenu.prototype.close=function(){this.buttons=[],this.currentButton=null,this.canvas.removeEventListener("mouseup",this,!1),this.canvas.removeEventListener("mousemove",this,!1),this.canvas.removeEventListener("contextmenu",this,!1),this.handler.noteMenuClosed()},Vex.UI.NoteMenu.prototype.handleEvent=function(e){switch(e.preventDefault(),e.type){case"mouseup":this.handleMouseClick(e);break;case"mousemove":this.handleMouseMove(e);break}},Vex.UI.NoteMenu.prototype.setNote=function(e){this.note=e},Vex.UI.NoteMenu.prototype.setKeyIndex=function(e){this.keyIndex=e},Vex.UI.NoteMenu.prototype.drawMenuPanel=function(e){var t=this.canvas,s=200,r=100,n=e.x+30,i=e.y,o="right";(n+s)*Vex.UI.scale>t.width&&(n=e.x-s-30,o="left"),(i+r)*Vex.UI.scale>t.height&&(i=t.height/Vex.UI.scale-r-10);var a=this.ctx;return a.beginPath(),a.rect(n,i,s,r),a.fillStyle="#ddc",a.fill(),a.lineWidth=3,a.strokeStyle="black",a.stroke(),a.beginPath(),a.moveTo(e.x,e.y),"right"==o?a.lineTo(n,i):a.lineTo(n+s,i),a.stroke(),{width:s,height:r,x:n,y:i,rightX:n+s,bottomY:i+r,backgroundColor:"#ddc",position:o}},Vex.UI.NoteMenu.prototype.drawButtons=function(){this.buttons.push(this.buttonRenderer.closeButton());for(var e=0;e<this.accidentals.length;e++)this.buttons.push(this.buttonRenderer.accidentalButton(e));this.buttons.push(this.buttonRenderer.dotButton()),this.buttons.push(this.buttonRenderer.beamButton()),this.buttons.push(this.buttonRenderer.deleteButton())},Vex.UI.NoteMenu.prototype.handleMouseClick=function(e){if(0==e.button)for(var t=getMousePositionInCanvas(this.canvas,e),s=0;s<this.buttons.length;s++){var r=this.buttons[s];if(isCursorWithinRectangle(r.props.x,r.props.y,r.props.width,r.props.height,t.x,t.y)){r.callAction(this);break}}},Vex.UI.NoteMenu.prototype.handleMouseMove=function(e){for(var t=getMousePositionInCanvas(this.canvas,e),s=0;s<this.buttons.length;s++){var r=this.buttons[s];if(isCursorWithinRectangle(r.props.x,r.props.y,r.props.width,r.props.height,t.x,t.y)){null!=this.currentButton&&this.currentButton==r||(null!=this.currentButton&&this.currentButton.highlight(this.canvas,null,this.currentButton),this.currentButton=r,this.currentButton.highlight(this.canvas,"yellow",this.currentButton),this.handler.tipRenderer.showTip(this.currentButton.props.tip));break}r.highlight(this.canvas,null,r)}},Vex.UI.NoteMenu.prototype.addDoubleFlat=function(){this.handler.addAccidentalToNote("bb",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addFlat=function(){this.handler.addAccidentalToNote("b",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addNatural=function(){this.handler.addAccidentalToNote("n",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addSharp=function(){this.handler.addAccidentalToNote("#",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addDoubleSharp=function(){this.handler.addAccidentalToNote("##",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addDot=function(){this.handler.addDotToNote(this.note),this.close()},Vex.UI.NoteMenu.prototype.addBeam=function(){this.handler.beamWithNextNote(this.note),this.close()},Vex.UI.NoteMenu.prototype.deleteNote=function(){this.handler.deleteNote(this.note),this.close()},Vex.UI.MouseListener=function(e,t,s){this.handler=e,this.canvas=t,this.staveList=s},Vex.UI.MouseListener.prototype.handleEvent=function(e){switch(e.preventDefault(),e.type){case"mouseup":this.handleMouseClick(e);break;case"mousemove":this.handleMouseOver(e);break;case"wheel":this.handleMouseWheel(e);break;case"contextmenu":this.handleRightMouseClick(e);break;case"mouseleave":this.handleMouseLeave(e);break}},Vex.UI.MouseListener.prototype.startListening=function(){this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),this.canvas.addEventListener("wheel",this,!1),this.canvas.addEventListener("contextmenu",this,!1),this.canvas.addEventListener("mouseleave",this,!1)},Vex.UI.MouseListener.prototype.stopListening=function(){this.canvas.removeEventListener("mouseup",this,!1),this.canvas.removeEventListener("mousemove",this,!1),this.canvas.removeEventListener("wheel",this,!1),this.canvas.removeEventListener("contextmenu",this,!1),this.canvas.removeEventListener("mouseleave",this,!1)},Vex.UI.MouseListener.prototype.handleMouseLeave=function(e){this.handler.redraw()},Vex.UI.MouseListener.prototype.handleMouseOver=function(e){var t=getMousePositionInCanvas(this.canvas,e),s=r(this.staveList,t);function r(e,t){for(var s=0;s<e.length;s++){var r=e[s].getBoundingBox();if(isCursorWithinRectangle(r.getX(),r.getY(),r.getW(),r.getH(),t.x,t.y)&&e[s].usable)return e[s]}return null}function n(e,t){var s=[];null!=e&&(s=e.getTickables());for(var r=0;r<s.length;r++)if(s[r]instanceof Vex.Flow.StaveNote){void 0!==s[r].setHighlight&&s[r].setHighlight(!1);var n=s[r].getBoundingBox(),i=e.getBoundingBox();if(isCursorWithinRectangle(n.getX(),i.getY(),n.getW(),i.getH(),t.x,t.y))return s[r]}return null}s&&this.handler.currentStave&&s!=this.handler.currentStave&&this.handler.redraw(),this.handler.currentStave=s,this.handler.currentNote=n(this.handler.currentStave,t),this.handler.updateProvisoryKey(t),null!=this.handler.currentNote&&(this.handler.currentNote.setHighlight(!0),this.handler.redraw())},Vex.UI.MouseListener.prototype.handleMouseClick=function(e){switch(e.button){case 0:this.handleLeftMouseClick(e);break;case 1:this.handleMiddleMouseClick(e);break;case 2:break;default:alert("You have a strange Mouse!")}},Vex.UI.MouseListener.prototype.handleMouseWheel=function(e){var t=Math.max(-1,Math.min(1,e.wheelDelta||e.deltaY));if(null!=this.handler.currentNote){var s=this.handler.currentNote.duration,r=void 0!==Vex.Flow.durationAliases[s];r&&(s=Vex.Flow.durationAliases[s]),t>0?s*=2:s/=2,s<1&&(s=1),s=""+s;var n=this.handler.currentNote.clone({duration:s});this.handler.currentStave.replaceTickable(this.handler.currentNote,n),this.handler.currentNote=n,this.handler.currentNote.setHighlight(!0),this.handler.redraw()}else if(null!=this.handler.provisoryTickable)if(this.handler.provisoryTickable instanceof Vex.Flow.StaveNote){s=this.handler.provisoryTickable.duration,r=void 0!==Vex.Flow.durationAliases[s];r&&(s=Vex.Flow.durationAliases[s]),t>0?s*=2:s/=2,s<1&&(s=1),s=""+s,this.handler.updateProvisoryDuration(s)}else if(this.handler.provisoryTickable instanceof Vex.Flow.BarNote){var i=(this.handler.provisoryTickable.type+5+t)%6+1;this.handler.provisoryTickable.setType(i),this.handler.drawProvisoryTickable()}else if(this.handler.provisoryTickable instanceof Vex.Flow.ClefNote){switch(this.handler.provisoryTickable.clefKey){case"treble":this.handler.provisoryTickable.clefKey="bass",this.handler.provisoryTickable.setClef("bass");break;case"bass":this.handler.provisoryTickable.clefKey="treble",this.handler.provisoryTickable.setClef("treble")}this.handler.drawProvisoryTickable()}},Vex.UI.MouseListener.prototype.handleLeftMouseClick=function(e){if(null!=this.handler.currentStave&&this.handler.currentStave.usable){var t=getMousePositionInCanvas(this.canvas,e);if(null==this.handler.currentNote){var s=getLastTickableBeforeXPosition(this.handler.currentStave,t.x),r=getFirstTickableAfterXPosition(this.handler.currentStave,t.x),n=this.handler.provisoryTickable.clone();this.handler.currentStave.insertTickableBetween(n,s,r),this.handler.redraw(!0)}else{var i=NoteMap.getNoteName(this.handler.currentStave,t),o=this.handler.currentNote.indexOfKey(i);if(-1==o){var a=this.handler.currentNote.keys;a.push(i);var c=this.handler.currentNote;n=c.clone({keys:a});this.handler.currentStave.replaceTickable(c,n),this.handler.currentNote=n,this.handler.redraw()}}}},Vex.UI.MouseListener.prototype.handleMiddleMouseClick=function(e){var t=this.handler.provisoryTickable,s=null;t instanceof Vex.Flow.StaveNote?s="n"==t.noteType?Vex.UI.TickableType.REST:Vex.UI.TickableType.BAR:t instanceof Vex.Flow.BarNote&&(s=Vex.UI.TickableType.NOTE),this.handler.updateProvisoryType(s)},Vex.UI.MouseListener.prototype.handleRightMouseClick=function(e){if(null!=this.handler.currentStave&&null!=this.handler.currentNote){var t=getMousePositionInCanvas(this.canvas,e),s=NoteMap.getNoteName(this.handler.currentStave,t);this.handler.openMenuForKey(s,t)}},Vex.Flow.Stave.prototype.tickables=[],Vex.Flow.Stave.prototype.beams=[],Vex.Flow.Stave.prototype.usable=!0,Vex.Flow.Stave.prototype.setTickables=function(e){this.tickables=e},Vex.Flow.Stave.prototype.getTickables=function(){return this.tickables},Vex.Flow.Stave.prototype.getNotes=function(){for(var e=[],t=0;t<this.tickables.length;t++){var s=this.tickables[t];s instanceof Vex.Flow.StaveNote&&e.push(s)}return e},Vex.Flow.Stave.prototype.insertTickableBetween=function(e,t,s){if(e instanceof Vex.Flow.ClefNote){if(this.getClefModifierIndex()<0)return void this.addClef(e.clefKey);if(null==t)return void this.replaceClef(e.clefKey);if(0==this.getNotes().length)return}else if(e instanceof Vex.Flow.BarNote){if(null==s)return void this.setEndBarType(e.type);if(0==this.getNotes().length)return}if(null==s)this.pushTickable(e);else{var r=this.tickables.indexOf(s);this.tickables.splice(r,0,e)}},Vex.Flow.Stave.prototype.getClefModifierIndex=function(){for(var e=0;e<this.modifiers.length;e++){var t=this.modifiers[e];if(t instanceof Vex.Flow.Clef)return e}return-1},Vex.Flow.Stave.prototype.replaceClef=function(e){var t=this.start_x;this.clef=e;new Vex.Flow.Clef(e);this.modifiers.splice(this.getClefModifierIndex(),1),this.glyphs=[],this.addClef(e),this.start_x=t},Vex.Flow.Stave.prototype.getPreviousTickable=function(e){var t=this.tickables.indexOf(e);return 0==t?null:this.tickables[t-1]},Vex.Flow.Stave.prototype.getNextTickable=function(e){var t=this.tickables.indexOf(e);return t==this.tickables.length-1?null:this.tickables[t+1]},Vex.Flow.Stave.prototype.getNextNote=function(e){var t=this.tickables.indexOf(e);while(t<this.tickables.length)if(t++,this.tickables[t]instanceof Vex.Flow.StaveNote)return this.tickables[t];return null},Vex.Flow.Stave.prototype.replaceTickable=function(e,t){if(null!=e.beam){var s=e.beam,r=s.tickables.indexOf(e);s.notes[r]=t}r=this.tickables.indexOf(e);this.tickables[r]=t},Vex.Flow.Stave.prototype.removeTickable=function(e){this.tickables.splice(this.tickables.indexOf(e),1)},Vex.Flow.Stave.prototype.pushTickable=function(e){this.tickables.push(e)},Vex.Flow.Stave.prototype.beams=[],Vex.Flow.Stave.prototype.setBeams=function(e){this.beams=e},Vex.Flow.Stave.prototype.getBeams=function(){return this.beams},Vex.Flow.Stave.prototype.pushBeam=function(e){this.beams.push(e)},Vex.Flow.StaveNote.prototype.indexOfKey=function(e){return this.keys.indexOf(e)},Vex.Flow.StaveNote.prototype.letter="R",Vex.Flow.StaveNote.prototype.getPlayEvents=function(e){for(var t=[],s=0;s<this.keys.length;s++)t.push(MIDI.keyToNote[this.keys[s].replace("/","")]);for(s=0;s<t.length;s++)t[s]+=Vex.UI.ClefOffsets[e.clef];var r=e.defaultTime/this.duration;for(s=0;s<this.modifiers.length;s++){var n=this.modifiers[s];if(n instanceof Vex.Flow.Accidental){var i;switch(n.type){case"bb":i=-2;break;case"b":i=-1;break;case"n":i=0;break;case"#":i=1;break;case"##":i=2;break}t[n.index]+=i}else n instanceof Vex.Flow.Dot&&(r*=1.5)}var o=[];return o.push({type:"channel",channel:0,subtype:1==t.length?"noteOn":"chordOn",noteNumber:1==t.length?t[0]:t,velocity:127,queuedTime:e.delay,note:this}),o.push({type:"channel",channel:0,subtype:1==t.length?"noteOff":"chordOff",noteNumber:1==t.length?t[0]:t,queuedTime:e.delay+r,note:this}),e.delay=e.delay+r,o},Vex.Flow.StaveNote.prototype.clone=function(e){var t={keys:this.keys,stem_direction:this.getStemDirection(),duration:this.duration,noteType:this.noteType},s=mergeProperties(t,e);s.duration=s.duration+s.noteType;var r=new Vex.Flow.StaveNote(s);r.setStyle(this.note_heads[0].style),null!=this.modifierContext&&null!=this.getDots()&&r.addDotToAll(),r.beam=this.beam;for(var n=0;n<this.modifiers.length;n++)this.modifiers[0]instanceof Vex.Flow.Accidental&&r.addAccidental(this.modifiers[n].index,new Vex.Flow.Accidental(this.modifiers[n].type));return r},Vex.Flow.StaveNote.prototype.setHighlight=function(e){e?this.setStyle(Vex.UI.highlightNoteStyle):this.setStyle(Vex.UI.defaultNoteStyle)},Vex.Flow.StaveNote.prototype.change=function(e){var t=new Array;for(var s in this.keys){var r=this.keys[s].split("/");r[0]=r[0].toUpperCase();var n=r[0].substring(0,1),i=r[0].substring(1),o=parseInt(r[1]),a=0;for(var c in NoteMap.noteMap)if(NoteMap.noteMap[c]==n){a=c;break}if("UP"==e)a++;else if("DOWN"==e)a--;else if("SHARP"==e){switch(i){case"":case null:case void 0:i="#";break;case"#":i="##";break}alert(i)}a==NoteMap.noteMap.length?(a=0,o++):a<0&&(a=NoteMap.noteMap.length-1,o--),n=NoteMap.noteMap[a],t.push(n+i+"/"+o)}var l=this.duration,u=this.noteType;if("PAUSE"==e){"n"==u?u="r":"r"==u&&(u="n"),l=Vex.Flow.parseNoteDurationString(this.duration);for(var d="",h=0;h<l.dots;h++)d+="d";l=l.duration+d+u}return this.clone({keys:t,duration:l})},Vex.Flow.StaveNote.prototype.drawFlag=function(){if(!this.context)throw new Vex.RERR("NoCanvasContext","Can't draw without a canvas context.");var e=this.context,t=this.getGlyph(),s=null===this.beam,r=this.getNoteHeadBounds(),n=this.getNoteHeadBeginX(),i=this.getNoteHeadEndX();if(t.flag&&s){var o,a,c=this.stem.getHeight();this.getStemDirection()===Vex.Flow.Stem.DOWN?(o=n,a=r.y_top-c,t.code_flag_downstem):(o=i,a=r.y_bottom-c,t.code_flag_upstem);var l=e.fillStyle;e.fillStyle=this.note_heads[0].style.fillStyle,e.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(e,this.getFlagStyle()||!1),this.flag.render(e,o,a),this.restoreStyle(e,this.getFlagStyle()||!1),e.closeGroup(),e.fillStyle=l}},Vex.Flow.Dot.prototype.draw=function(){if(!this.context)throw new Vex.RERR("NoContext","Can't draw dot without a context.");if(!this.note||null==this.index)throw new Vex.RERR("NoAttachedNote","Can't draw dot without a note and index.");this.note.stave.options.spacing_between_lines_px;var e=this.note.getModifierStartXY(this.position,this.index);"tabnotes"===this.note.getCategory()&&(e.y=this.note.getStemExtents().baseY);var t=e.x+this.x_shift+this.width-this.radius,s=e.y+this.y_shift,r=this.context;r.beginPath(),r.arc(t,s,this.radius,0,2*Math.PI,!1),r.fill()},Vex.Flow.BarNote.prototype.clone=function(){var e=new Vex.Flow.BarNote;return e.setType(this.getType()),e.setStave(this.getStave()),e.setTickContext(this.getTickContext()),e},Vex.Flow.BarNote.prototype.getPlayEvents=function(e,t){var s=[];function r(){e.beginRepeatIndex=t.length+s.length}function n(){for(var r=e.beginRepeatIndex||0;r<t.length;r++)s.push(t[r])}switch(this.type){case Vex.Flow.Barline.type.REPEAT_BEGIN:r();break;case Vex.Flow.Barline.type.REPEAT_END:n();break;case Vex.Flow.Barline.type.REPEAT_BOTH:n(),r();break}return s},Vex.Flow.ClefNote.prototype.clone=function(){var e=new Vex.Flow.ClefNote(this.clefKey);return e.clefKey=this.clefKey,e.setTickContext(new Vex.Flow.TickContext),e.getTickContext().setX(this.getTickContext().getX()),e},Vex.Flow.ClefNote.prototype.getPlayEvents=function(e){return e.clef=this.clefKey,[]},Vex.UI.NoteMap=function(){this.noteMap=["C","D","E","F","G","A","B"]},Vex.UI.NoteMap.prototype.getNoteName=function(e,t){var s=t.y-e.getBoundingBox().getY(),r=Math.round(s/(e.options.spacing_between_lines_px/2));return this.toNoteName(r,e)},Vex.UI.NoteMap.prototype.toNoteName=function(e,t){var s=this.getBaseNote(t),r=this.noteMap.indexOf(s.note),n=(r-e)%7;while(n<0)n+=7;var i=s.octave-Math.floor(e/7);return 5!=n&&6!=n||i--,this.noteMap[n]+"/"+i},Vex.UI.NoteMap.prototype.getBaseNote=function(e){return{note:"G",octave:6}};var NoteMap=new Vex.UI.NoteMap;Vex.UI.TipRenderer=function(e){this.canvas=e,this.color=null,this.fontSize=null,this.fontName=null,this.style=null,this.context=null,this.lineWidth=null,this.textAlign=null,this.textBaseline=null,this.boundingBox=null,this.showingTip=null,this.backgroundColor=null},Vex.UI.TipRenderer.prototype.init=function(){this.textAlign="left",this.textBaseline="middle",this.color="black",this.fontName="Calibri",this.lineWidth=1,this.style="normal",this.fontSize=10,this.boundingBox={x:0,y:0,width:200,height:20},this.context=this.canvas.getContext("2d"),this.showingTip=!1,this.backgroundColor="white"},Vex.UI.TipRenderer.prototype.showTip=function(e){this.showingTip&&this.hideTip();var t=this.style+" "+this.fontSize+"pt "+this.fontName;this.context.font=t,this.context.fillStyle=this.color,this.context.textAlign=this.textAlign,this.context.lineWidth=this.lineWidth,this.context.textBaseline=this.textBaseline,this.context.fillText(e,this.boundingBox.x,this.boundingBox.y),this.showingTip=!0},Vex.UI.TipRenderer.prototype.hideTip=function(){this.context.beginPath(),this.context.rect(this.boundingBox.x,this.boundingBox.y-5,this.boundingBox.width,this.boundingBox.height+10),this.context.fillStyle=this.backgroundColor,this.context.fill(),this.showingTip=!1},Vex.UI.NoteMenuButtonRenderer=function(e,t){this.ready=!1;var s=this;this.menuButtonsImg=new Image,this.menuButtonsImg.src="https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/noteMenuButtons.gif",this.menuButtonsImg.onload=function(){s.ready=!0}},Vex.UI.NoteMenuButtonRenderer.prototype.closeButton=function(){var e=this.panel,t=this.context,s=5,r=4,n=15,i=e.rightX-n-s,o=e.y+s;return t.beginPath(),t.rect(i,o,n,n),t.fillStyle="red",t.fill(),t.beginPath(),t.lineWidth=3,t.moveTo(i+r,o+r),t.lineTo(i+n-r,o+n-r),t.moveTo(i+r,o+n-r),t.lineTo(i+n-r,o+r),t.strokeStyle="white",t.stroke(),new Vex.UI.Button({backgroundColor:"red",width:n,height:n,x:i,y:o,rightX:i+n,bottomY:o+n,name:"closeButton",action:"close",tip:"Close the menu"})},Vex.UI.NoteMenuButtonRenderer.prototype.closeButton=function(){var e=this.panel,t=this.context,s=5,r=4,n=15,i=e.rightX-n-s,o=e.y+s;return t.beginPath(),t.rect(i,o,n,n),t.fillStyle="red",t.fill(),t.beginPath(),t.lineWidth=3,t.moveTo(i+r,o+r),t.lineTo(i+n-r,o+n-r),t.moveTo(i+r,o+n-r),t.lineTo(i+n-r,o+r),t.strokeStyle="white",t.stroke(),new Vex.UI.Button({backgroundColor:"red",width:n,height:n,x:i,y:o,rightX:i+n,bottomY:o+n,name:"closeButton",action:"close",tip:"Close the menu"})},Vex.UI.NoteMenuButtonRenderer.prototype.accidentalButton=function(e){var t=this.panel,s=this.context,r=this.menuButtonsImg,n=[400,100,200,0,300],i=["addDoubleFlat","addFlat","addNatural","addSharp","addDoubleSharp"],o=["Add double flat to key","Add flat to key","Add natural to key","Add sharp to key","Add double sharp to key"],a=10,c=5,l=10,u=n[e],d=0,h=100,p=100,m=25,v=m,f=t.x+a+e*(c+m),g=t.y+l;return s.drawImage(r,u,d,h,p,f,g,m,v),new Vex.UI.Button({backgroundColor:"white",x:f,y:g,rightX:f+m,bottomY:g+v,width:m,height:v,action:i[e],tip:o[e]})},Vex.UI.NoteMenuButtonRenderer.prototype.dotButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=700,n=10,i=10,o=r,a=0,c=100,l=100,u=25,d=u,h=e.x+n,p=e.y+2*i+d;return t.drawImage(s,o,a,c,l,h,p,u,d),new Vex.UI.Button({backgroundColor:"white",x:h,y:p,rightX:h+u,bottomY:p+d,width:u,height:d,action:"addDot",tip:"Add dot to key"})},Vex.UI.NoteMenuButtonRenderer.prototype.beamButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=500,n=10,i=5,o=10,a=r,c=0,l=100,u=100,d=25,h=d,p=e.x+n+(i+d),m=e.y+2*o+h;return t.drawImage(s,a,c,l,u,p,m,d,h),new Vex.UI.Button({backgroundColor:"white",x:p,y:m,rightX:p+d,bottomY:m+h,width:d,height:h,action:"addBeam",tip:"Beam with next note"})},Vex.UI.NoteMenuButtonRenderer.prototype.deleteButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=800,n=10,i=5,o=10,a=r,c=0,l=100,u=100,d=25,h=d,p=e.x+n+3*(i+d),m=e.y+2*o+h;return t.drawImage(s,a,c,l,u,p,m,d,h),new Vex.UI.Button({backgroundColor:"white",x:p,y:m,rightX:p+d,bottomY:m+h,width:d,height:h,action:"deleteNote",tip:"Remove key"})},Vex.UI.NoteMenuButtonRenderer.prototype.tieButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=600,n=10,i=5,o=10,a=r,c=0,l=100,u=100,d=25,h=d,p=e.x+n+2*(i+d),m=e.y+2*o+h;return t.drawImage(s,a,c,l,u,p,m,d,h),new Vex.UI.Button({backgroundColor:"white",x:p,y:m,rightX:p+d,bottomY:m+h,width:d,height:h,action:"addTie",tip:"Tie with next note"})},Vex.UI.Button=function(e){this.props=e},Vex.UI.Button.prototype.highlight=function(e,t,s){null==t&&(t=s.props.backgroundColor);var r=4,n=e.getContext("2d");n.beginPath(),n.lineWidth=r,n.rect(s.props.x,s.props.y,s.props.width,s.props.height),n.strokeStyle=t,n.stroke()},Vex.UI.Button.prototype.showTip=function(){},Vex.UI.Button.prototype.callAction=function(e){e[this.props.action]()},Vex.UI.TickableType={NOTE:"note",REST:"rest",BAR:"bar",CLEF:"clef"},Vex.UI.validateScore=function(notesInBars,timeSignature){for(var i=0;i<notesInBars.length;i++){for(var notes=notesInBars[i],barDuration=eval(timeSignature),accumDuration=0,j=0;j<notes.length;j++){var noteArr=notes[j].split("/"),dur=noteArr[2],isDot=!1;dur.includes("r")&&(dur=dur.replace("r","")),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0),dur=1/parseInt(dur),isDot&&(dur*=1.5),accumDuration+=dur}if(accumDuration!=barDuration)return console.log(i),!1}return!0},Vex.UI.Handler.prototype.getNotePositions=function(){var e=this.staveList;return e.map((function(e){return e.getTickables().map((function(e){return e.getBoundingBox()}))}))},Vex.UI.notesToBars=function(notes,timeSignature){if(notes&&timeSignature){for(var tickables=[],barNum=0,barDuration=eval(timeSignature),accumDuration=0,notesInBars=[],i=0;i<notes.length;i++){var noteArr=notes[i].split("/"),dur=noteArr[2],isDot=!1;dur.includes("r")&&(dur=dur.replace("r","")),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0),dur=1/parseInt(dur),isDot&&(dur*=1.5),accumDuration+=dur,tickables.push(notes[i]),accumDuration==barDuration&&(notesInBars.push(tickables),tickables=[],barNum++,accumDuration=0)}return tickables.length>0&&notesInBars.push(tickables),notesInBars}},Vex.UI.notesToOnsetDuration=function(e,t,s,r){if(e&&t&&s){var n=[],i=4*parseInt(t.split("/")[0])*60/s*r,o=parseInt(t.split("/")[1]);return e.forEach((function(e){var t=e.split("/")[2],r=!1;(t.includes("d")||t.includes("r"))&&(t.includes("r")&&(t=t.replace("r",""),!0),t.includes("d")&&(t=t.replace("d",""),r=!0));var a=o/parseInt(t)*60/s;r&&(a*=1.5),n.push({onset:i,duration:a}),i+=a})),n}},Vex.UI.Handler.prototype.exportNotes=function(){for(var e=[],t=0;t<this.staveList.length;t++)for(var s=this.staveList[t].getTickables(),r=0;r<s.length;r++){var n=s[r];if(n instanceof Vex.Flow.StaveNote){var i=n.duration,o=n.keys[0],a=n.dots,c=n.noteType,l=o+"/"+i;if("r"==c&&(l+="r"),1==a&&(l+="d"),n.modifiers.length>0)for(var u=0;u<n.modifiers.length;u++)if(void 0!=n.modifiers[u].accidental){var d=n.modifiers[u].accidental.code;"accidentalFlat"==d?l+="/b":"accidentalDoubleFlat"==d?l+="/bb":"accidentalNatural"==d?l+="/n":"accidentalSharp"==d?l+="/#":"accidentalDoubleSharp"==d&&(l+="/##");break}e.push(l)}}return e},Vex.UI.Handler.prototype.importNotes=function(notes,timeSignature){if(notes&&timeSignature){for(var tickables=[],barNum=0,barDuration=eval(timeSignature),accumDuration=0,j=0;j<this.staveList.length;j++)this.staveList[j].setTickables([]);for(var i=0;i<notes.length&&barNum<this.staveList.length;i++){var noteArr=notes[i].split("/"),dur=noteArr[2],isDot=!1,isRest=!1;dur.includes("r")&&(dur=dur.replace("r",""),isRest=!0),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0);var staveNote=new Vex.Flow.StaveNote({clef:"treble",keys:[noteArr[0]+"/"+noteArr[1]],duration:isRest?dur+"r":dur});if(staveNote.autoStem(),staveNote.setStyle(Vex.UI.defaultNoteStyle),staveNote.setTickContext(new Vex.Flow.TickContext),dur=1/parseInt(dur),isDot&&(dur*=1.5,staveNote.addDotToAll()),4==noteArr.length){var accidental=new Vex.Flow.Accidental(noteArr[3]);staveNote.addAccidental(0,accidental)}accumDuration+dur>barDuration?(this.staveList[barNum].setTickables(tickables),tickables=[],barNum++,accumDuration=dur):accumDuration+=dur,barNum<this.staveList.length&&staveNote.setStave(this.staveList[barNum]),tickables.push(staveNote)}tickables.length>0&&barNum+1<=this.options.numberOfStaves&&this.staveList[barNum].setTickables(tickables);for(var j=0;j<this.staveList.length;j++)this.drawBeams(this.staveList[j],!0);this.redraw()}},Vex.UI.Handler.prototype.changeBars=function(e){if(e>this.numBars){for(var t=this.numBars;t<e;t++)this.staveList[t].setTickables([]),this.staveList[t].usable=!0;this.redraw()}else if(e<this.numBars){for(var s=[],r=this.options.timeSignature.split("/")[1]+"r",n=0;n<parseInt(this.options.timeSignature.split("/")[0]);n++)s.push(new Vex.Flow.StaveNote({clef:"treble",keys:["b/4"],duration:r}));for(t=e;t<this.staveList.length;t++)this.staveList[t].setTickables(s),this.staveList[t].usable=!1;this.redraw()}this.numBars=e},Vex.UI.Handler.prototype.setTimeSignature=function(e){for(var t=0;t<this.staveList.length;t++)(t+1)%2==1&&this.staveList[t].setTimeSignature(e);this.options.timeSignature=e,this.redraw()},Vex.UI.Handler.prototype.setKeySignature=function(e){for(var t=0;t<this.staveList.length;t++)(t+1)%2==1&&this.staveList[t].setKeySignature(e);this.options.keySignature=e,this.redraw()},Vex.UI.Handler.prototype.highlightNote=function(e){if(0==e)this.staveList[0].getTickables()[0].setHighlight(!0),this.redraw();else{var t=0,s=this.staveList[t].getTickables().length;while(e>=s)e-=s,t++,s=this.staveList[t].getTickables().length;this.staveList[t].getTickables()[e].setHighlight(!0),this.redraw()}},Vex.UI.Handler.prototype.deHighlightNote=function(e){if(0==e)this.staveList[0].getTickables()[0].setHighlight(!1),this.redraw();else{var t=0,s=this.staveList[t].getTickables().length;while(e>=s)e-=s,t++,s=this.staveList[t].getTickables().length;this.staveList[t].getTickables()[e].setHighlight(!1),this.redraw()}},Vex.UI.Handler.prototype.deHighlightAll=function(){for(var e=0;e<this.staveList.length;e++)this.staveList[e].getTickables().forEach((function(e){return e.setHighlight(!1)}));this.redraw()},Vex.UI.Handler.prototype.changeNumberOfBars=function(e,t){this.container.removeChild(this.container.lastElementChild);var s={numberOfStaves:e};this.options=mergeProperties(this.options,s||{}),this.canvas=this.createCanvas(),this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init(),this.init(),this.importNotes(t,this.options.timeSignature)},__webpack_exports__["a"]=Vex.UI},3723:function(e,t,s){},4:function(e,t){},4678:function(e,t,s){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return s(t)}function i(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id="4678"},"46a2":function(e,t,s){"use strict";var r=s("5718"),n=s.n(r);n.a},"4cf2":function(e,t,s){},"4f40":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"app"}},[s("page-header"),s("v-main",[s("router-view"),s("notifications",{attrs:{group:"foo",position:"bottom center"}})],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-app-bar",{attrs:{light:"",app:"",absolute:"",color:"white"}},[r("router-link",{staticClass:"pl-3",attrs:{id:"logo",to:"/"}},[r("img",{attrs:{id:"logo-img",src:s("325b"),height:"46"}})]),r("v-spacer"),e.$store.state.isUserLoggedIn||e.minimiseNav?e._e():r("v-toolbar-items",[r("v-btn",{attrs:{depressed:"",to:"/register",color:"white"}},[e._v("Register")]),r("v-btn",{attrs:{depressed:"",to:"/login",color:"white"}},[e._v("Log In")])],1),e.$store.state.isUserLoggedIn&&!e.minimiseNav?r("v-toolbar-items",[r("v-btn",{attrs:{depressed:"",to:"/",color:"white"}},[e._v("Home")]),r("v-btn",{attrs:{depressed:"",to:"/course/index",color:"white"}},[e._v("My Courses")]),e.is_student&&e.notifications>0?r("v-btn",{attrs:{depressed:"",to:"/notifications",color:"white"}},[e._v("Notifications"),r("div",{attrs:{id:"notification"}},[e._v(e._s(e.notifications))])]):e.is_student?r("v-btn",{attrs:{depressed:"",to:"/notifications",color:"white"}},[e._v("Notifications")]):!e.is_student&&e.notifications>0?r("v-btn",{attrs:{depressed:"",to:"/notifications",color:"white"}},[e._v("Submissions"),r("div",{attrs:{id:"notification"}},[e._v(e._s(e.notifications))])]):r("v-btn",{attrs:{depressed:"",to:"/notifications",color:"white"}},[e._v("Submissions")]),r("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.logout}},[e._v("Log Out")])],1):e._e(),e.minimiseNav?r("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}):e._e()],1),r("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.$store.state.isUserLoggedIn?r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[r("v-list-item",{attrs:{to:"/"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-home")])],1),r("v-list-item-title",[e._v("Home")])],1),r("v-list-item",{attrs:{to:"/course/index"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-playlist-music")])],1),r("v-list-item-title",[e._v("My Courses")])],1),r("v-list-item",{on:{click:e.logout}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-logout")])],1),r("v-list-item-title",[e._v("Log Out")])],1)],1)],1):r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[r("v-list-item",{attrs:{to:"/"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-home")])],1),r("v-list-item-title",[e._v("Home")])],1),r("v-list-item",{attrs:{to:"/register"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-account")])],1),r("v-list-item-title",[e._v("Register")])],1),r("v-list-item",{attrs:{to:"/login"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-account")])],1),r("v-list-item-title",[e._v("Log In")])],1)],1)],1)],1)],1)},a=[],c=(s("b0c0"),s("96cf"),s("1da1")),l=s("5530"),u=s("2f62"),d=s("bc3a"),h=s.n(d),p=s("0e44"),m={subscribe:function(e){return f().post("subscribe/new",e)},getSubscriptionInfoOfStudent:function(e){return f().get("subscribe/get/student?uid=".concat(e))},getSubscriptionInfoOfCourse:function(e){return f().get("subscribe/get/course?cid=".concat(e))},isSubscribed:function(e){return f().get("subscribe/get/is-subscribed?cid=".concat(e))},isOwned:function(e){return f().get("subscribe/get/is-owned?cid=".concat(e))}};r["default"].use(u["a"]);var v=new u["a"].Store({strict:!0,plugins:[Object(p["a"])()],state:{token:null,user:null,isUserLoggedIn:!1,notifications:null},mutations:{resetState:function(e){e.token=null,e.notifications=null,e.user=null,e.isUserLoggedIn=!1},setToken:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setNotifications:function(e,t){e.notifications=t},logIn:function(e){e.isUserLoggedIn=!0},logOut:function(e){e.isUserLoggedIn=!1},clearOneNotification:function(e){e.notifications>0&&(e.notifications-=1)}},actions:{setToken:function(e,t){var s=e.commit;s("setToken",t),t?s("logIn"):(s("logOut"),s("resetState"))},setUser:function(e,t){var s=e.commit;s("setUser",t)},setNotifications:function(e,t){var s=e.commit;s("setNotifications",t)},clearOneNotification:function(e){var t=e.commit;t("clearOneNotification")},subscribe:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m.subscribe(t);case 3:e.dispatch("getCoursesForStudent",{id:t.studentId}),s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](0),console.log(s.t0);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})))()}}}),f=function(){return h.a.create({baseURL:"/api/",headers:{Authorization:"Bearer ".concat(v.state.token)}})},g={create:function(e){return f().post("recording/new",e)},list:function(e){return f().get("recording/list?eid=".concat(e))},getFeedback:function(e){return f().get("recording/get-notes?rid=".concat(e))},updateFeedback:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return f().post("recording/update-notes?rid=".concat(e),{transcription:t,overallComment:s})},delete:function(e){return f().delete("recording/del?rid=".concat(e))},getUnreadComments:function(){return f().get("recording/get-unread-comments")},getUncommentedRecordings:function(){return f().get("recording/get-uncommented-recordings")},markAsRead:function(e){return f().post("/recording/mark-read?rid=".concat(e))},markAsCommented:function(e){return f().post("/recording/mark-commented?rid=".concat(e))}},V={name:"Header",data:function(){return{drawer:!1,messages:0}},methods:{logout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),"/"==this.$route.path?this.$router.go():this.$router.push("/")}},computed:Object(l["a"])({minimiseNav:function(){switch(this.$vuetify.breakpoint.name){case"xs":return!0;case"sm":return!0;case"md":return!1;case"lg":return!1;case"xl":return!1;default:return!0}},is_student:function(){return this.user?this.user.isStudent:null}},Object(u["b"])(["user","notifications"])),mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.user){e.next=12;break}if(!this.is_student){e.next=8;break}return e.next=4,g.getUnreadComments();case 4:t=e.sent.data.recordings,this.$store.dispatch("setNotifications",t.length),e.next=12;break;case 8:return e.next=10,g.getUncommentedRecordings();case 10:s=e.sent.data.recordings,this.$store.dispatch("setNotifications",s.length);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},b=V,x=(s("c974"),s("2877")),w=s("6544"),_=s.n(w),A=s("40dc"),y=s("5bc1"),k=s("8336"),C=s("132d"),S=s("8860"),T=s("da13"),I=s("1baa"),R=s("34c3"),N=s("5d23"),E=s("f774"),B=s("2fa4"),P=s("2a7f"),O=Object(x["a"])(b,o,a,!1,null,"3c7c787b",null),j=O.exports;_()(O,{VAppBar:A["a"],VAppBarNavIcon:y["a"],VBtn:k["a"],VIcon:C["a"],VList:S["a"],VListItem:T["a"],VListItemGroup:I["a"],VListItemIcon:R["a"],VListItemTitle:N["c"],VNavigationDrawer:E["a"],VSpacer:B["a"],VToolbarItems:P["a"]});var F={name:"App",components:{"page-header":j},mounted:function(){}},L=F,M=(s("034f"),s("7496")),D=s("f6c4"),U=Object(x["a"])(L,n,i,!1,null,null,null),$=U.exports;_()(U,{VApp:M["a"],VMain:D["a"]});var K=s("8c4f"),W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-container",[s("v-row",{staticClass:"mt-16 mb-12",attrs:{justify:"space-between"}},[s("v-col",{staticClass:"text-left",attrs:{cols:"12",md:"6"}},[s("h1",{staticClass:"pb-6"},[e._v("Welcome to Violian!")]),s("v-autocomplete",{attrs:{items:e.items,loading:e.isLoading,"search-input":e.search,"cache-items":"",multiple:"",clearable:"","hide-details":"","hide-selected":"","item-text":"name","item-value":"symbol",label:"Search for a course...",solo:""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[s("v-list-item",[s("v-list-item-title",[e._v("Search for your favorite "),s("strong",[e._v("Course")])])],1)]},proxy:!0},{key:"item",fn:function(t){var r=t.item;return[s("v-list-item",{on:{click:function(t){return e.go_to_course(t,r.id)}}},[s("v-list-item-content",[e._v(e._s(r.name))])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1),e.cardsPerRow>2?s("v-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("video",{ref:"videoPlayer",staticClass:"vjs-big-play-centered video-js",attrs:{id:"video"}})]):e._e()],1),s("v-divider"),e.is_student&&e.studentCourses.length>0?s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("h2",[e._v("My Courses")])]),e._l(e.studentCourses.slice(0,e.cardsPerRow),(function(t){return s("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[s("course-card",{attrs:{course:t}},[s("v-card-actions",[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course(s,t.id,t.lessons[0].id)}}},[e._v("Continue Learning")])],1)],1)],1)})),s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:function(t){return e.$router.push("/course/index")}}},[e._v("See All"),s("v-icon",{attrs:{right:"",dark:"",size:"20"}},[e._v("mdi-arrow-right")])],1)],1)],2):e._e(),!e.is_student&&e.tutorCourses.length>0?s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("h2",[e._v("My Courses")])]),e._l(e.tutorCourses.slice(0,e.cardsPerRow),(function(t){return s("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[s("course-card",{attrs:{course:t}},[s("v-card-actions",[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course_edit(s,t.id)}}},[e._v("Edit")]),s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course(s,t.id,t.lessons[0].id)}}},[e._v("View")])],1)],1)],1)})),s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:function(t){return e.$router.push("/course/index")}}},[e._v("See All"),s("v-icon",{attrs:{right:"",dark:"",size:"20"}},[e._v("mdi-arrow-right")])],1)],1)],2):e._e(),e._l(Object.entries(e.coursesInCategory),(function(t){return s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("h2",[e._v(e._s(t[0])+" Courses")])]),e._l(t[1].slice(0,e.cardsPerRow),(function(t){return s("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[s("course-card",{attrs:{course:t}},[s("v-card-actions",[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course(s,t.id)}}},[e._v("Find out more")])],1)],1)],1)})),s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:function(s){return e.$router.push("/course/list/"+t[0])}}},[e._v("See All"),s("v-icon",{attrs:{right:"",dark:"",size:"20"}},[e._v("mdi-arrow-right")])],1)],1)],2)}))],2)],1)},H=[],q=(s("99af"),{create:function(e){return f().post("course/new",e)},list:function(e){return f().get("course/list?uid=".concat(e))},listAll:function(e,t){return e&&t?f().get("course/listall?search=".concat(e,"&instrument=").concat(t)):e&&!t?f().get("course/listall?search=".concat(e)):!e&&t?f().get("course/listall?&instrument=".concat(t)):f().get("course/listall")},show:function(e){return f().get("course/show?cid=".concat(e))},edit:function(e){var t=f();return t.defaults.headers.put["Content-Type"]="multipart/form-data",t.put("course/edit",e)},delete:function(e){return f().delete("course/del?cid=".concat(e))}}),X=s("2ef0"),z=s.n(X),Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"mx-auto"},[e.course.coverPhotoUrl?s("v-img",{staticClass:"white--text align-end",attrs:{height:"160px",src:e.course.coverPhotoUrl,gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[s("v-card-title",{staticStyle:{"text-shadow":"1px 1px 2px #000000"}},[e._v(e._s(e.course.name))])],1):s("v-card-title",[e._v(e._s(e.course.name))]),s("v-card-subtitle",{staticClass:"pb-0 text-left"},[e._v(e._s(e.course.instrument))]),s("v-card-text",{staticClass:"text-left text--primary pb-0"},[s("div",[e._v(e._s(e.course.tagline))])]),e._t("default")],2)},G=[],Q={props:["course"]},Z=Q,J=s("b0af"),ee=s("99d9"),te=s("adda"),se=Object(x["a"])(Z,Y,G,!1,null,null,null),re=se.exports;_()(se,{VCard:J["a"],VCardSubtitle:ee["b"],VCardText:ee["c"],VCardTitle:ee["d"],VImg:te["a"]});var ne=s("f0e2"),ie={name:"Home",components:{"course-card":re},data:function(){return{isLoading:!1,items:[],model:null,search:null,popularCourses:[],studentCourses:[],tutorCourses:[],coursesInCategory:{}}},watch:{model:function(e){console.log(e)},search:z.a.debounce(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==t||void 0==t){e.next=13;break}return this.isLoading=!0,e.prev=2,e.next=5,q.listAll(t);case 5:this.items=e.sent.data.courses,this.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),this.isLoading=!1,console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),700)},computed:Object(l["a"])({is_student:function(){return this.user?this.user.isStudent:null},cardsPerRow:function(){switch(this.$vuetify.breakpoint.name){case"xs":return 2;case"sm":return 2;case"md":return 3;case"lg":return 4;case"xl":return 5;default:return 2}}},Object(u["b"])(["user"])),methods:{go_to_course:function(e,t,s){void 0!=s?this.$router.push("/course/show/".concat(t,"/lesson/").concat(s)):this.$router.push({name:"showcourse",params:{course_id:t}})},go_to_course_edit:function(e,t){this.$router.push({name:"editcourse",params:{course_id:t}})}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.listAll();case 2:if(this.popularCourses=e.sent.data.courses,!this.user){e.next=13;break}if(!this.is_student){e.next=10;break}return e.next=7,m.getSubscriptionInfoOfStudent(this.user.id);case 7:this.studentCourses=e.sent.data.courses,e.next=13;break;case 10:return e.next=12,q.list(this.user.id);case 12:this.tutorCourses=e.sent.data.courses;case 13:for(t=0;t<this.popularCourses.length;t++)void 0==this.coursesInCategory[this.popularCourses[t].instrument]?this.$set(this.coursesInCategory,this.popularCourses[t].instrument,[this.popularCourses[t]]):this.$set(this.coursesInCategory,this.popularCourses[t].instrument,this.coursesInCategory[this.popularCourses[t].instrument].concat(this.popularCourses[t]));s=Object(ne["default"])(this.$refs.videoPlayer,{controls:!0,aspectRatio:"16:9",sources:[{src:"https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/violian.mp4",type:"video/mp4"}],playbackRates:[.8,.9,1,1.1,1.2],poster:"https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/violian_cover.jpg"},(function(){s.hotkeys({volumeStep:.1,seekStep:2,enableModifiersForNumbers:!1,enableHoverScroll:!0})}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},oe=ie,ae=s("c6a6"),ce=s("62ad"),le=s("a523"),ue=s("ce7e"),de=s("0fd9"),he=Object(x["a"])(oe,W,H,!1,null,"67e82e97",null),pe=he.exports;_()(he,{VAutocomplete:ae["a"],VBtn:k["a"],VCardActions:ee["a"],VCol:ce["a"],VContainer:le["a"],VDivider:ue["a"],VIcon:C["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemTitle:N["c"],VRow:de["a"]});var me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"register"}},[s("panel",{attrs:{title:"Register"}},[s("v-card-text",[s("v-form",{ref:"form",staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[s("v-text-field",{attrs:{label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",rules:e.nameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-account",type:"text",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-text-field",{attrs:{label:"Password Confirmation",name:"password confirmation","prepend-icon":"mdi-lock",type:"password",rules:e.passwordConfirmationRules},model:{value:e.passwordConfirmation,callback:function(t){e.passwordConfirmation=t},expression:"passwordConfirmation"}}),s("v-radio-group",{attrs:{row:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[s("v-radio",{attrs:{label:"Student",value:"Student",color:"indigo"}}),s("v-radio",{attrs:{label:"Tutor",value:"Tutor",color:"indigo"}})],1),s("v-spacer"),s("v-btn",{staticClass:"mt-5",attrs:{type:"submit",loading:e.loading,disabled:e.loading}},[e._v("Register")]),s("v-spacer")],1)],1),s("v-card-text",[s("div",{staticClass:"error",domProps:{innerHTML:e._s(e.error)}},[e._v(e._s(e.error))])])],1)],1)},ve=[],fe=(s("4d63"),s("ac1f"),s("25f0"),{register:function(e){return f().post("register",e)},login:function(e){return f().post("login",e)},adminLogin:function(e){return f().post("admin-login",e)}}),ge={name:"Register",data:function(){var e=this;return{username:"",nameRules:[function(e){return!!e||"Username is required"},function(e){return new RegExp(/^[a-zA-Z ]{2,30}$/).test(e)||"Name must be alphanumeric characters and of length 2 - 32"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordConfirmation:"",passwordConfirmationRules:[function(e){return!!e||"Password confirmation is required"},function(t){return t==e.password||"Passwords don't match"}],error:null,loading:!1,role:""}},methods:{register:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.error="",e.loading=!0,t.prev=4,t.next=7,fe.register({username:e.username,email:e.email,password:e.password,role:e.role});case 7:s=t.sent,e.loading=!1,e.$store.dispatch("setToken",s.data.token),e.$store.dispatch("setUser",s.data.user),e.$router.push("/"),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),e.error=t.t0.response.data.error,e.loading=!1;case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()}}},Ve=ge,be=s("4bd4"),xe=s("67b6"),we=s("43a6"),_e=s("8654"),Ae=Object(x["a"])(Ve,me,ve,!1,null,"5bcafc70",null),ye=Ae.exports;_()(Ae,{VBtn:k["a"],VCardText:ee["c"],VForm:be["a"],VRadio:xe["a"],VRadioGroup:we["a"],VSpacer:B["a"],VTextField:_e["a"]});var ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("panel",{attrs:{title:"Log In"}},[s("v-card-text",[s("v-form",{ref:"form",staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-account",type:"text",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-spacer"),s("v-btn",{staticClass:"mt-5",attrs:{loading:e.loading,disabled:e.loading,type:"submit"}},[e._v("Log In")]),s("v-spacer")],1)],1),s("v-card-text",[s("div",{staticClass:"error text-center",domProps:{innerHTML:e._s(e.error)}},[e._v(e._s(e.error))])])],1)],1)},Ce=[],Se={name:"LogIn",data:function(){return{email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"}],error:null,loading:!1}},methods:{login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.error="",e.loading=!0,t.prev=4,t.next=7,fe.login({email:e.email,password:e.password});case 7:if(s=t.sent,e.loading=!1,e.$store.dispatch("setToken",s.data.token),e.$store.dispatch("setUser",s.data.user),!s.data.user.isStudent){t.next=18;break}return t.next=14,g.getUnreadComments();case 14:r=t.sent.data.recordings,e.$store.dispatch("setNotifications",r.length),t.next=22;break;case 18:return t.next=20,g.getUncommentedRecordings();case 20:n=t.sent.data.recordings,e.$store.dispatch("setNotifications",n.length);case 22:e.$router.push({name:"home"}),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](4),e.error=t.t0.response.data.error,e.loading=!1;case 29:case"end":return t.stop()}}),t,null,[[4,25]])})))()}}},Te=Se,Ie=Object(x["a"])(Te,ke,Ce,!1,null,"1e610dd2",null),Re=Ie.exports;_()(Ie,{VBtn:k["a"],VCardText:ee["c"],VForm:be["a"],VSpacer:B["a"],VTextField:_e["a"]});var Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.course?r("div",{attrs:{id:"show-course",fluid:""}},[r("v-container",{attrs:{id:"course-info",fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-row",[r("v-col",{staticClass:"text-left"},[r("h1",{staticClass:"font-weight-bold",staticStyle:{"font-size":"40px","line-height":"1.2"}},[e._v(e._s(e.course.name))])])],1),r("v-row",[r("v-col",{staticClass:"pt-0"},[r("h3",[e._v(e._s(e.course.description))])])],1),r("v-row",[r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"30"}},[e._v("mdi-guitar-acoustic")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("Instrument: "+e._s(e.course.instrument))])])],1)],1),r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"24"}},[e._v("mdi-earth")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v(e._s(e.course.language))])])],1)],1),r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"24"}},[e._v("mdi-calendar-clock")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("Last updated: "+e._s(new Date(e.course.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])])],1)],1)],1)],1),null==e.user||e.user.isStudent&&!e.isSubscribed?r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-card",[r("v-img",{staticClass:"white--text align-end",staticStyle:{cursor:"pointer"},attrs:{gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)",height:"200px",src:e.course.coverPhotoUrl},on:{click:e.playVideo}},[r("div",{staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},[r("img",{staticStyle:{position:"absolute",width:"60px",left:"calc(50% - 30px)",top:"calc(50% - 30px)",height:"60px"},attrs:{id:"play-button",src:s("b020"),color:"white",size:"62"}}),r("h3",{staticClass:"text--white",staticStyle:{bottom:"12px","text-align":"center",position:"absolute",left:"0",right:"0","text-shadow":"1px 1px 2px #000000"}},[e._v("Preview this course")])])]),r("v-row",[r("v-col",{staticClass:"text-left"},[r("h1",{staticClass:"pl-5 font-weight-bold",staticStyle:{"font-size":"36px"}},[e._v("S$"+e._s(e.course.price?e.course.price.toFixed(2):"0"))])])],1),r("v-row",[r("v-col",{staticClass:"text-center"},[0==e.course.price?r("v-btn",{staticStyle:{width:"90%","font-weight":"bold"},attrs:{color:"#ec5252",dark:"","x-large":""},on:{click:e.subscribe}},[e._v("Enroll Now")]):r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#ec5252",dark:"","x-large":""},on:{click:e.subscribe}},[e._v("Buy Now")])],1)],1)],1)],1):e._e(),e.isSubscribed||e.isOwned?r("v-col",{staticClass:"my-auto",attrs:{cols:"12",md:"4"}},[r("v-row",[r("v-col",{staticClass:"text-center"},[r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#26A69A",dark:"","x-large":""},on:{click:function(t){return e.goToLesson(t,e.course.lessons[0])}}},[e._v("Continue Learning!")])],1)],1)],1):e._e()],1)],1),e.course.learningPoints?r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5",staticStyle:{border:"1px solid #E0E0E0"},attrs:{color:"#fbfbf8",rounded:""}},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"py-3 pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("What you will learn")])])],1),r("v-row",e._l(e.course.learningPoints.split("&"),(function(t,s){return r("v-col",{key:s,staticClass:"py-0 px-0",attrs:{cols:"12",md:"6"}},[r("v-row",[r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"1"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"16",color:"#ec5252"}},[e._v("mdi-star")])],1),r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"10"}},[r("p",{staticClass:"d-inline mb-0 text-uppercase",staticStyle:{"line-height":"1","vertical-align":"middle"}},[e._v(e._s(t))])])],1)],1)})),1)],1)],1)],1)],1):e._e(),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"py-3",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("About the course")]),r("p",[e._v(e._s(e.course.description))])])],1)],1)],1)],1)],1),e.course.requirements?r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Prerequisites for this Course")])])],1),e._l(e.course.requirements.split("&"),(function(t,s){return r("v-row",{key:s,attrs:{align:"start"}},[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{cols:"1","align-self":"center"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1"}},[e._v(e._s(t))])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}})],1)}))],2)],1)],1)],1):e._e(),e.course.targetAudiences?r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Who's suitable for the course")])])],1),e._l(e.course.targetAudiences.split("&"),(function(t,s){return r("v-row",{key:s,attrs:{align:"start"}},[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"pr-0 py-0",attrs:{cols:"1","align-self":"center"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1"}},[e._v(e._s(t))])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}})],1)}))],2)],1)],1)],1):e._e(),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0 pb-2",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Course Content")]),r("div",{staticStyle:{color:"#9E9E9E","font-size":"16px"}},[e._v(e._s(e.course.lessons.length)+" Lessons")])])],1),r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"px-0",attrs:{cols:"12"}},[r("v-card",[r("v-toolbar",{attrs:{color:"grey lighten-2",light:"",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.course.name))]),r("v-spacer"),r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("mdi-unfold-more-horizontal")])],1)],1),r("v-list",e._l(e.course.lessons,(function(t,s){return r("v-list-item",{key:t.id,attrs:{shaped:"",disabled:0!=s}},[r("v-list-item-icon",[r("v-icon",{attrs:{color:"rgba(0, 0, 0, 0.38)"}},[e._v("mdi-play")])],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1),r("v-spacer")],1)})),1)],1)],1)],1)],1)],1)],1)],1),r("v-row",{attrs:{justify:"center"}},[e.dialog?r("v-dialog",{attrs:{"max-width":"calc(100vw * 0.8)"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("video",{ref:"videoPlayer",attrs:{width:"100%",height:"auto",controls:"",id:"video"}},[r("source",{attrs:{src:e.course.previewVideoUrl,type:"video/mp4"}})])]):e._e()],1)],1):e._e()},Ee=[],Be=(s("d81d"),s("d3b7"),s("3ca3"),s("ddb0"),{create:function(e){return f().post("thread/new",e)},list:function(e){return f().get("thread/list?lid=".concat(e))},show:function(e,t){return f().get("thread/show?lid=".concat(e,"&uid=").concat(t))},delete:function(e){return f().delete("thread/del?tid=".concat(e))},getUnread:function(e,t){return f().get("thread/unread?cid=".concat(e,"&uid=").concat(t))}}),Pe={name:"ShowCourse",data:function(){return{course:null,dialog:!1,error:null,tab:null,isSubscribed:!1,isOwned:!1,player:null}},computed:Object(l["a"])({timeConverted:function(){var e=this.course.duration,t=e/60,s=Math.floor(t),r=60*(t-s),n=Math.round(r);return 0==s?n+" minute(s)":s+" hour(s) and "+n+" minute(s)"}},Object(u["b"])(["user"])),watch:{dialog:function(e){if(0==e)return!1}},methods:{goToLesson:function(e,t){this.$router.push({name:"showlesson",params:{course_id:this.course.id,lesson_id:t.id,course:this.course,lesson:t}})},playVideo:function(){this.dialog=!0},subscribe:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.course.price){t.next=13;break}if(!e.user){t.next=9;break}return t.next=4,Promise.all(e.course.lessons.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be.create({lid:t.id});case 2:return s=e.sent,s.data.thread.posts=[],t.thread=s.data.thread,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return t.next=6,e.$store.dispatch("subscribe",{studentId:e.$store.state.user.id,courseId:e.course.id});case 6:e.$router.push({name:"showlesson",params:{course_id:e.course.id,lesson_id:e.course.lessons[0].id}}),t.next=11;break;case 9:alert("Please register or login first"),e.$router.push("/login");case 11:t.next=14;break;case 13:e.$router.push("/payment/".concat(e.course.id));case 14:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.show(e.$route.params.course_id);case 3:s=t.sent,e.course=s.data.course,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:if(!e.user){t.next=20;break}if(!e.user.isStudent){t.next=17;break}return t.next=14,m.isSubscribed(e.course.id);case 14:e.isSubscribed=t.sent.data.isSubscribed,t.next=20;break;case 17:return t.next=19,m.isOwned(e.course.id);case 19:e.isOwned=t.sent.data.isOwned;case 20:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},Oe=Pe,je=(s("977e"),s("169a")),Fe=s("8dd9"),Le=s("71d9"),Me=Object(x["a"])(Oe,Ne,Ee,!1,null,"43c491ca",null),De=Me.exports;_()(Me,{VBtn:k["a"],VCard:J["a"],VCol:ce["a"],VContainer:le["a"],VDialog:je["a"],VIcon:C["a"],VImg:te["a"],VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemIcon:R["a"],VListItemTitle:N["c"],VRow:de["a"],VSheet:Fe["a"],VSpacer:B["a"],VToolbar:Le["a"],VToolbarTitle:P["b"]});var Ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-5",attrs:{id:"courses"}},[e.courses.length>0?s("panel",{attrs:{title:"All Courses",md:"9"}},[e.is_student?s("v-list",e._l(e.courses,(function(t){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showCourse(s,t.id,t.lessons[0].id)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1)],1)})),1):s("v-list",e._l(e.courses,(function(t){return s("v-list-item",{key:t.id},[s("v-list-item-content",{staticClass:"clickable-content mx-2 px-2",on:{click:function(s){return e.showCourse(s,t.id,t.lessons[0].id)}}},[s("v-list-item-title",[s("h3",{staticClass:"py-0",domProps:{textContent:e._s(t.name)}})])],1),s("v-list-item-icon",[s("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(s){return e.editCourse(s,t)}}},[s("v-icon",[e._v("mdi-pencil")])],1)],1),s("v-list-item-icon",[s("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(s){return e.deleteCourse(s,t)}}},[s("v-icon",[e._v("mdi-trash-can-outline")])],1)],1)],1)})),1)],1):e._e(),e.is_student?e._e():s("v-row",{attrs:{justify:"center"}},[s("v-btn",{staticClass:"mt-5",attrs:{"x-large":"",to:"/course/new"}},[s("v-icon",{attrs:{left:"",dark:""}},[e._v("mdi-plus-thick")]),e._v("New Course")],1)],1)],1)},$e=[],Ke={show:function(e){return f().get("lesson/show?lid=".concat(e))},create:function(e){return f().post("lesson/new",e)},list:function(e){return f().get("lesson/list?cid=".concat(e))},edit:function(e){return f().put("lesson/edit",e)},delete:function(e){return f().delete("lesson/del?lid=".concat(e))}},We={data:function(){return{courses:[]}},computed:Object(l["a"])({is_student:function(){return this.user.isStudent}},Object(u["b"])(["user"])),methods:{showCourse:function(e,t,s){this.$router.push({name:"showlesson",params:{course_id:t,lesson_id:s}})},deleteCourse:function(e,t){var s=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure?")){e.next=5;break}return e.next=3,Promise.all(t.lessons.map((function(e){return Ke.delete(e.id)})));case 3:return e.next=5,q.delete(t.id);case 5:s.$router.go();case 6:case"end":return e.stop()}}),e)})))()},editCourse:function(e,t){this.$router.push("/course/edit/".concat(t.id))}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_student){e.next=6;break}return e.next=3,m.getSubscriptionInfoOfStudent(this.user.id);case 3:this.courses=e.sent.data.courses,e.next=9;break;case 6:return e.next=8,q.list(this.user.id);case 8:this.courses=e.sent.data.courses;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},He=We,qe=(s("21e5"),Object(x["a"])(He,Ue,$e,!1,null,"10ac58bc",null)),Xe=qe.exports;_()(qe,{VBtn:k["a"],VIcon:C["a"],VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemIcon:R["a"],VListItemTitle:N["c"],VRow:de["a"]});var ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"new-course"}},[s("v-stepper",{staticStyle:{"min-height":"calc(100vh - 64px"},model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:e.e1>1,step:"1",color:"indigo"}},[e._v("Step 1")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:e.e1>2,step:"2",color:"indigo"}},[e._v("Step 2")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"3",color:"indigo"}},[e._v("Step 3")])],1),s("v-stepper-items",[s("v-stepper-content",{staticClass:"text-center",attrs:{step:"1"}},[s("v-container",[s("v-form",{ref:"nameForm",on:{submit:function(t){return t.preventDefault(),e.goStepTwo(t)}}},[s("v-row",{staticClass:"mb-8"},[s("v-col",[s("h1",{staticClass:"font-weight-bold"},[e._v("First, give your course a title")])])],1),s("v-row",{staticClass:"mb-16"},[s("v-col",[s("v-text-field",{staticClass:"mx-auto",staticStyle:{width:"60vw"},attrs:{label:"Name",type:"text",rules:e.requiredRules,outlined:"",color:"indigo"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.goStepTwo}},[e._v("Continue")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1)],1),s("v-stepper-content",{staticClass:"text-center",attrs:{step:"2"}},[s("v-container",[s("v-form",{ref:"instrumentForm",on:{submit:function(t){return t.preventDefault(),e.goStepThree(t)}}},[s("v-row",{staticClass:"mb-8"},[s("v-col",[s("h1",{staticClass:"font-weight-bold"},[e._v("What instrument are you teaching?")])])],1),s("v-row",{staticClass:"mb-16"},[s("v-col",[s("v-select",{staticClass:"mx-auto",staticStyle:{width:"60vw"},attrs:{label:"Instrument",items:e.instruments,outlined:"",color:"indigo"},model:{value:e.instrument,callback:function(t){e.instrument=t},expression:"instrument"}})],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.goStepThree}},[e._v("Continue")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1)],1),s("v-stepper-content",{staticClass:"text-center",attrs:{step:"3"}},[s("v-container",[s("v-form",{ref:"languageForm",on:{submite:function(t){return t.preventDefault(),e.submit(t)}}},[s("v-row",{staticClass:"mb-8"},[s("v-col",[s("h1",{staticClass:"font-weight-bold"},[e._v("Choose a cover photo!")])])],1),s("v-row",{staticClass:"mb-16"},[s("v-col",[s("v-file-input",{staticClass:"pr-3",attrs:{label:"Cover photo",outlined:"",color:"indigo",rules:e.requiredRules,accept:"image/*"},model:{value:e.coverPhoto,callback:function(t){e.coverPhoto=t},expression:"coverPhoto"}})],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.submit}},[e._v("Create Course")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1)],1)],1)],1)],1)},Ye=[],Ge={name:"NewCourse",data:function(){return{e1:1,name:"",publishNow:!1,nameRules:[function(e){return!!e||"Title is required"}],languages:["English","Chinese","Malay"],language:"",instrument:"",instruments:["Piano","Guitar","Drum Set","Er Hu","Yang Qin","French Horn","Violin","Body Percussion"],requiredRules:[function(e){return!!e||"This field is required"}],coverPhoto:null}},computed:Object(u["b"])(["user"]),methods:{goStepTwo:function(){this.$refs.nameForm.validate()&&(this.e1=2)},goStepThree:function(){this.$refs.instrumentForm.validate()&&(this.e1=2),this.e1=3},submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,e.error="",t.prev=2,!e.$refs.languageForm.validate()){t.next=17;break}return s=new FormData,s.set("name",e.name),s.set("language",e.language),s.set("instrument",e.instrument),s.set("TutorId",e.user.id),s.set("publishNow",e.publishNow),s.set("price",0),s.append("coverPhoto",e.coverPhoto),t.next=14,q.create(s);case 14:r=t.sent,e.loading=!1,e.$router.push("/course/edit/".concat(r.data.course.id));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](2),console.log(t.t0),e.error=t.t0.response.data.error;case 23:case"end":return t.stop()}}),t,null,[[2,19]])})))()}}},Qe=Ge,Ze=(s("5de2"),s("23a7")),Je=s("b974"),et=s("7e85"),tt=s("e516"),st=s("9c54"),rt=s("56a4"),nt=Object(x["a"])(Qe,ze,Ye,!1,null,"1b8c5d3f",null),it=nt.exports;_()(nt,{VBtn:k["a"],VCol:ce["a"],VContainer:le["a"],VDivider:ue["a"],VFileInput:Ze["a"],VForm:be["a"],VRow:de["a"],VSelect:Je["a"],VStepper:et["a"],VStepperContent:tt["a"],VStepperHeader:st["a"],VStepperItems:st["b"],VStepperStep:rt["a"],VTextField:_e["a"]});var ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1 px-10"},[e._v("Course Info"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:e.editCourse}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-divider"),s("v-card-text",{staticClass:"px-10"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Title: ")]),e._v(e._s(e.course.name))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Price: ")]),e._v("S$ "+e._s(e.course.price))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Tagline: ")]),e._v(e._s(e.course.tagline))])],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Description: ")]),e._v(e._s(e.course.description))])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Level: ")]),e._v(e._s(e.course.level))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Instrument: ")]),e._v(e._s(e.course.instrument))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Language: ")]),e._v(e._s(e.course.language))])],1),s("v-row",[e.course.previewVideoUrl?s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Preview video: ")]),e._v(e._s(e.course.previewVideoUrl.split("/")[6]))]):e._e(),e.course.coverPhotoUrl?s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Cover photo: ")]),e._v(e._s(e.course.coverPhotoUrl.split("/")[6]))]):e._e()],1),e.course.learningPoints?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("What your student will learn:")])]),e._l(e.course.learningPoints.split("&"),(function(t,r){return s("v-col",{key:r,staticClass:"py-0",attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2):e._e(),e.course.targetAudiences?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Who are this course for?")])]),e._l(e.course.targetAudiences.split("&"),(function(t,r){return s("v-col",{key:r,staticClass:"py-0",attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2):e._e(),e.course.requirements?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("What are the requirements?")])]),e._l(e.course.requirements.split("&"),(function(t,r){return s("v-col",{key:r,staticClass:"py-0",attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2):e._e()],1)],1)],1)],1),s("v-row",{staticClass:"justify-center mt-5"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12 pb-5",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1 px-10"},[e._v("Lessons"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:e.newLesson}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-plus")])],1)],1),s("v-divider"),e._l(e.course.lessons,(function(t,r){return s("v-card-text",{key:r,staticClass:"px-10 pb-0"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Name: ")]),e._v(e._s(t.name))]),s("v-col",{attrs:{cols:"12",md:"4"}}),s("v-spacer"),s("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"indigo",right:""},on:{click:function(s){return e.editLesson(s,t)}}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),r!=e.course.lessons.length-1?s("v-divider"):e._e()],1)}))],2)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[e.course.publishNow?s("v-btn",{attrs:{color:"indigo",dark:"",to:"/course/index"}},[e._v("Confirm")]):s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.publishCourse}},[e._v("Publish Now")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1):e._e()},at=[],ct={create:function(e){var t=f();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("exercise/new",e)},list:function(e){return f().get("exercise/list?lid=".concat(e))},edit:function(e){var t=f();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.put("exercise/edit",e)},delete:function(e){return f().delete("exercise/del?eid=".concat(e))}},lt=s("359f"),ut={name:"editCourse",data:function(){return{course:null}},computed:Object(u["b"])(["user"]),methods:{editCourse:function(){this.$router.push("/course/form/".concat(this.course.id))},editLesson:function(e,t){this.$router.push("/lesson/edit-form/".concat(t.id))},newLesson:function(e,t){this.$router.push("/lesson/new-form/".concat(this.course.id))},publishCourse:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,s.set("id",e.course.id),s.set("publishNow",!0),t.next=5,q.edit(s);case 5:e.$router.push("/");case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.show(this.$route.params.course_id);case 3:t=e.sent,this.course=t.data.course,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},dt=ut,ht=(s("cf2c"),Object(x["a"])(dt,ot,at,!1,null,"991d06b8",null)),pt=ht.exports;_()(ht,{VBtn:k["a"],VCard:J["a"],VCardText:ee["c"],VCardTitle:ee["d"],VCol:ce["a"],VContainer:le["a"],VDivider:ue["a"],VIcon:C["a"],VRow:de["a"],VSpacer:B["a"]});var mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"wangrunding@gmail.com"==e.user.email?s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"Users",md:"10"}},[s("v-list",e._l(e.allUsers,(function(t){return s("v-list-item",{key:t.id},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"mr-5",domProps:{textContent:e._s(t.username)}})],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"mr-5",domProps:{textContent:e._s(t.email)}})],1),s("v-list-item-content",[t.isStudent?s("v-list-item-title",{staticClass:"mr-5"},[e._v("Student")]):s("v-list-item-title",{staticClass:"mr-5"},[e._v("Tutor")])],1),s("v-list-item-icon",[s("v-btn",{attrs:{icon:""}},[s("v-icon",{on:{click:function(s){return e.login(s,t)}}},[e._v("mdi-eye")])],1)],1)],1)})),1)],1)],1):e._e()},vt=[],ft={getAllUsers:function(){return f().get("user/list")},getAllStudents:function(){return f().get("student/list")},getAllTutors:function(){return f().get("tutor/list")}},gt={name:"UserIndex",data:function(){return{allUsers:[]}},computed:Object(u["b"])(["user"]),methods:{login:function(e,t){var s=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe.adminLogin({email:t.email});case 3:r=e.sent,s.$store.dispatch("setToken",r.data.token),s.$store.dispatch("setUser",r.data.user),s.$router.push({name:"home"}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),s.error=e.t0.response.data.error,s.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ft.getAllUsers();case 2:this.allUsers=e.sent.data.users;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Vt=gt,bt=Object(x["a"])(Vt,mt,vt,!1,null,"2cbf6e4c",null),xt=bt.exports;_()(bt,{VBtn:k["a"],VIcon:C["a"],VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemIcon:R["a"],VListItemTitle:N["c"]});var wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-container",[s("v-row",[s("v-col",[s("v-form",[s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Choose Explanation Video","prepend-icon":"mdi-video",label:"Explanation Video"},model:{value:e.video,callback:function(t){e.video=t},expression:"video"}})],1),s("v-col",{attrs:{cols:"4"}},[s("div",{attrs:{id:"wrapper"}},[s("v-progress-linear",{attrs:{value:e.progress,height:"10",striped:"",rounded:"",color:e.color}})],1)])],1),s("v-btn",{on:{click:e.submit}},[e._v("Submit")])],1)],1)],1),s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("video",{staticStyle:{width:"100%"},attrs:{src:e.src,controls:""}})])],1),s("v-row",[s("v-col",[s("v-btn",{on:{click:e.startTimer}},[e._v("Start Timer")]),s("v-btn",{on:{click:e.reset}},[e._v("Reset")])],1)],1)],1)],1)},_t=[],At=(s("2b3d"),s("4a9d")),yt=s.n(At),kt={name:"VideoPlayer",data:function(){return{video:null,progress:0,value:"",custom:!0,src:"",error:!1}},computed:{color:function(){return 100==this.progress?"success":this.error?"error":"primary"}},watch:{video:function(e){console.log(e),this.src=URL.createObjectURL(e)}},methods:{startTimer:function(){var e=this;setInterval((function(){e.progress<100&&(e.progress+=10)}),1e3)},reset:function(){this.progress=0},submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return yt.a.config.update({accessKeyId:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AWS_ACCESS_KEY,secretAccessKey:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AWS_SECRET_ACCESS_KEY}),yt.a.config.region="ap-southeast-1",t.prev=2,s=new yt.a.S3.ManagedUpload({partSize:10485760,params:{Bucket:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BUCKET_NAME,Key:"testingmultipart/".concat(e.video.name),Body:e.video}}),s.on("httpUploadProgress",(function(t){e.progress=parseInt(100*t.loaded/t.total)})),t.next=7,s.promise();case 7:console.log(s),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0),e.error=!0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()}},mounted:function(){console.log(Object({NODE_ENV:"production",BASE_URL:"/"}))}},Ct=kt,St=(s("0313"),s("8e36")),Tt=Object(x["a"])(Ct,wt,_t,!1,null,"4baf1c5f",null),It=Tt.exports;_()(Tt,{VBtn:k["a"],VCol:ce["a"],VContainer:le["a"],VFileInput:Ze["a"],VForm:be["a"],VProgressLinear:St["a"],VRow:de["a"]});var Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-5",attrs:{id:"student"}},[e.user.isTutor?s("panel",{attrs:{title:"My Courses"}},[s("v-list",e._l(e.userOwnedCourses,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.goToThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(t.unreadStudentPost))])])])],1)})),1)],1):s("panel",{attrs:{title:"Subscribed Courses"}},[s("v-list",e._l(e.userSubscribedCourses,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(t.unreadTutorPost))])])])],1)})),1)],1)],1)},Nt=[],Et={name:"CoursesThreadsIndex",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",threads:[],userOwnedCourses:[],userSubscribedCourses:[]}},computed:Object(u["b"])(["user"]),methods:{goToThread:function(e,t){this.$router.push("/course/threads/index/".concat(t.id))},showThread:function(e,t){this.$router.push({name:"showthread",params:{course_id:t.id,student_id:this.user.id}})}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.user.isStudent){e.next=7;break}return e.next=3,m.getSubscriptionInfoOfStudent(this.user.id);case 3:t=e.sent,this.userSubscribedCourses=t.data.courses,e.next=11;break;case 7:return e.next=9,q.list(this.user.id);case 9:s=e.sent,this.userOwnedCourses=s.data.courses;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Bt=Et,Pt=(s("46a2"),Object(x["a"])(Bt,Rt,Nt,!1,null,"2deef921",null)),Ot=Pt.exports;_()(Pt,{VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemIcon:R["a"],VListItemTitle:N["c"]});var jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"All Students",md:"8"}},[s("v-list",e._l(e.students,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(t.username)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(e.unreads[r]))])])])],1)})),1)],1)],1)},Ft=[],Lt={name:"CourseThreadsIndex",data:function(){return{students:[],unreads:[]}},computed:Object(l["a"])({},Object(u["b"])(["user"])),methods:{showThread:function(e,t){this.$router.push({name:"showthread",params:{course_id:this.$route.params.course_id,student_id:t.id}})}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getSubscriptionInfoOfCourse(this.$route.params.course_id);case 2:t=e.sent,this.students=t.data.students,s=0;case 5:if(!(s<this.students.length)){e.next=13;break}return e.next=8,Be.getUnread(this.$route.params.course_id,this.students[s].id);case 8:r=e.sent,this.unreads.push(r.data.unread);case 10:s++,e.next=5;break;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Mt=Lt,Dt=(s("ad98"),Object(x["a"])(Mt,jt,Ft,!1,null,"025b907a",null)),Ut=Dt.exports;_()(Dt,{VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemIcon:R["a"],VListItemTitle:N["c"]});var $t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("div",{attrs:{id:"student"}},[s("v-container",[s("h1",[e._v(e._s(e.course.name))]),s("v-row",[s("v-col",[s("v-expansion-panels",{staticClass:"elevation-2",attrs:{hover:"",multiple:""},model:{value:e.currentThread,callback:function(t){e.currentThread=t},expression:"currentThread"}},e._l(e.threads,(function(t,r){return s("v-expansion-panel",{key:t.id},[s("v-expansion-panel-header",{staticClass:"font-weight-bold",staticStyle:{"font-size":"18px"}},[e._v(e._s(e.course.lessons[r].name))]),s("v-expansion-panel-content",{staticClass:"px-6"},[t.posts?s("v-list",e._l(t.posts,(function(n,i){return s("v-list-item",{key:n.id},[s("v-list-item-content",{staticClass:"pb-0"},[s("v-container",{staticClass:"pt-0 pb-4 px-0",attrs:{fluid:""}},[0==i||n.updatedAt.substring(0,10)!=t.posts[i-1].updatedAt.substring(0,10)?s("v-row",{staticClass:"py-0"},[s("v-col",{staticClass:"py-0"},[s("v-chip",{staticStyle:{"font-size":"12px"},attrs:{label:"",color:"indigo darken-3",dark:""}},[e._v(e._s(new Date(n.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])],1)],1):e._e(),n.videoUrl?s("v-row",{staticClass:"mt-5"},[s("v-col",{staticClass:"py-0 text-center",staticStyle:{"margin-bottom":"-3px","background-color":"black"}},[s("video",{staticStyle:{"max-width":"100%","max-height":"400px"},attrs:{controls:""}},[s("source",{attrs:{src:n.videoUrl,type:"video/mp4"}}),e._v("Your browser does not support HTML video.")])])],1):s("v-row",[s("v-col",{staticClass:"pb-0",staticStyle:{"border-bottom":"1px solid #BDBDBD"}})],1),n.UserId!=e.user.id?s("v-row",{staticClass:"justify-end bottom-border mx-0 py-3"},[n.UserId==e.user.id?s("v-col",{staticClass:"py-0 text-left",attrs:{cols:"5"}},[s("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:function(s){return e.deletePost(s,t,r,n)}}},[s("v-icon",[e._v("mdi-trash-can-outline")])],1)],1):e._e(),s("v-col",{staticClass:"pr-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-other"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(n.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(n.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)]),s("v-col",{staticClass:"text-center pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"grey",size:"40"}},[s("v-icon",[e._v("mdi-account")])],1)],1)],1):s("v-row",{staticClass:"justify-start bottom-border mx-0 py-3"},[s("v-col",{staticClass:"text-center pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"grey",size:"40"}},[s("v-icon",[e._v("mdi-account")])],1)],1),s("v-col",{staticClass:"pl-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-self"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(n.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(n.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)]),n.UserId==e.user.id?s("v-col",{staticClass:"py-0 text-right",attrs:{cols:"5"}},[s("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:function(s){return e.deletePost(s,t,r,n)}}},[s("v-icon",[e._v("mdi-trash-can-outline")])],1)],1):e._e()],1)],1)],1)],1)})),1):e._e(),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"10"}},[s("v-form",{ref:"form-"+t.id,refInFor:!0},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Draft a reply"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Upload","prepend-icon":"mdi-video",label:"Reply Video"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),s("v-col",{attrs:{cols:"6"}})],1)],1)],1)],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{large:"",color:"#ec5252",dark:""},on:{click:function(s){return e.create_post(s,t,r)}}},[e._v("Reply your student")])],1)],1)],1)],1)})),1)],1)],1)],1)],1):e._e()},Kt=[],Wt=(s("c975"),s("a434"),{create:function(e){var t=f();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("post/new",e)},list:function(e){return f().get("post/list?tid=".concat(e))},edit:function(e){var t=f();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("post/edit",e)},delete:function(e){return f().delete("post/del?pid=".concat(e))}}),Ht={name:"ShowCourseThread",props:["lesson_pos"],data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",threads:[],course:null,message:"",file:null,grade:0,requiredRules:[function(e){return!!e||"This field is required"}],currentThread:[]}},computed:Object(l["a"])({},Object(u["b"])(["user"])),methods:{adjustAspectRatioForFullScreen:function(e,t){var s=this.originalHeight/this.originalWidth,r=e*s;r>t?(this.videoHeight=t,this.videoWidth=t/s):r==t?(this.videoHeight=t,this.videoWidth=e):(this.videoHeight=r,this.videoWidth=e)},create_post:function(e,t,s){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.$refs["form-".concat(t.id)][0].validate()){e.next=14;break}return n=new FormData,n.set("tid",t.id),n.set("message",r.message),n.set("grade",r.grade),n.append("video",r.file),e.next=8,Wt.create(n);case 8:i=e.sent,r.threads[s].posts.splice(r.threads[s].posts.length,0,i.data.post),r.file=null,r.message=null,e.next=15;break;case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))()},deletePost:function(e,t,s,r){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete?")){e.next=4;break}return e.next=3,Wt.delete(r.id);case 3:n.threads[s].posts.splice(n.threads[s].posts.indexOf(r),1);case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.show(this.$route.params.course_id);case 2:t=e.sent,this.course=t.data.course,s=0;case 5:if(!(s<this.course.lessons.length)){e.next=13;break}return e.next=8,Be.show(this.course.lessons[s].id,this.$route.params.student_id);case 8:r=e.sent,this.threads.push(r.data.thread);case 10:s++,e.next=5;break;case 13:this.user.isStudent?this.$store.dispatch("setNotifications",this.$store.state.notifications-this.course.unreadTutorPost):this.$store.dispatch("setNotifications",this.$store.state.notifications-this.course.unreadStudentPost);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},qt=Ht,Xt=(s("6b7d"),s("8212")),zt=s("cc20"),Yt=s("cd55"),Gt=s("49e2"),Qt=s("c865"),Zt=s("0393"),Jt=s("a844"),es=Object(x["a"])(qt,$t,Kt,!1,null,"1511ee0e",null),ts=es.exports;_()(es,{VAvatar:Xt["a"],VBtn:k["a"],VChip:zt["a"],VCol:ce["a"],VContainer:le["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Gt["a"],VExpansionPanelHeader:Qt["a"],VExpansionPanels:Zt["a"],VFileInput:Ze["a"],VForm:be["a"],VIcon:C["a"],VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VRow:de["a"],VTextarea:Jt["a"]});var ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("div",[s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"px-4"},[s("h2",{staticClass:"font-weight-bold"},[e._v("Checkout")])])],1),s("v-radio-group",{attrs:{mandatory:!0},model:{value:e.paymentMethod,callback:function(t){e.paymentMethod=t},expression:"paymentMethod"}},[s("v-radio",{attrs:{label:"Paypal",value:"paypal"}}),s("v-radio",{attrs:{label:"Credit Card",value:"credit card"}})],1),s("v-row",{staticClass:"justify-center",class:{hide:"paypal"==e.paymentMethod}},[s("v-col",{staticClass:"px-4"},[s("div",{attrs:{id:"dropin-container"}})])],1),s("v-row",[s("v-col",[s("v-card",{staticClass:"pa-3 px-10",attrs:{outlined:""}},[s("v-row",{staticClass:"px-3"},[s("v-col",[s("h2",{staticClass:"font-weight-bold"},[e._v("Summary")])])],1),s("v-row",{staticClass:"px-3"},[s("v-col",{staticClass:"px-4",attrs:{cols:"12"}},[s("p",{staticClass:"alignleft"},[e._v(e._s(e.course.name)+":")]),s("p",{staticClass:"alignright"},[e._v("S$ "+e._s(e.course.price))])]),s("v-col",{staticClass:"px-4",attrs:{cols:"12"}},[s("p",{staticClass:"alignleft"},[e._v("GST:")]),s("p",{staticClass:"alignright"},[e._v("S$ "+e._s((.07*e.course.price).toFixed(2)))]),s("div",{staticStyle:{clear:"both"}})])],1),s("v-divider",{staticClass:"px-3"}),s("v-row",{staticClass:"px-3"},[s("v-col",[s("p",{staticClass:"alignleft font-weight-bold"},[e._v("Total:")]),s("p",{staticClass:"alignright font-weight-bold"},[e._v("S$ "+e._s((e.course.price+.07*e.course.price).toFixed(2)))]),s("div",{staticStyle:{clear:"both"}})])],1),s("v-btn",{staticClass:"mb-5",class:{hide:"paypal"==e.paymentMethod},staticStyle:{width:"50%"},attrs:{large:"",color:"#ec5252",dark:""},on:{click:e.requestPaymentMethod}},[e._v("Complete Payment")]),s("v-row",{staticClass:"justify-center",class:{hide:"paypal"!=e.paymentMethod}},[s("v-col",[s("div",{attrs:{id:"paypal-button-container"}})])],1),s("div",{staticClass:"error",model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.error))])],1)],1)],1)],1)],1)],1)],1):e._e()},rs=[],ns=(s("b680"),{getClientToken:function(){return f().get("braintree-client-token")},createTransaction:function(e){return f().post("braintree-checkout",e)},createPaypalTransaction:function(e){return f().post("braintree-paypal-checkout",e)},getPaypalClientToken:function(){return f().get("paypal-client-token")},createOrder:function(e){return f().post("paypal-create-order",e)},captureOrder:function(e){return f().post("paypal-capture-order",e)}}),is={name:"Payment",data:function(){return{course:null,clientToken:"",dropinInstance:null,nonceObj:null,deviceData:null,transaction:null,error:null,paymentMethod:"paypal"}},methods:{togglePaymentMethod:function(){"paypal"==this.paymentMethod?this.paymentMethod="credit card":this.paymentMethod="paypal"},requestPaymentMethod:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dropinInstance.requestPaymentMethod();case 2:return e.nonceObj=t.sent,t.next=5,ns.createTransaction({amount:e.course.price,nonce:e.nonceObj.nonce,deviceData:e.deviceData});case 5:e.transaction=t.sent.data.result,e.transaction.success?e.subscribe():e.error=e.transaction.message;case 7:case"end":return t.stop()}}),t)})))()},subscribe:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.course.lessons.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be.create({lid:t.id});case 2:return s=e.sent,s.data.thread.posts=[],t.thread=s.data.thread,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return t.next=4,e.$store.dispatch("subscribe",{studentId:e.$store.state.user.id,courseId:e.course.id});case 4:e.$router.push("/course/show/".concat(e.course.id));case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,i,o,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.show(this.$route.params.course_id);case 2:return t=e.sent,this.course=t.data.course,e.next=6,ns.getClientToken();case 6:return s=e.sent.data.clientToken,this.clientToken=s,e.next=10,window.braintree.dropin.create({authorization:s,container:"#dropin-container"});case 10:return r=e.sent,this.dropinInstance=r,e.next=14,window.braintree.client.create({authorization:s});case 14:return n=e.sent,e.next=17,window.braintree.dataCollector.create({client:n,paypal:!0});case 17:i=e.sent,this.deviceData=i.deviceData,o=document.createElement("script"),o.src="https://www.paypal.com/sdk/js?client-id=AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7&currency=SGD",o.addEventListener("load",(function(){window.paypal.Buttons({locale:"en_US",createOrder:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ns.createOrder({amount:(a.course.price+.07*a.course.price).toFixed(2)});case 2:return t=e.sent.data.order.id,a.orderId=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onApprove:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ns.captureOrder({orderId:a.orderId});case 2:t=e.sent.data.result,a.result=t,"COMPLETED"==a.result.status&&(alert("Success!"),a.subscribe());case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onError:function(e){console.log(e)}}).render("#paypal-button-container");var e=document.createElement("script");e.src="https://www.paypalobjects.com/js/external/connect/api.js",e.addEventListener("load",(function(){window.paypal.use(["login"],(function(e){e.render({appid:"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7",authend:"sandbox",scopes:"openid",containerid:"connect-button",responseType:"code",locale:"en-us",buttonShape:"rectangle",buttonSize:"lg",returnurl:"https://example.com"})}))})),document.body.appendChild(e)})),document.body.appendChild(o);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},os=is,as=(s("0a62"),Object(x["a"])(os,ss,rs,!1,null,"36c8210a",null)),cs=as.exports;_()(as,{VBtn:k["a"],VCard:J["a"],VCol:ce["a"],VContainer:le["a"],VDivider:ue["a"],VRadio:xe["a"],VRadioGroup:we["a"],VRow:de["a"]});var ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"score"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scoreLoading,expression:"!scoreLoading"}],ref:"scorediv",staticClass:"ma-0",staticStyle:{height:"220px",width:"1000px"},attrs:{id:"score"}}),s("v-btn",{on:{click:e.changeBars}},[e._v("Change Bars")])],1)},us=[],ds=s("2938"),hs={name:"OSMD",data:function(){return{scoreLoading:!1,osmd:null,from:1,to:2}},methods:{changeBars:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.from+=2,e.to+=2,e.osmd.setOptions({drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to}),console.log(e.osmd.graphic),t.next=6,e.osmd.render();case 6:console.log(e.osmd.graphic);case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ds["OpenSheetMusicDisplay"].prototype.preCalculate=function(){if(!this.graphic)throw new Error("OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file");this.drawer&&this.drawer.clear();var e=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(e=32767),console.log("[OSMD] render width: "+e),this.sheet.pageWidth=e/this.zoom/10,this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?(this.rules.PageHeight=this.sheet.pageWidth/this.rules.PageFormat.aspectRatio,console.log("[OSMD] PageHeight: "+this.rules.PageHeight)):(console.log("[OSMD] endless/undefined pageformat, id: "+this.rules.PageFormat.idString),this.rules.PageHeight=100001),this.graphic.reCalculate(),this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.createOrRefreshRenderBackend(),this.needBackendUpdate=!1,this.drawer.setZoom(this.zoom),this.drawer.drawSheet(this.graphic),this.enableOrDisableCursor(this.drawingParameters.drawCursors),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.update(),this.zoomUpdated=!1},this.osmd=new ds["OpenSheetMusicDisplay"](this.$refs.scorediv,{drawFromMeasureNumber:1,drawUpToMeasureNumber:2,fillEmptyMeasuresWithWholeRest:!0,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,drawingParameters:"compacttight"}),this.scoreLoading=!0,t="https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/twinkle-twinkle-little-star.musicxml",e.next=6,this.osmd.load(t);case 6:return this.scoreLoading=!1,e.next=9,this.$nextTick();case 9:return console.log(this.osmd.graphic),e.next=12,this.osmd.render();case 12:console.log(this.osmd.graphic);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},ps=hs,ms=Object(x["a"])(ps,ls,us,!1,null,null,null),vs=ms.exports;_()(ms,{VBtn:k["a"]});var fs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.course&&e.lesson?r("div",[r("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"pa-0",attrs:{cols:"9"}},[r("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[r("v-col",{staticClass:"pa-0",attrs:{id:"title"}},[r("h1",{staticClass:"font-weight-bold pl-8 py-2"},[e._v(e._s(e.course.name))])])],1),r("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[r("v-col",{staticClass:"pa-0"},[e.isVideoContent?r("video-player",{attrs:{exercise:this.lesson.exercises[0],videoSrc:e.videoSrc}}):e._e()],1)],1),e.is_student?r("v-container",[r("v-row",{staticClass:"mx-6"},[r("v-col",[r("h1",{staticClass:"font-weight-bold py-2"},[e._v("Learn more by interacting with the tutor!")])])],1),r("v-row",{staticClass:"mx-6",attrs:{justify:"space-around"}},[r("v-col",{staticClass:"px-4",attrs:{cols:"6",lg:"5"}},[r("v-card",{attrs:{elevation:"3",shaped:""}},[r("v-img",{staticClass:"white--text align-end",attrs:{height:"200",src:s("ec17"),gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[r("v-card-title",{staticStyle:{"text-shadow":"1px 1px 2px #000000"}},[e._v("Record your practice")])],1),r("div",{staticClass:"px-4 pt-4 pb-0 text-left text-primary"},[e._v("Record your practice audio either on our platform or upload the audio file of your recording. The tutor will give feedback as soon as possible!")]),r("v-card-actions",[r("v-btn",{staticClass:"mx-auto px-6 action-button",attrs:{large:"",color:"indigo",dark:""},on:{click:function(t){e.modal=!0}}},[e._v("Upload"),r("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-cloud-upload")])],1),r("v-btn",{staticClass:"mx-auto px-6 action-button",attrs:{large:"",color:"indigo",dark:"",to:"/recording/new/"+e.course.id+"/lesson/"+e.lesson.id}},[e._v("Record"),r("v-icon",{attrs:{right:"",dark:"",size:"20"}},[e._v("mdi-record-circle-outline")])],1)],1)],1)],1),r("v-col",{staticClass:"px-4",attrs:{cols:"6",lg:"5"}},[r("v-card",{staticStyle:{height:"100%",position:"relative"},attrs:{elevation:"3",shaped:""}},[r("v-img",{staticClass:"white--text align-end",attrs:{height:"200",src:s("9310"),gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[r("v-card-title",{staticStyle:{"text-shadow":"1px 1px 2px #000000"}},[e._v("View the feedback")])],1),r("div",{staticClass:"px-4 pt-4 pb-0 text-left text-primary"},[e._v("See the feedback given in line graphs. You can also play the parts highlighted to compare the difference between yours and the answer!")]),r("v-card-actions",{staticStyle:{position:"absolute",width:"100%",bottom:"0",left:"0"}},[r("v-btn",{staticClass:"mx-auto px-6 action-button",attrs:{large:"",color:"indigo",dark:"",to:"/feedback/show/"+e.course.id+"/lesson/"+e.lesson.id}},[e._v("View"),r("v-icon",{attrs:{right:"",dark:"",size:"20"}},[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1)],1):e._e()],1),r("v-col",{staticClass:"pa-0",class:{"full-height":e.fullHeight,"partial-height":!e.fullHeight},staticStyle:{"border-bottom":"1px solid #BDBDBD","border-left":"1px solid #BDBDBD",position:"fixed",right:"0"},attrs:{cols:"3"}},[r("h1",{staticClass:"font-weight-bold pl-4 py-2",staticStyle:{"background-color":"#EEEEEE"}},[e._v("Lessons")]),r("v-list",{staticClass:"py-0"},e._l(e.course.lessons,(function(t,s){return r("v-list-item",{key:s,staticClass:"px-0"},[t==e.lesson&&e.lesson.exercises.length>1?r("v-expansion-panels",{staticClass:"px-0",attrs:{accordion:"",flat:"",hover:"",tile:"",dense:"",multiple:""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[r("v-expansion-panel",[r("v-expansion-panel-header",{staticClass:"py-0 pl-4 pr-2",staticStyle:{"font-size":"16px","background-color":"#C5CAE9"}},[e._v(e._s(s+1)+". "+e._s(t.name))]),r("v-expansion-panel-content",{staticClass:"pa-0"},[r("v-list",{staticClass:"py-0"},[r("v-list-item-group",{staticClass:"py-0"},e._l(t.exercises,(function(t,s){return r("v-list-item",{key:s,staticClass:"px-0",on:{click:function(s){e.videoSrc=t.videoUrl}}},[r("v-list-item-content",[r("div",{staticClass:"pl-4 text-decoration-underline",staticStyle:{"font-size":"14px",color:"#291957"}},[e._v(e._s(t.name))])])],1)})),1)],1)],1)],1)],1):t==e.lesson&&1==e.lesson.exercises.length?r("v-list-item-content",{staticClass:"py-0 link"},[r("a",{staticClass:"link pl-4 py-5",staticStyle:{"font-size":"16px","background-color":"#C5CAE9"}},[e._v(e._s(s+1)+". "+e._s(t.name))])]):t!=e.lesson?r("v-list-item-content",{staticClass:"py-0 link"},[r("a",{staticClass:"link pl-4 py-5",staticStyle:{"font-size":"16px"},on:{click:function(s){return e.goToLesson(s,t)}}},[e._v(e._s(s+1)+". "+e._s(t.name))])]):e._e()],1)})),1)],1)],1),r("v-row",{attrs:{justify:"center"}},[r("v-dialog",{attrs:{"max-width":"320"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("v-card",[r("v-container",{staticClass:"text-center"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("h2",[e._v("Audio upload")])])],1),r("v-row",{attrs:{justify:"center"}},[r("v-form",{ref:"audioForm",staticClass:"pa-0",staticStyle:{width:"100%"}},[r("v-col",{attrs:{cols:"12"}},[r("v-file-input",{staticClass:"pr-3",attrs:{label:"Upload audio...",outlined:"",color:"indigo",dense:"",accept:"audio/*",rules:e.requiredRules},model:{value:e.newAudio,callback:function(t){e.newAudio=t},expression:"newAudio"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{staticClass:"px-3",attrs:{dense:"",label:"BPM at which you recorded",name:"bpm",outlined:"",color:"indigo",rules:e.requiredRules},model:{value:e.bpm,callback:function(t){e.bpm=t},expression:"bpm"}}),r("v-btn",{staticStyle:{"margin-top":"2px"},attrs:{color:"#ec5252",dark:"",loading:e.loading},on:{click:e.submitAudio}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)],1):e._e()},gs=[],Vs=(s("7db0"),s("1276"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:e.plotContainerId,staticStyle:{position:"relative"},attrs:{id:e.plotDivId}}),e.selectedNote&&e.showTooltip?s("div",{staticClass:"tooltip",style:{top:e.tooltipTop+"px",left:e.tooltipLeft+"px"}},[s("v-alert",{attrs:{dense:"",border:"left",color:e.selectedNote.comment?e.commentedNoteColor:"#9ab3f5","colored-border":"",elevation:"2"}},[s("div",[e._v("Note: "+e._s(e.selectedNote.note))]),e.selectedNote.comment?s("div",[e._v("Comment: "+e._s(e.selectedNote.comment))]):e._e()])],1):e._e()])}),bs=[],xs=(s("cb29"),s("2909")),ws=s("f794"),_s=s.n(ws),As={name:"EvaluationLineGraph",props:["transcribedNotes","rowNum","bpm","onClickNote","onSelectNoteForGreentick","isScrolling","clickedNoteOnset","shouldIndicateNoteClicked"],watch:{transcribedNotes:function(e){this.secondsPerRow=this.getSecondsPerRow(),this.graph=this.getGraphForNotes(e)},isScrolling:function(e){e&&(this.showTooltip=!1)},clickedNoteOnset:function(e){this.shouldIndicateNoteClicked&&null!=this.clickedNote&&e!==this.clickedNote.onset&&(this.clickedNote=null)},clickedNote:function(e){var t=this.graph.layout.shapes.length;if(null!==e||"line"===this.graph.layout.shapes[t-1].type){if(null!==e){var s=this.getShapeToIndicateNoteAsClicked(e)[0];"line"===this.graph.layout.shapes[t-1].type?this.graph.layout.shapes.push(s):this.$set(this.graph.layout.shapes,t-1,s)}}else this.graph.layout.shapes.splice(-1,1)}},computed:{plotDiv:function(){return this.$refs[this.plotContainerId]}},mounted:function(){this.secondsPerRow=this.getSecondsPerRow(),this.graph=this.getGraphForNotes(this.transcribedNotes),_s.a.newPlot(this.plotDivId,this.graph.data,this.graph.layout,this.graph.config),this.plotDiv.on("plotly_hover",this.onHover),this.plotDiv.on("plotly_unhover",this.onUnhover),this.plotDiv.on("plotly_click",this.onClick)},created:function(){this.$watch("graph",this.update,{deep:!0})},beforeDestroy:function(){this.plotDiv["off"]&&(this.plotDiv.off("plotly_hover",this.onHover),this.plotDiv.off("plotly_unhover",this.onUnhover),this.plotDiv.off("plotly_click",this.onClick))},methods:{update:function(){_s.a.react(this.plotDivId,this.graph.data,this.graph.layout,this.graph.config)},onClick:function(e){var t=e.points[0].pointIndex;if(this.shouldIndicateNoteClicked){this.clickedNote=this.transcribedNotes[t];var s=e.points[0].xaxis,r=s.l2p(this.transcribedNotes[t].onset)+s._offset;this.onClickNote(this.rowNum,t,r)}var n=e.points[0].xaxis,i=n.l2p(this.transcribedNotes[t].onset)+n._offset;this.onSelectNoteForGreentick(this.rowNum,i)},onHover:function(e){var t=e.points[0].pointIndex,s=Object(l["a"])({},this.graph.data[0]),r=Object(l["a"])({},this.graph.data[0].marker),n=Object(xs["a"])(this.graph.data[0].marker.color);n[t]=this.highlightedNoteColor,r.color=n,s.marker=r,this.$set(this.graph.data,0,s);var i=this.$refs[this.plotContainerId].getBoundingClientRect(),o=e.points[0].xaxis,a=e.points[0].yaxis,c=o.l2p(e.points[0].x)+o._offset,u=i.height-a._offset+1;this.selectedNote=this.transcribedNotes[t],this.tooltipLeft=c,this.tooltipTop=u,this.showTooltip=!0},onUnhover:function(e){var t=e.points[0].pointIndex,s=this.transcribedNotes[t].comment,r=Object(l["a"])({},this.graph.data[0]),n=Object(l["a"])({},this.graph.data[0].marker),i=Object(xs["a"])(this.graph.data[0].marker.color);i[t]=s?this.commentedNoteColor:this.noteColor,n.color=i,r.marker=n,this.$set(this.graph.data,0,r),this.showTooltip=!1},getSecondsPerRow:function(){return 60/this.bpm*this.timeSignature*this.barsPerRow},getNumberFromMusicNote:function(e){var t=e[1]-"0",s=e[0].charCodeAt(0)-"C".charCodeAt(0);return s<0&&(s+=8),8*t+s},getLineSegmentYValForMusicNote:function(e){var t=this.getNumberFromMusicNote(this.minNoteNumber),s=this.getNumberFromMusicNote(this.maxNoteNumber),r=this.getNumberFromMusicNote(e.note);return(r-t)/(s-t)*(this.maxNoteNumber[1]-this.minNoteNumber[1])},getTickTextsForRow:function(e){for(var t=this,s=[],r=0;r<=this.barsPerRow*this.timeSignature;r++)s.push(r);return s.map((function(s){return(s+e*t.barsPerRow*t.timeSignature).toString()}))},getTickValsForRow:function(e){for(var t=this,s=[],r=0;r<=this.barsPerRow*this.timeSignature;r++)s.push(r);return s.map((function(s){return 60*s/t.bpm+e*t.secondsPerRow}))},getAnnotationXValsForNotes:function(e){return e.map((function(e){return e.onset+e.duration/2}))},getAnnotationYValsForNotes:function(e){var t=this;return e.map((function(e){var s=t.getLineSegmentYValForMusicNote(e)+.3;return s<=t.maxNoteNumber[1]-t.minNoteNumber[1]?s:s-.7}))},getAnnotationsForNotes:function(e){for(var t=[],s=0;s<e.length;s++){var r=e[s].comment,n=e[s].note,i=r?n+" "+r:n;t.push(i)}return t},getBarDividers:function(e){for(var t=0,s=this.maxNoteNumber[1]-this.minNoteNumber[1],r=[],n=1;n<=this.barsPerRow;n++){var i=n*this.timeSignature*60/this.bpm+e*this.secondsPerRow,o={type:"line",x0:i,y0:t,x1:i,y1:s,line:{color:this.barDividerColor,width:1}};r.push(o)}return r},getBarXValsForNotes:function(e){return e.map((function(e){return e.onset+e.duration/2}))},getBarYValsForNotes:function(e){return Array(e.length).fill(.16)},getBarBaseValsForNotes:function(e){var t=this;return e.map((function(e){return t.getLineSegmentYValForMusicNote(e)-.08}))},getBarWidthValsForNotes:function(e){return e.map((function(e){return e.duration-.02}))},getBarColorsForNotes:function(e){var t=this;return e.map((function(e){return e.comment?t.commentedNoteColor:t.noteColor}))},getShapeToIndicateNoteAsClicked:function(e){if(!e)return[];var t={type:"rect",xref:"x",yref:"paper",x0:e.onset,y0:0,x1:e.onset+e.duration,y1:1,fillcolor:this.noteClickedIndicationColor,opacity:.2,line:{width:0}};return[t]},getGraphForNotes:function(e){var t=e,s={data:[{type:"bar",x:this.getBarXValsForNotes(t),y:this.getBarYValsForNotes(t),width:this.getBarWidthValsForNotes(t),base:this.getBarBaseValsForNotes(t),text:this.getAnnotationsForNotes(t),hoverinfo:"none",marker:{color:this.getBarColorsForNotes(t)},name:"notes"}],layout:{hovermode:"x",hoverlabel:{bgcolor:"#FFF"},xaxis:{zeroline:!1,range:[(this.rowNum-1)*this.secondsPerRow,this.rowNum*this.secondsPerRow+.1],fixedrange:!0,tickvals:this.getTickValsForRow(this.rowNum-1),ticktext:this.getTickTextsForRow(this.rowNum-1),tickfont:{family:"Roboto",size:10,color:"Black"}},yaxis:{range:[0,3.3],fixedrange:!0,tickvals:[0,1,2,3],ticktext:["C3","C4","C5","C6"],tickfont:{family:"Roboto",size:10,color:"Black"}},height:150,margin:{l:30,r:20,b:20,t:20,pad:8},shapes:this.getBarDividers(this.rowNum-1).concat(this.getShapeToIndicateNoteAsClicked(this.clickedNote))},config:{displayModeBar:!1,showAxisDragHandles:!1,scrollZoom:!1,showAxisRangeEntryBoxes:!1}};return s}},data:function(){return{selectedNote:null,clickedNote:null,plotContainerId:"lineGraphContainer".concat(this.rowNum-1),plotDivId:"lineGraph".concat(this.rowNum-1),showTooltip:!1,tooltipLeft:0,tooltipTop:0,minNoteNumber:"C3",maxNoteNumber:"C6",timeSignature:4,barsPerRow:4,secondsPerRow:0,graph:null,noteColor:"#9ba4b4",highlightedNoteColor:"#e0e5e5",commentedNoteColor:"#ffa62b",noteClickedIndicationColor:"Grey",barDividerColor:"Black"}}},ys=As,ks=(s("187d"),s("0798")),Cs=Object(x["a"])(ys,Vs,bs,!1,null,"078e5088",null),Ss=Cs.exports;_()(Cs,{VAlert:ks["a"]});s("466d");var Ts={getStyle:function(e,t){var s=null,r=document.getElementById(e);return r.currentStyle?s=r.currentStyle[t]:window.getComputedStyle&&(s=document.defaultView.getComputedStyle(r,null).getPropertyValue(t)),s},getMousePositionInCanvas:function(e,t){var s=this.getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=this.getStyle(e.id,"padding-left"),i=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,o=e.getBoundingClientRect();return{x:t.clientX-o.left-r-i,y:t.clientY-o.top-r-i}}},Is=(s("a15b"),s("6922"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"font-size":"14px !important"}},[s("video",{ref:"videoPlayer",staticClass:"vjs-big-play-centered video-js",attrs:{id:"video"}}),s("v-row",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!hide"}],staticClass:"bpm-control pt-2",attrs:{id:"slider"}},[s("v-icon",{attrs:{color:"white",large:""}},[e._v("$vuetify.icons.custom_bpm")]),s("v-slider",{staticClass:"pb-2",attrs:{min:"20",max:"180",vertical:"",color:"white","track-color":"rgba(115, 133, 159, 0.5)","thumb-label":"always"},model:{value:e.playbackBpm,callback:function(t){e.playbackBpm=t},expression:"playbackBpm"}})],1)],1)}),Rs=[],Ns={name:"VideoPlayer",props:["exercise","videoSrc"],data:function(){return{numberOfBars:null,bpm:null,timeSignature:null,keySignature:"C",description:"",melody:[],useScore:!1,useXml:!1,notesInBars:null,playbackBpm:0,videoHandler:null,player:null,hide:!0,timePerTwoBars:0,timePerBar:0,demoStartTime:0,demoEndTime:null,currentDisplayedBar:0,videoOsmd:null,from:1,to:2}},methods:{timeUpdated:function(){var e=this.player.currentTime(),t=e-this.demoStartTime,s=Math.floor(t/this.timePerTwoBars);s!=this.currentDisplayedBar&&(s>=0&&s<Math.floor(this.numberOfBars/2)?(this.currentDisplayedBar=s,this.videoHandler.importNotes(this.notesInBars[2*s].concat(this.notesInBars[2*s+1]),this.timeSignature)):s<0&&0!=this.currentDisplayedBar?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):s>Math.floor(this.numberOfBars/2)&&(this.numberOfBars<2?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):(this.currentDisplayedBar=Math.floor(this.numberOfBars/2),this.videoHandler.importNotes(this.notesInBars[this.numberOfBars-1].concat(this.notesInBars[this.numberOfBars-1]),this.timeSignature))))},timeUpdatedOsmd:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.player.currentTime(),r=s-e.demoStartTime,n=Math.floor(r/e.timePerTwoBars),n==e.currentDisplayedBar){t.next=25;break}if(!(n>=0&&n<Math.floor(e.numberOfBars/2))){t.next=12;break}return console.log(n),e.videoOsmd.setOptions({drawFromMeasureNumber:2*n+1,drawUpToMeasureNumber:2*n+2}),e.currentDisplayedBar=n,t.next=10,e.videoOsmd.render();case 10:t.next=25;break;case 12:if(!(n<0&&0!=e.currentDisplayedBar)){t.next=20;break}return console.log(n),e.videoOsmd.setOptions({drawFromMeasureNumber:1,drawUpToMeasureNumber:2}),e.currentDisplayedBar=0,t.next=18,e.videoOsmd.render();case 18:t.next=25;break;case 20:if(!(n>Math.floor(e.numberOfBars/2))){t.next=25;break}return console.log(n,"from third clause"),e.numberOfBars<2?(e.videoOsmd.setOptions({drawFromMeasureNumber:0,drawUpToMeasureNumber:0}),e.currentDisplayedBar=0):(e.videoOsmd.setOptions({drawFromMeasureNumber:e.numberOfBars-1,drawUpToMeasureNumber:e.numberOfBars}),e.currentDisplayedBar=Math.floor((s-e.demoStartTime)/e.timePerTwoBars)),t.next=25,e.videoOsmd.render();case 25:case"end":return t.stop()}}),t)})))()},drawOsmdScores:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=document.createElement("div"),s.setAttribute("id","video-overlay-background"),s.style.position="absolute",s.style.background="#FAFAFA",s.style.top="0",s.style.left="0",s.style.right="0",s.style.height="130px",s.style.overflow="hidden",r=document.createElement("div"),r.setAttribute("id","video-osmd-wrapper"),r.style.position="absolute",r.style.background="#FAFAFA",r.style.top="0",r.style.left="0",r.style.right="0",n=document.createElement("div"),s.appendChild(r),r.appendChild(n),document.getElementById("video").appendChild(s),e.videoOsmd=new ds["OpenSheetMusicDisplay"](n,{drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,backend:"Canvas",drawingParameters:"compacttight"}),t.next=23,e.videoOsmd.load(e.exercise.musicXmlUrl);case 23:return t.next=25,e.$nextTick();case 25:return e.videoOsmd.zoom=1.2,t.next=28,e.videoOsmd.render();case 28:console.log(e.videoOsmd.graphic),console.log(e.videoOsmd.graphic.music);case 30:case"end":return t.stop()}}),t)})))()},drawScores:function(){var e=document.createElement("div");e.setAttribute("id","video-vexflow-wrapper"),e.style.position="absolute",e.style.background="#FAFAFA",e.style.top="0",e.style.left="0",e.style.right="0",this.videoHandler=new lt["a"].Handler("video-vexflow-wrapper",{canEdit:!1,numberOfStaves:2,lessStaveHeight:!0,timeSignature:this.timeSignature,keySignature:this.keySignature,canvasProperties:{id:"video-vexflow-wrapper-canvas",width:this.$refs.videoPlayer.offsetWidth,height:80*lt["a"].scale,tabindex:1}},e).init(),this.notesInBars=lt["a"].notesToBars(this.melody,this.timeSignature),this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature),document.getElementById("video").appendChild(e)}},watch:{playbackBpm:function(e){this.bpm&&this.player.playbackRate(e/this.bpm)},videoSrc:function(e){this.player.src(e)}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="",t=this.exercise.videoUrl||this.exercise.demoUrl?this.exercise.videoUrl?this.exercise.videoUrl:this.exercise.demoUrl:"undefined",s=Object(ne["default"])(this.$refs.videoPlayer,{controls:!0,aspectRatio:"16:9",sources:[{src:t,type:"video/mp4"}],playbackRates:[.8,.9,1,1.1,1.2],poster:this.exercise.demoPosterUrl?this.exercise.demoPosterUrl:null},(function(){s.hotkeys({volumeStep:.1,seekStep:2,enableModifiersForNumbers:!1,enableHoverScroll:!0}),i.exercise.useScore&&(s.on("userinactive",(function(){s.paused()?i.hide=!1:i.hide=!0})),s.on("useractive",(function(){i.hide=!1})),s.on("play",(function(){i.hide=!1})),s.on("firstplay",(function(){i.hide=!1})),s.on("ratechange",(function(){i.playbackBpm=i.bpm*i.player.playbackRate()})),i.exercise.useXml?s.on("timeupdate",(function(e){i.timeUpdatedOsmd(e)})):s.on("timeupdate",(function(e){i.timeUpdated(e)})))})),this.player=s,r=this.exercise,!r.useScore){e.next=31;break}if(this.useScore=r.useScore,this.useXml=r.useXml,this.bpm=parseInt(r.bpm),this.playbackBpm=this.bpm,this.demoStartTime=r.demoStartTime,!r.useXml){e.next=19;break}return e.next=14,this.drawOsmdScores();case 14:n=this.videoOsmd.sheet.sourceMeasures[0].activeTimeSignature,this.timeSignature="".concat(n.numerator,"/").concat(n.denominator),this.numberOfBars=this.videoOsmd.sheet.sourceMeasures.length,e.next=24;break;case 19:this.melody=r.melody.split("-"),this.timeSignature=r.timeSignature,this.keySignature=r.keySignature,this.numberOfBars=parseInt(r.numberOfBars),this.drawScores();case 24:this.timePerBar=parseInt(this.timeSignature.split("/")[0])/this.bpm*60,this.timePerTwoBars=2*this.timePerBar,this.demoEndTime=this.demoStartTime+this.timePerBar*this.numberOfBars,document.getElementById("video").appendChild(document.getElementById("slider")),document.getElementsByClassName("v-slider__track-container")[0].style.width="5px",document.getElementsByClassName("v-slider__thumb-label")[0].style.color="black",document.getElementsByClassName("v-slider__thumb-label")[0].style.boxShadow="0px 0px 5px black";case 31:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Es=Ns,Bs=(s("cab5"),s("ba0d")),Ps=Object(x["a"])(Es,Is,Rs,!1,null,"f19c504e",null),Os=Ps.exports;_()(Ps,{VIcon:C["a"],VRow:de["a"],VSlider:Bs["a"]});var js=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-overlay",{attrs:{value:e.overlay}},[r("label",{staticClass:"countdown"},[e._v(e._s(e.countDown)+" ")])]),r("v-row",{staticClass:"main-controls",attrs:{justify:"center"}},[r("v-col",{staticClass:"text-center",staticStyle:{border:"1px solid #E0E0E0","border-radius":"10px"},attrs:{cols:"10"}},[r("div",{staticStyle:{position:"relative"}},[e.isRecording?e._e():r("v-btn",{attrs:{fab:"",icon:"",elevation:"3",medium:""},on:{click:e.onClick}},[r("v-icon",{attrs:{large:"",color:"#747474"}},[e._v(" mdi-microphone ")])],1),e.isRecording?r("v-btn",{attrs:{icon:"",color:"#C62828",height:"56",width:"56"},on:{click:e.onClick}},[r("v-icon",{attrs:{size:"48"}},[e._v(" mdi-stop-circle ")])],1):e._e(),r("v-chip",{staticStyle:{position:"absolute",bottom:"0",left:"calc(50% + 48px)"}},[r("strong",[e._v(e._s(e.formattedElapsedTime))])]),r("v-chip",{staticStyle:{position:"absolute",bottom:"0",left:"calc(70%)"},on:{click:function(t){e.metronome=!e.metronome}}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-metronome ")]),e.metronome?r("strong",[e._v("ON")]):e._e(),e.metronome?e._e():r("strong",[e._v("OFF")])],1),e.bpmConfirmed?r("v-chip",{staticStyle:{position:"absolute",bottom:"0",left:"calc(70% + 92px)"},on:{click:e.bpmClicked}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-music-note-eighth ")]),r("strong",[e._v("= "+e._s(e.bpm))])],1):r("v-chip",{staticStyle:{position:"absolute",bottom:"0",left:"calc(70% + 92px)"}},[r("v-icon",{attrs:{left:""}},[e._v(" mdi-music-note-eighth ")]),r("strong",[e._v("=")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.bpm,expression:"bpm"},{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"bpmInput",attrs:{type:"text",name:"fname"},domProps:{value:e.bpm},on:{keyup:e.keyPressed,input:function(t){t.target.composing||(e.bpm=t.target.value)}}})],1)],1),r("v-divider",{directives:[{name:"show",rawName:"v-show",value:e.showSubmit,expression:"showSubmit"}],staticClass:"my-4"}),r("v-list",{staticClass:"py-0",attrs:{flat:""}},[r("v-list-item-group",{attrs:{"active-class":""},model:{value:e.selectedFileIndex,callback:function(t){e.selectedFileIndex=t},expression:"selectedFileIndex"}},e._l(e.recordingsData,(function(t,s){return r("v-list-item",{key:s,scopedSlots:e._u([{key:"default",fn:function(n){var i=n.active;return[r("v-list-item-action",[r("v-checkbox",{attrs:{"input-value":i}})],1),r("v-list-item-content",{staticClass:"py-0"},[r("v-list-item-title",{on:{click:function(t){return e.changeFileName(s)}}},[e._v(" "+e._s(t[0])+"(bpm: "+e._s(t[3])+") ")])],1),r("v-list-item-content",{staticClass:"py-0",staticStyle:{overflow:"visible"}},[r("v-list-item-title",[r("audio",{attrs:{controls:"",src:t[1]}})])],1),r("v-list-item-action",[r("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(s){return e.onDelete(t)}}},[r("v-icon",[e._v(" mdi-trash-can-outline ")])],1)],1)]}}],null,!0)})})),1)],1)],1)],1),r("v-row",{directives:[{name:"show",rawName:"v-show",value:e.showSubmit,expression:"showSubmit"}]},[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("v-btn",{attrs:{color:"indigo",dark:"",loading:e.dialog},on:{click:e.submitAudio}},[e._v(" Upload "),r("v-icon",{attrs:{right:"",dark:""}},[e._v(" mdi-cloud-upload ")])],1),r("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.submissionError,expression:"submissionError"}],staticClass:"submitError",attrs:{type:"error"}},[e._v("An error has occurred")])],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("score-feedback",{attrs:{currEx:e.currEx,isNewRecording:!0,elapsedTime:e.elapsedTime/1e3,start:e.start,bpm:e.bpm}})],1)],1),r("audio",{ref:"upbeat",attrs:{src:s("fcdd")}}),r("audio",{ref:"downbeat",attrs:{src:s("17d3")}})],1)},Fs=[],Ls=(s("4de4"),s("498a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",{staticClass:"justify-center"},[r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},e._l(e.scoreRows,(function(t,s){return r("div",{key:s,staticStyle:{position:"relative"}},[e.isShowFeedback&&0==s?r("div",{staticClass:"font-weight-bold"},[e._v("Tutor's recording")]):e._e(),r("div",{staticStyle:{position:"relative"},attrs:{id:"vexflow-wrapper-"+s}}),r("div",{staticStyle:{position:"relative"}},[e.transcribedNotes.length>0?r("line-graph",{staticStyle:{position:"relative"},attrs:{transcribedNotes:e.transcribedNotes[s],rowNum:s+1,bpm:e.recording.bpm,timeSignature:e.currEx.timeSignature,barsPerRow:4,onSelectNoteForGreentick:function(t,s){e.updateStudentPos(t,s)},onClickNote:e.onClickNote,clickedNoteOnset:e.clickedNoteOnset,shouldIndicateNoteClicked:e.shouldIndicateNoteClicked}}):e._e(),e.isShowFeedback&&0==s?r("div",{staticClass:"font-weight-bold",staticStyle:{position:"absolute",top:"-10px",left:"0"}},[e._v("Your recording")]):e._e()],1)])})),0)],1),e.playing||!e.isNewFeedback&&!e.isShowFeedback?e._e():r("v-btn",{staticStyle:{position:"fixed",top:"25vh",right:"24px"},attrs:{fab:"",large:""},on:{click:e.play}},[r("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-play")])],1),e.playing&&(e.isNewFeedback||e.isShowFeedback)?r("v-btn",{staticStyle:{position:"fixed",top:"25vh",right:"24px"},attrs:{fab:"",large:""},on:{click:e.pause}},[r("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pause")])],1):e._e(),r("v-row",{staticStyle:{position:"-webkit-sticky","/* Safari */position":"sticky",top:"0"}},[e.isNewRecording||e.isShowFeedback?r("img",{staticStyle:{position:"absolute",top:"0",left:"0","transform-origin":"top left","will-change":"transform","z-index":"2",cursor:"pointer"},style:{transform:"translate3d("+e.transformX+"px, "+e.transformY+"px, 0px)",opacity:e.tutorFocused?"0.8":"0.4"},attrs:{src:s("2bd4"),id:"tick"},on:{click:function(t){e.tutorFocused=!0}}}):e._e(),e.isNewFeedback||e.isShowFeedback?r("img",{staticStyle:{position:"absolute",top:"0",left:"0","transform-origin":"top left","will-change":"transform","z-index":"2",cursor:"pointer"},style:{transform:"translate3d("+e.transformXStudent+"px, "+e.transformYStudent+"px, 0px)",opacity:e.tutorFocused?"0.4":"0.8"},attrs:{src:s("2bd4"),id:"student-tick"},on:{click:function(t){e.tutorFocused=!1}}}):e._e()]),e.isShowFeedback?r("audio",{ref:"tutorAudio",attrs:{src:e.currEx.videoUrl,type:"audio/ogg"},on:{ended:e.tutorAudioEnd}}):e._e(),e.isNewFeedback||e.isShowFeedback?r("audio",{ref:"studentAudio",attrs:{src:e.recording.audioUrl,type:"audio/ogg"},on:{ended:e.studentAudioEnd}}):e._e()],1)}),Ms=[],Ds=(s("0481"),s("fb6a"),s("4069"),{name:"Score",props:["currEx","recording","onClickNote","clickedNoteOnset","shouldIndicateNoteClicked","elapsedTime","start","isNewFeedback","isShowFeedback","isNewRecording","bpm"],components:{"line-graph":Ss},computed:{secondsPerRow:function(){return 60/this.recording.bpm*parseInt(this.currEx.timeSignature.split("/")[0])*4}},data:function(){return{notesInBars:[],handlers:[],demoStartTime:0,transcribedNotes:[],tutorFocused:!0,yInterval:137,newAudio:null,transformX:0,transformY:0,transformXStudent:30,transformYStudent:30,canvasWidth:0,lineGraphWidth:0,activeRow:0,activeRowStudent:1,activeNote:0,studentAudioSrc:"",scoreRows:[],notePositions:[],noteOnsetDurations:[],animationFrame:null,playing:!1}},watch:{recording:function(e){this.transcribedNotes=this.splitFeedbackIntoRows(JSON.parse(e.transcription)),this.tutorAudioEnd(),this.studentAudioEnd()},start:function(e){e?this.playTutorAudio():this.tutorAudioEnd()},tutorFocused:function(e){this.pauseTutorAudio(),this.pauseStudentAudio()},bpm:function(e){if("number"==typeof e){console.log(e),this.noteOnsetDurations=[];for(var t=0;t<this.scoreRows.length;t++)this.noteOnsetDurations.push(lt["a"].notesToOnsetDuration(this.scoreRows[t],this.currEx.timeSignature,e,t))}}},methods:{drawScore:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:for(s=document.getElementById("vexflow-wrapper-".concat(0)),r=s.offsetWidth,e.canvasWidth=r,n=0;n<e.scoreRows.length;n++)e.handlers.push(new lt["a"].Handler("vexflow-wrapper-".concat(n),{numberOfStaves:4,stavesPerRow:4,canEdit:!1,keySignature:e.currEx.keySignature,canvasProperties:{width:r,id:"vexflow-wrapper-".concat(n)+"-canvas"},timeSignature:e.currEx.timeSignature}).init()),e.handlers[n].importNotes(e.scoreRows[n],e.currEx.timeSignature),e.isShowFeedback&&(e.handlers[n].canvas.addEventListener("mousemove",e.canvasMouseMove,!1),e.handlers[n].canvas.addEventListener("mouseup",e.canvasMouseUp,!1),e.handlers[n].canvas.addEventListener("mouseleave",e.canvasMouseLeave,!1),e.handlers[n].canvas.style.cursor="pointer"),e.notePositions.push(e.handlers[n].getNotePositions().filter((function(e){return e.length>0})).flat()),e.noteOnsetDurations.push(lt["a"].notesToOnsetDuration(e.scoreRows[n],e.currEx.timeSignature,e.currEx.bpm,n));(e.isNewRecording||e.isShowFeedback)&&(e.transformX=parseFloat(e.notePositions[0][0].x),i=document.getElementById("tick"),i.parentNode.removeChild(i),s.appendChild(i));case 7:case"end":return t.stop()}}),t)})))()},drawLineGraph:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.transcribedNotes=e.splitFeedbackIntoRows(JSON.parse(e.recording.transcription)),e.studentAudioSrc=e.audioUrl,t.next=4,e.$nextTick();case 4:s=document.getElementById("student-tick"),s.parentNode.removeChild(s),r=document.getElementById("lineGraph0"),e.lineGraphWidth=r.offsetWidth,r.appendChild(s);case 9:case"end":return t.stop()}}),t)})))()},play:function(){this.playing=!0,this.isShowFeedback?this.tutorFocused?this.playTutorAudio():this.playStudentAudio():this.isNewFeedback&&this.playStudentAudio()},pause:function(){this.tutorFocused?this.pauseTutorAudio():this.pauseStudentAudio()},playTutorAudio:function(){var e=this;this.tutorFocused=!0;for(var t=0;t<this.handlers.length;t++)this.handlers[t].canvas.removeEventListener("mousemove",this.canvasMouseMove,!1);this.isShowFeedback&&this.$refs["tutorAudio"].play();var s=function t(){var s=0;if(s=e.isNewRecording?e.elapsedTime:e.$refs["tutorAudio"].currentTime-e.demoStartTime,s>e.demoStartTime){s-=e.demoStartTime;var r=e.noteOnsetDurations[e.activeRow][e.activeNote];if(s<r.onset+r.duration){var n=(s-r.onset)/r.duration;e.activeNote==e.scoreRows[e.activeRow].length-1?e.transformX=e.notePositions[e.activeRow][e.activeNote].x+parseFloat((e.canvasWidth-20-e.notePositions[e.activeRow][e.activeNote].x)*n):e.transformX=e.notePositions[e.activeRow][e.activeNote].x+parseFloat((e.notePositions[e.activeRow][e.activeNote+1].x-e.notePositions[e.activeRow][e.activeNote].x)*n)}else e.activeNote==e.scoreRows[e.activeRow].length-1?(e.activeNote=0,e.activeRow+=1,e.activeRow<e.notePositions.length&&document.getElementById("vexflow-wrapper-".concat(e.activeRow>=1?e.activeRow-1:e.activeRow)).scrollIntoView({behavior:"smooth"}),e.transformY=e.transformY+e.yInterval):e.activeNote+=1}e.animationFrame=requestAnimationFrame(t)};this.animationFrame=requestAnimationFrame(s)},pauseTutorAudio:function(){this.$refs["tutorAudio"].pause(),this.playing=!1,cancelAnimationFrame(this.animationFrame);for(var e=0;e<this.handlers.length;e++)this.handlers[e].canvas.addEventListener("mousemove",this.canvasMouseMove,!1)},tutorAudioEnd:function(){this.playing=!1,this.transformX=this.notePositions[0][0].x,this.transformY=10,cancelAnimationFrame(this.animationFrame),this.activeRow=0,this.activeNote=0},updateStudentPos:function(e,t){this.tutorFocused=!1,this.transformXStudent=t,this.transformYStudent=(e-1)*this.yInterval+30,this.$refs["studentAudio"].currentTime=(e-1+(t-30)/(this.canvasWidth-50))*this.secondsPerRow,this.activeRowStudent=e},playStudentAudio:function(e,t){var s=this;this.tutorFocused=!1,this.$refs["studentAudio"].play();var r=function e(){var t=s.$refs["studentAudio"].currentTime,r=s.activeRowStudent*s.secondsPerRow;if(t<r){var n=t%s.secondsPerRow/s.secondsPerRow;s.transformXStudent=(s.lineGraphWidth-50)*n+30}else{if(s.activeRowStudent+=1,s.activeRowStudent>s.scoreRows.length)return void cancelAnimationFrame(s.animationFrame);document.getElementById("vexflow-wrapper-".concat(s.activeRowStudent>=2?s.activeRowStudent-2:s.activeRowStudent-1)).scrollIntoView({behavior:"smooth"}),s.transformYStudent=s.transformYStudent+s.yInterval,s.transformXStudent=30}s.animationFrame=requestAnimationFrame(e)};this.animationFrame=requestAnimationFrame(r)},pauseStudentAudio:function(){this.playing=!1,this.$refs["studentAudio"].pause(),cancelAnimationFrame(this.animationFrame)},studentAudioEnd:function(){this.playing=!1,this.transformXStudent=30,this.transformYStudent=30,cancelAnimationFrame(this.animationFrame),this.activeRowStudent=1},canvasMouseMove:function(e){var t=Ts.getMousePositionInCanvas(e.srcElement,e),s=parseInt(e.srcElement.id.split("-")[2]);this.handlers[s].deHighlightAll();for(var r=0;r<this.notePositions[s].length;r++)t.x>this.notePositions[s][r].x&&t.x<this.notePositions[s][r].x+this.notePositions[s][r].w&&this.handlers[s].highlightNote(r)},canvasMouseUp:function(e){this.tutorFocused=!0;for(var t=Ts.getMousePositionInCanvas(e.srcElement,e),s=parseInt(e.srcElement.id.split("-")[2]),r=900719925474099,n=0,i=0;i<this.notePositions[s].length;i++){var o=Math.abs(t.x-this.notePositions[s][i].x);o<r&&(r=o,n=i)}this.transformX=this.notePositions[s][n].x,this.transformY=s*this.yInterval,this.$refs["tutorAudio"].currentTime=this.noteOnsetDurations[s][n].onset,this.activeRow=s,this.activeNote=n},canvasMouseLeave:function(e){var t=parseInt(e.srcElement.id.split("-")[2]);this.handlers[t].deHighlightAll()},splitFeedbackIntoRows:function(e){var t=this.recording.bpm,s=60/t*parseInt(this.currEx.timeSignature[0])*4,r=0,n=[];n.push([]);for(var i=0;i<e.length;i++){var o=e[i];if(o.onset<r+s)if(o.onset+o.duration<=r+s)n[n.length-1].push(o);else{var a=Object(l["a"])({},o);a.onset=r+s,a.duration=o.onset+o.duration-(r+s),o.duration=o.duration-a.duration,n[n.length-1].push(o),e[i]=a,r+=s,n.push([]),i--}else r+=s,n.push([]),i--}while(n.length<this.scoreRows.length)n.push([]);return n}},mounted:function(){this.currEx.melody=this.currEx.melody.split("-"),this.demoStartTime=this.currEx.demoStartTime,this.notesInBars=lt["a"].notesToBars(this.currEx.melody,this.currEx.timeSignature);for(var e=0;e<this.notesInBars.length;e+=4)this.scoreRows.push(this.notesInBars.slice(e,e+4).flat());this.isNewFeedback||this.isShowFeedback?(this.yInterval=287,this.drawScore(),this.drawLineGraph(),this.isNewFeedback&&(this.tutorFocused=!1)):this.isNewRecording&&(this.yInterval=137,this.drawScore())}}),Us=Ds,$s=Object(x["a"])(Us,Ls,Ms,!1,null,null,null),Ks=$s.exports;_()($s,{VBtn:k["a"],VCol:ce["a"],VContainer:le["a"],VIcon:C["a"],VRow:de["a"]});var Ws={name:"AudioRecorder",props:["currEx","courseId","lessonId"],components:{"score-feedback":Ks},data:function(){return{overlay:!1,zIndex:0,showRecorder:!0,constraints:{audio:!0},chunks:[],mediaRecorder:null,isRecording:!1,recordingsData:[],selectedFileIndex:null,audioCtx:null,elapsedTime:0,timer:null,countDown:4,defaultCountDown:1,hasCountDownStarted:!1,submissionError:!1,dialog:!1,start:!1,totalTime:0,settings:[],bpm:this.currEx.bpm,bpmConfirmed:!0,metronome:!0}},watch:{bpm:function(e){"number"==typeof e&&(this.totalTime=1e3*this.countDown*60/e*this.currEx.numberOfBars)}},computed:{showSubmit:function(){return 0!=this.recordingsData.length},formattedElapsedTime:function(){var e=new Date(null);e.setSeconds(this.elapsedTime/1e3);var t=e.toUTCString();return t.substr(t.indexOf(":")+1,5)},msPerBeat:function(){return 10*Math.ceil(60/parseInt(this.bpm)*1e3/10)}},created:function(){console.log("started"),navigator.mediaDevices.getUserMedia(this.constraints).then(this.onSuccess,this.onError),this.countDown=parseInt(this.currEx.timeSignature.split("/")[0]),this.defaultCountDown=this.countDown,this.totalTime=1e3*this.countDown*60/this.currEx.bpm*this.currEx.numberOfBars,this.$notify({group:"foo",title:"Please wear a earpiece if you are using the metronome!"})},methods:{keyPressed:function(e){if("Enter"==e.code){this.bpmConfirmed=!0;var t=parseInt(this.bpm);this.bpm=t>=30&&t<=180?t:t<30?30:180}},onClickOutside:function(){this.bpmConfirmed=!0;var e=parseInt(this.bpm);this.bpm=e>=30&&e<=180?e:e<30?30:180},bpmClicked:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isRecording){t.next=2;break}return t.abrupt("return");case 2:return e.bpmConfirmed=!1,t.next=5,e.$nextTick();case 5:e.$refs["bpmInput"].select();case 6:case"end":return t.stop()}}),t)})))()},countDownTimer:function(){var e=this;this.countDown>0&&(this.metronome?(this.$refs["downbeat"].play(),setTimeout((function(){e.countDown-=1,e.countDownTimer(),e.$refs["downbeat"].play()}),6e4/this.bpm)):setTimeout((function(){e.countDown-=1,e.countDownTimer()}),6e4/this.bpm)),0==this.countDown&&(this.isRecording||(this.onStart(),this.isRecording=!0,this.start=!0,this.overlay=!1))},startTimer:function(){var e=this;this.metronome?(console.log("here"),this.timer=setInterval((function(){e.elapsedTime+=10,e.elapsedTime>e.totalTime&&(clearInterval(e.timer),e.isRecording&&e.onStop()),e.elapsedTime%e.msPerBeat==0&&e.$refs["downbeat"].play()}),10)):this.timer=setInterval((function(){e.elapsedTime+=10,e.elapsedTime>e.totalTime&&(clearInterval(e.timer),e.isRecording&&e.onStop())}),10)},stopTimer:function(){this.elapsedTime=0,clearInterval(this.timer)},onClick:function(e){this.bpmConfirmed?(this.isRecording||this.hasCountDownStarted||(this.countDownTimer(),this.hasCountDownStarted=!0,this.overlay=!this.overlay),this.isRecording&&this.onStop()):alert("Please choose a bpm to record with")},submitAudio:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.selectedFileIndex){t.next=3;break}return alert("Please select one of the recordings"),t.abrupt("return");case 3:return e.dialog=!0,s=e.recordingsData[e.selectedFileIndex][2],r=e.recordingsData[e.selectedFileIndex][0],n=r.concat(".ogg"),i=new File([s],n),console.log(i),t.prev=9,o=new FormData,o.set("eid",e.currEx.id),o.set("bpm",e.recordingsData[e.selectedFileIndex][3]),console.log(e.currEx.id,i),o.append("audio",i),t.next=17,g.create(o);case 17:return a=t.sent.data.recording,t.next=20,g.getFeedback(a.id);case 20:t.sent.data.recording.transcription,alert("Success!"),e.$router.push("/course/show/".concat(e.courseId,"/lesson/").concat(e.lessonId)),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](9),console.log(t.t0),e.submissionError=!0;case 29:return t.prev=29,e.dialog=!1,t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[9,25,29,32]])})))()},onStart:function(){this.mediaRecorder.start(),this.startTimer();document.getElementById("recButton")},onStop:function(){console.log("Recorder state: ",this.mediaRecorder.state),this.stopTimer(),this.start=!1,this.mediaRecorder.stop(),this.countDown=this.defaultCountDown,this.hasCountDownStarted=!1},onDelete:function(e){this.recordingsData=this.recordingsData.filter((function(t){return t!=e}))},onSuccess:function(e){var t=this,s=new MediaRecorder(e);this.mediaRecorder=s;var r=[];console.log("Recorder state: ",s.state),s.onstop=function(e){var s=prompt("Enter a name for your sound clip?","My recording");t.isRecording=!1;var n=new Blob(r,{type:"audio/ogg; codecs=vorbis"});r=[];var i=window.URL.createObjectURL(n);t.recordingsData.push([s,i,n,t.bpm]),t.selectedFileIndex=t.recordingsData.length-1},s.ondataavailable=function(e){r.push(e.data)}},onError:function(e){console.log(e)},changeFileName:function(e){this.recordingsData[e][0];var t=prompt("Enter a new name for your sound clip?");null!==t&&t.trim().length>0&&(this.recordingsData[e][0]=t)}}},Hs=Ws,qs=(s("d234"),s("ac7c")),Xs=s("1800"),zs=s("a797"),Ys=s("269a"),Gs=s.n(Ys),Qs=s("a293"),Zs=Object(x["a"])(Hs,js,Fs,!1,null,"71b45087",null),Js=Zs.exports;_()(Zs,{VAlert:ks["a"],VBtn:k["a"],VCheckbox:qs["a"],VChip:zt["a"],VCol:ce["a"],VDivider:ue["a"],VIcon:C["a"],VList:S["a"],VListItem:T["a"],VListItemAction:Xs["a"],VListItemContent:N["a"],VListItemGroup:I["a"],VListItemTitle:N["c"],VOverlay:zs["a"],VRow:de["a"]}),Gs()(Zs,{ClickOutside:Qs["a"]});var er={name:"ShowLesson",components:{"video-player":Os,"audio-recorder":Js,"line-graph":Ss,"score-feedback":Ks},data:function(){return{course:null,lesson:null,currEx:null,isVideoContent:!0,osmd:null,videoOsmd:null,from:1,to:2,fullHeight:!1,opened:[0],videoSrc:"",modal:!1,newAudio:null,loading:!1,bpm:"",requiredRules:[function(e){return!!e||"This field is required"}]}},watch:{bpm:function(e){this.bpm_label="BPM: "+e},no_bars:function(e){this.bars_label="No. Bars: "+e},"$route.params.lesson_id":function(e){this.$router.go()}},computed:Object(l["a"])({secondsPerRow:function(){return 60/this.currEx.bpm*parseInt(this.currEx.timeSignature.split("/")[0])*4},is_student:function(){return this.user.isStudent}},Object(u["b"])(["user","students","subscribedTutors"])),methods:{goToLesson:function(e,t){this.$router.push({name:"showlesson",params:{course_id:this.course.id,lesson_id:t.id,course:this.course,lesson:t}})},submitAudio:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs["audioForm"].validate()){e.next=23;break}return s=new FormData,s.set("eid",t.currEx.id),s.set("bpm",t.currEx.bpm),s.append("audio",t.newAudio),t.loading=!0,e.prev=6,e.next=9,g.create(s);case 9:return r=e.sent.data.recording,e.next=12,g.getFeedback(r.id);case 12:e.sent.data.recording.transcription,alert("Success!"),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),console.log(e.t0);case 19:return e.prev=19,t.loading=!1,t.modal=!1,e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[6,16,19,23]])})))()},getPastFeedback:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.list(e.currEx.id);case 2:s=t.sent.data.recordings,e.recordings=s,s.length>0&&(e.currRecording=s[0]);case 5:case"end":return t.stop()}}),t)})))()},updateFeedback:function(e,t){this.currRecording=this.recordings[t]}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.show(this.$route.params.course_id);case 2:t=e.sent,this.course=t.data.course,this.lesson=this.course.lessons.find((function(e){return e.id==s.$route.params.lesson_id})),this.videoSrc=this.lesson.exercises[0].videoUrl,this.currEx=this.lesson.exercises[0],this.getPastFeedback(),window.addEventListener("scroll",(function(){0==window.pageYOffset?s.fullHeight=!1:window.pageYOffset>64&&(s.fullHeight=!0)}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){this.player&&this.player.dispose()}},tr=er,sr=(s("e8fe"),Object(x["a"])(tr,fs,gs,!1,null,"11992ad2",null)),rr=sr.exports;_()(sr,{VBtn:k["a"],VCard:J["a"],VCardActions:ee["a"],VCardTitle:ee["d"],VCol:ce["a"],VContainer:le["a"],VDialog:je["a"],VExpansionPanel:Yt["a"],VExpansionPanelContent:Gt["a"],VExpansionPanelHeader:Qt["a"],VExpansionPanels:Zt["a"],VFileInput:Ze["a"],VForm:be["a"],VIcon:C["a"],VImg:te["a"],VList:S["a"],VListItem:T["a"],VListItemContent:N["a"],VListItemGroup:I["a"],VRow:de["a"],VTextField:_e["a"]});var nr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1 px-10"},[e._v("Course Info")]),s("v-divider"),s("v-card-text",{staticClass:"px-10"},[s("v-form",{ref:"courseForm"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Title*",name:"title",type:"text",outlined:"",color:"indigo"},model:{value:e.newCourse.name,callback:function(t){e.$set(e.newCourse,"name",t)},expression:"newCourse.name"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Price*",name:"price","prepend-icon":"mdi-currency-usd",rules:e.priceRules,outlined:"",color:"indigo"},model:{value:e.newCourse.price,callback:function(t){e.$set(e.newCourse,"price",t)},expression:"newCourse.price"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Tagline",name:"tagline",outlined:"",color:"indigo"},model:{value:e.newCourse.tagline,callback:function(t){e.$set(e.newCourse,"tagline",t)},expression:"newCourse.tagline"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":"",outlined:"",color:"indigo"},model:{value:e.newCourse.description,callback:function(t){e.$set(e.newCourse,"description",t)},expression:"newCourse.description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Level",items:e.levels,outlined:"",color:"indigo"},model:{value:e.newCourse.level,callback:function(t){e.$set(e.newCourse,"level",t)},expression:"newCourse.level"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Instrument",items:e.instruments,outlined:"",color:"indigo"},model:{value:e.newCourse.instrument,callback:function(t){e.$set(e.newCourse,"instrument",t)},expression:"newCourse.instrument"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Language",items:e.languages,outlined:"",color:"indigo"},model:{value:e.newCourse.language,callback:function(t){e.$set(e.newCourse,"language",t)},expression:"newCourse.language"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:e.course.previewVideoUrl?e.course.previewVideoUrl.split("/")[6]:"Upload a preview video","prepend-icon":"mdi-video",label:"Preview Video",outlined:"",color:"indigo"},model:{value:e.newCourse.previewVideo,callback:function(t){e.$set(e.newCourse,"previewVideo",t)},expression:"newCourse.previewVideo"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:e.course.coverPhotoUrl?e.course.coverPhotoUrl.split("/")[6]:"Choose coverpage for your newCourse","prepend-icon":"mdi-image",label:"Cover Photo",outlined:"",color:"indigo"},model:{value:e.newCourse.coverPhoto,callback:function(t){e.$set(e.newCourse,"coverPhoto",t)},expression:"newCourse.coverPhoto"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"16px"}},[e._v("What will your students learn from the newCourse?")])]),e._l(e.newCourse.learningPoints,(function(t,r){return s("v-col",{key:r,staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: How to use pen tool in Photoshop",name:"tagline",outlined:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.newCourse.learningPoints[r],callback:function(t){e.$set(e.newCourse.learningPoints,r,t)},expression:"newCourse.learningPoints[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addLearningPoint}},[e._v("+ Add an answer")])],1)],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"16px"}},[e._v("Who are this newCourse for?")])]),e._l(e.newCourse.targetAudiences,(function(t,r){return s("v-col",{key:r,staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: Kids 6-8 years old",name:"tagline",outlined:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.newCourse.targetAudiences[r],callback:function(t){e.$set(e.newCourse.targetAudiences,r,t)},expression:"newCourse.targetAudiences[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addTargetAudience}},[e._v("+ Add an answer")])],1)],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"18px"}},[e._v("What are the requirements?")])]),e._l(e.newCourse.requirements,(function(t,r){return s("v-col",{key:r,staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: Photoshop software",name:"tagline",outlined:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.newCourse.requirements[r],callback:function(t){e.$set(e.newCourse.requirements,r,t)},expression:"newCourse.requirements[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addRequirement}},[e._v("+ Add an answer")])],1)],2)],1)],1)],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:"",loading:e.loading},on:{click:e.update}},[e._v("Save")]),s("v-btn",{attrs:{disabled:e.loading},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1):e._e()},ir=[],or=(s("a4d3"),s("e01a"),{name:"CourseForm",data:function(){return{course:null,newCourse:{name:"",tagline:"",price:"",description:"",language:"",level:"",instrument:"",targetAudiences:[""],learningPoints:[""],requirements:[""],coverPhoto:null,previewVideo:null},instruments:["Piano","Guitar","Drum Set","Er Hu","Yang Qin","French Horn","Violin","Body Percussion"],levels:["Beginner","Intermediate","Advanced"],languages:["English","Chinese"],nameRules:[function(e){return!!e||"Title is required"}],alphanumricRules:[function(e){return new RegExp("^[a-zA-Z0-9 !@#$%^*_(){}-]{0,100}$").test(e)||"You can only input alphanumeric characters"}],requiredRules:[function(e){return!!e||"This field is required"}],priceRules:[function(e){return!!e||"Price is required"},function(e){return new RegExp(/^\d+(?:\.\d{0,2})$/).test(e)||"Price must be a number with maximum 2 decimal places"}],error:null,loading:!1}},methods:{update:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.courseForm.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.error="",t.prev=4,s=new FormData,s.set("name",e.newCourse.name),s.set("tagline",e.newCourse.tagline),s.set("price",e.newCourse.price),s.set("description",e.newCourse.description),s.set("level",e.newCourse.level),s.set("instrument",e.newCourse.instrument),s.set("language",e.newCourse.language),s.set("targetAudiences",e.newCourse.targetAudiences.filter((function(e){return""!=e&&null!=e})).join("&")),s.set("learningPoints",e.newCourse.learningPoints.filter((function(e){return""!=e&&null!=e})).join("&")),s.set("requirements",e.newCourse.requirements.filter((function(e){return""!=e&&null!=e})).join("&")),s.set("id",e.course.id),e.newCourse.previewVideo&&s.append("previewVideo",e.newCourse.previewVideo),e.newCourse.coverPhoto&&s.append("coverPhoto",e.newCourse.coverPhoto),t.next=21,q.edit(s);case 21:e.$router.push("/course/edit/".concat(e.course.id)),t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](4),e.error=t.t0.response.data.error;case 27:case"end":return t.stop()}}),t,null,[[4,24]])})))()},cancel:function(){this.$router.push("/course/edit/".concat(this.course.id))},addLearningPoint:function(){this.newCourse.learningPoints.push("")},addTargetAudience:function(){this.newCourse.targetAudiences.push("")},addRequirement:function(){this.newCourse.requirements.push("")}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.show(this.$route.params.course_id);case 2:this.course=e.sent.data.course,console.log(this.course),this.newCourse.name=this.course.name,null!=this.tagline&&(this.newCourse.tagline=this.course.tagline),null!=this.course.price&&(this.newCourse.price=this.course.price.toFixed(2)),null!=this.course.description&&(this.newCourse.description=this.course.description),this.newCourse.language=this.course.language,null!=this.course.level&&(this.newCourse.level=this.course.level),this.newCourse.instrument=this.course.instrument,null!=this.course.targetAudiences&&(this.newCourse.targetAudiences=this.course.targetAudiences?this.course.targetAudiences.split("&"):[]),null!=this.course.learningPoints&&(this.newCourse.learningPoints=this.course.learningPoints?this.course.learningPoints.split("&"):[]),null!=this.course.requirements&&(this.newCourse.requirements=this.course.requirements?this.course.requirements.split("&"):[]);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),ar=or,cr=Object(x["a"])(ar,nr,ir,!1,null,null,null),lr=cr.exports;_()(cr,{VBtn:k["a"],VCard:J["a"],VCardText:ee["c"],VCardTitle:ee["d"],VCol:ce["a"],VContainer:le["a"],VDivider:ue["a"],VFileInput:Ze["a"],VForm:be["a"],VRow:de["a"],VSelect:Je["a"],VTextField:_e["a"],VTextarea:Jt["a"]});var ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[e.$route.params.lesson_id&&e.lesson||e.$route.params.course_id?r("v-row",[r("v-col",[r("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[r("v-card-title",{staticClass:"display-1 px-10 font-weight-bold"},[e._v("Lesson"),r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:e.deleteLesson}},[r("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-trash-can-outline")])],1)],1),r("v-divider"),r("v-card-text",{staticClass:"px-10"},[r("v-form",{ref:"lessonForm"},[r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{dense:"",label:"Name",name:"name",type:"text",rules:e.requiredRules,outlined:"",color:"indigo"},model:{value:e.newLesson.name,callback:function(t){e.$set(e.newLesson,"name",t)},expression:"newLesson.name"}},[e._v("Title*")])],1)],1),r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[r("v-textarea",{attrs:{dense:"",label:"Description","auto-grow":"",color:"indigo",outlined:""},model:{value:e.newLesson.description,callback:function(t){e.$set(e.newLesson,"description",t)},expression:"newLesson.description"}})],1)],1)],1),r("v-divider"),r("v-row",[r("v-col",{attrs:{cols:"12"}},e._l(e.newLesson.exercises,(function(t,n){return r("div",{key:n,on:{click:function(e){}}},[r("div",{staticClass:"text-h5"},[e._v("Video"),r("v-form",{ref:"exerciseForm-"+n,refInFor:!0},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:t.videoFilename?t.videoFilename:"Choose explanation video","prepend-icon":"mdi-video",label:"Demo Video",outlined:"",color:"indigo",dense:"","hide-details":"",rules:e.requiredRules},on:{change:e.onVideoPosterInput},model:{value:t.video,callback:function(s){e.$set(t,"video",s)},expression:"exercise.video"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-file-input",{attrs:{accept:"image/*",placeholder:t.videoPosterFilename?t.videoPosterFilename:"Choose coverpage for video","prepend-icon":"mdi-image",label:"Demo Video Poster (Optional)",outlined:"",color:"indigo",dense:"","hide-details":""},on:{change:e.onVideoPosterInput},model:{value:t.videoPoster,callback:function(s){e.$set(t,"videoPoster",s)},expression:"exercise.videoPoster"}})],1)],1),t.video?r("v-row",{key:e.componentKey,staticStyle:{width:"100%"}},[r("video",{ref:"videoPlayer",refInFor:!0,staticClass:"vjs-big-play-centered video-js",attrs:{id:"video",controls:"",poster:e.getFileUrl(t.videoPoster),"data-setup":'{"fluid": true, "aspectRatio": "16:9"}'}},[r("source",{attrs:{src:e.getFileUrl(t.video),type:"video/mp4"}})])]):e._e(),r("v-divider",{staticClass:"mt-3"}),r("div",{staticClass:"text-h5 mt-6"},[e._v("Score")]),r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-row",{staticClass:"align-center pl-3"},[r("v-switch",{staticClass:"ma-0",attrs:{label:"Overlay score on your video",color:"indigo",dense:"","hide-details":""},model:{value:t.useScore,callback:function(s){e.$set(t,"useScore",s)},expression:"exercise.useScore"}}),r("v-tooltip",{staticClass:"ml-2",attrs:{right:"",color:"#FFFFFF"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:"",color:"indigo lighten-2"}},"v-btn",n,!1),s),[r("v-icon",[e._v("mdi-information-outline")])],1)]}}],null,!0)},[r("div",[r("v-card",[r("v-card-title",[e._v("Show score together with the demo of your exercise")]),r("v-card-subtitle",[e._v("Example exercise with score overlay")]),r("v-card-text",{staticClass:"justify-center"},[r("v-img",{attrs:{"max-height":"320","max-width":"500",src:s("dbc9")}})],1)],1)],1)])],1)],1),t.useScore?r("v-col",{staticClass:"py-0",attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Demo Start Time",color:"indigo","prepend-icon":"mdi-alarm","persistent-hint":"",hint:"At roughly which second did you start playing in demo video",rules:e.demoStartTimeRules},model:{value:t.demoStartTime,callback:function(s){e.$set(t,"demoStartTime",s)},expression:"exercise.demoStartTime"}})],1):e._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.useXml&&t.useScore,expression:"!exercise.useXml && exercise.useScore"}]},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{dense:"",label:"BPM for this score",name:"bpm",outlined:"",color:"indigo"},model:{value:t.bpm,callback:function(s){e.$set(t,"bpm",s)},expression:"exercise.bpm"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{dense:"",items:e.time_signatures,outlined:"",label:"Time Signature",color:"indigo"},on:{change:function(t){return e.changeTimeSignature(t,n)}},model:{value:t.timeSignature,callback:function(s){e.$set(t,"timeSignature",s)},expression:"exercise.timeSignature"}})],1),r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"6"}},[r("div",{staticClass:"pl-0"},[e._v("No. Bars: "+e._s(t.numberOfBars))]),r("v-slider",{attrs:{min:"0",max:"64","thumb-label":"","thumb-size":24,color:"indigo","track-color":"indigo lighten-3","hide-details":""},on:{change:function(t){return e.changeBars(t,n)}},model:{value:t.numberOfBars,callback:function(s){e.$set(t,"numberOfBars",s)},expression:"exercise.numberOfBars"}})],1),r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{dense:"",items:e.majorKeys,outlined:"",label:"Key Signature",color:"indigo"},on:{change:function(t){return e.changeKeySignature(t,n)}},model:{value:t.keySignature,callback:function(s){e.$set(t,"keySignature",s)},expression:"exercise.keySignature"}})],1)],1),r("v-row",{staticClass:"align-center"},[r("span",{staticClass:"text-subtitle-1 ml-3"},[e._v("Tips on score editing")]),r("v-tooltip",{staticClass:"ml-2",attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",n,!1),s),[r("v-icon",[e._v("mdi-help-circle-outline")])],1)]}}],null,!0)},[r("div",[r("ul",[r("li",[e._v("Mouse over the score, click to enter note")]),r("li",[e._v("Scroll up and down to change type of note")]),r("li",[e._v("Right click on any note to open up menu")])])])])],1),r("v-row",[r("v-col",{staticClass:"pa-0",attrs:{id:"pannel-content-"+n},on:{click:function(t){return e.changeMelody(t,n)},wheel:function(t){return e.changeMelody(t,n)}}})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.useXml&&t.useScore,expression:"exercise.useXml && exercise.useScore"}]},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-file-input",{attrs:{accept:"text/xml, .musicxml",placeholder:t.musicXmlFilname?t.musicXmlFilename:"Music XML file","prepend-icon":"mdi-file-document-outline",label:"Upload musicxml file",outlined:"",dense:""},model:{value:t.musicXml,callback:function(s){e.$set(t,"musicXml",s)},expression:"exercise.musicXml"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{dense:"",label:"BPM for this score",name:"bpm",outlined:"",color:"indigo"},model:{value:t.bpm,callback:function(s){e.$set(t,"bpm",s)},expression:"exercise.bpm"}})],1)],1)],1)],1)],1)])})),0)],1)],1)],1)],1)],1):e._e(),r("v-row",{staticClass:"justify-center"},[r("v-col",{staticClass:"text-center"},[r("v-btn",{attrs:{color:"indigo",loading:e.loading,dark:""},on:{click:e.update}},[e._v("Save")]),r("v-btn",{attrs:{disabled:e.loading},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1)},dr=[],hr=(s("a9e3"),{list:function(e){return f().get("file/list?lid=".concat(e))},create:function(e){return f().post("file/new",e)},delete:function(e){return f().delete("file/del?fid=".concat(e))}}),pr=(s("c4e3"),s("21a6"),{name:"LessonForm",data:function(){return{componentKey:1,newLesson:{name:"",duration:"",description:"",files:[],exercises:[{name:"",video:null,videoFilename:"",videoPoster:null,videoPosterFilename:"",useScore:!0,timeSignature:"4/4",bpm:60,numberOfBars:4,melody:[],demoStartTime:"0",useXml:!1,musicXml:null,musicXmlFilename:"",handler:null,keySignature:"C"}]},lesson:null,requiredRules:[function(e){return!!e||"This field is required"}],durationRules:[function(e){return!!e||"Duration is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],demoStartTimeRules:[function(e){return!!e||"Demo Start Time is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return new RegExp(/^[a-zA-Z0-9 ]{2,30}$/).test(e)||"Name must be alphanumeric characters and of length 2 - 30"}],fileRules:[function(e){for(var t=0;t<e.length;t++)if(e[t].size>0x773594ccd56a0)return"File cannot be larger than 2GB";return!0}],time_signatures:["4/4","3/4","2/4","3/8","6/8"],loading:!1,error:null,fileDialog:!1,options:["Download","Delete"],uuid:0,openedExercise:[0],majorKeys:["C","F","Bb","Eb","Ab","Db","Gb","Cb","G","D","A","E","B","F#","C#"]}},methods:{onVideoPosterInput:function(){this.componentKey+=1},getFileUrl:function(e){if(!e)return null;if("string"===typeof e)return e;var t=window.URL.createObjectURL(e);return t},showFile:function(){this.fileDialog=!0},showVex:function(e,t){var s=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=s.newLesson.exercises[t].handler||s.newLesson.exercises[t].useXml||!s.newLesson.exercises[t].useScore){e.next=8;break}return e.next=3,s.$nextTick();case 3:r=document.createElement("div"),r.id="vexflow-wrapper-".concat(t),n=document.getElementById("pannel-content-".concat(t)),n.appendChild(r),s.newLesson.exercises[t].handler=new lt["a"].Handler(r.id,{canvasProperties:{id:r.id+"-canvas",width:n.offsetWidth,tabindex:1}}).init();case 8:case"end":return e.stop()}}),e)})))()},changeTimeSignature:function(e,t){this.newLesson.exercises[t].handler.setTimeSignature(this.newLesson.exercises[t].timeSignature)},changeKeySignature:function(e,t){this.newLesson.exercises[t].handler.setKeySignature(this.newLesson.exercises[t].keySignature)},changeBars:function(e,t){this.newLesson.exercises[t].handler.changeNumberOfBars(this.newLesson.exercises[t].numberOfBars,this.newLesson.exercises[t].handler.exportNotes())},changeMelody:function(e,t){this.newLesson.exercises[t].melody=this.newLesson.exercises[t].handler.exportNotes()},validateScore:function(e,t){return lt["a"].validateScore(e,t)},update:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.newLesson,e.$refs.lessonForm.validate()){t.next=3;break}return t.abrupt("return");case 3:console.log(lt["a"].notesToBars(s.exercises[0].melody,s.exercises[0].timeSignature)),r=0;case 5:if(!(r<s.exercises.length)){t.next=12;break}if(e.validateScore(lt["a"].notesToBars(s.exercises[r].melody,s.exercises[r].timeSignature),s.exercises[r].timeSignature)){t.next=9;break}return alert("Note value does not equal to time signature indicated of a bar"),t.abrupt("return");case 9:r++,t.next=5;break;case 12:n=0;case 13:if(!(n<s.exercises.length)){t.next=23;break}if(!s.exercises[n].useScore||s.exercises[n].musicXml||0!=s.exercises[n].melody.length){t.next=17;break}return alert("Please ensure that you have input corresponding data if you choose to use score"),t.abrupt("return");case 17:if(s.exercises[n].video||""!=s.exercises[n].videoFilename){t.next=20;break}return alert("Please ensure that you have input a video for video content"),t.abrupt("return");case 20:n++,t.next=13;break;case 23:if(e.loading=!0,i=null,!e.$route.params.lesson_id){t.next=30;break}return t.next=28,Ke.edit({id:e.lesson.id,name:e.newLesson.name,duration:Number(e.newLesson.duration),description:e.newLesson.description});case 28:t.next=35;break;case 30:return t.next=32,Ke.create({name:e.newLesson.name,duration:Number(e.newLesson.duration),description:e.newLesson.description,cid:e.$route.params.course_id});case 32:return i=t.sent,t.next=35,Promise.all(e.newLesson.files.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new FormData,s.set("lessonId",i.data.lesson.id),s.set("name",t.name),s.set("size",parseInt(t.size)),s.set("type",t.type),s.append("file",t.file),e.abrupt("return",hr.create(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 35:o=0;case 36:if(!(o<s.exercises.length)){t.next=68;break}if(a=new FormData,a.set("name",s.exercises[o].name),a.set("melody",s.exercises[o].melody.join("-")),a.set("timeSignature",s.exercises[o].timeSignature),a.set("bpm",s.exercises[o].bpm),a.set("numberOfBars",s.exercises[o].numberOfBars),a.set("demoStartTime",parseInt(s.exercises[o].demoStartTime)),a.set("useScore",s.exercises[o].useScore),a.set("keySignature",s.exercises[o].keySignature),s.exercises[o].useScore&&(s.exercises[o].useXml?a.set("useXml",!0):(a.set("useXml",!1),a.set("melody",s.exercises[o].melody.join("-")),a.set("timeSignature",s.exercises[o].timeSignature))),s.exercises[o].video&&a.append("video",s.exercises[o].video),s.exercises[o].videoPoster&&a.append("videoPoster",s.exercises[o].videoPoster),s.exercises[o].musicXml&&a.append("musicXml",s.exercises[o].musicXml),!s.exercises[o].id){t.next=56;break}return a.set("id",s.exercises[o].id),t.next=54,ct.edit(a);case 54:t.next=65;break;case 56:if(!e.lesson){t.next=62;break}return a.set("lid",e.lesson.id),t.next=60,ct.create(a);case 60:t.next=65;break;case 62:return a.set("lid",i.data.lesson.id),t.next=65,ct.create(a);case 65:o++,t.next=36;break;case 68:e.loading=!1,e.cancel();case 70:case"end":return t.stop()}}),t)})))()},cancel:function(){this.$route.params.lesson_id?this.$router.push("/course/edit/".concat(this.lesson.CourseId)):this.$router.push("/course/edit/".concat(this.$route.params.course_id))},deleteLesson:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ke.delete(e.lesson.id);case 2:e.$router.push("/course/edit/".concat(e.lesson.CourseId));case 3:case"end":return t.stop()}}),t)})))()},deleteExercise:function(e,t){this.newLesson.exercises.splice(t,1)}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$route.params.lesson_id){e.next=42;break}return e.next=3,Ke.show(this.$route.params.lesson_id);case 3:return this.lesson=e.sent.data.lesson,e.next=6,hr.list(this.lesson.id);case 6:if(this.newLesson.files=e.sent.data.files,this.newLesson.name=this.lesson.name,this.newLesson.duration=this.lesson.duration,this.newLesson.description=this.lesson.description,!(this.lesson.Exercises.length>0)){e.next=42;break}t=0;case 12:if(!(t<this.lesson.Exercises.length)){e.next=42;break}if(this.newLesson.exercises[t].id=this.lesson.Exercises[t].id,this.newLesson.exercises[t].name=this.lesson.Exercises[t].name,this.newLesson.exercises[t].useScore=this.lesson.Exercises[t].useScore,this.newLesson.exercises[t].useXml=this.lesson.Exercises[t].useXml,this.newLesson.exercises[t].videoFilename=this.lesson.Exercises[t].videoFilename,this.newLesson.exercises[t].videoPosterFilename=this.lesson.Exercises[t].videoPosterFilename,!this.newLesson.exercises[t].useScore){e.next=39;break}if(this.newLesson.exercises[t].bpm=this.lesson.Exercises[t].bpm,this.newLesson.exercises[t].demoStartTime=this.lesson.Exercises[t].demoStartTime.toString(),this.newLesson.exercises[t].useXml||0!=t){e.next=38;break}return this.newLesson.exercises[t].timeSignature=this.lesson.Exercises[t].timeSignature,this.lesson.Exercises[t].keySignature||(this.lesson.Exercises[t].keySignature="C"),this.newLesson.exercises[t].keySignature=this.lesson.Exercises[t].keySignature,this.newLesson.exercises[t].numberOfBars=this.lesson.Exercises[t].numberOfBars,this.newLesson.exercises[t].melody=this.lesson.Exercises[t].melody.split("-"),e.next=30,this.$nextTick();case 30:s=document.createElement("div"),s.id="vexflow-wrapper-".concat(t),r=document.getElementById("pannel-content-".concat(t)),r.appendChild(s),this.newLesson.exercises[t].handler=new lt["a"].Handler(s.id,{numberOfStaves:this.newLesson.exercises[t].numberOfBars,timeSignature:this.newLesson.exercises[t].timeSignature,keySignature:this.newLesson.exercises[t].keySignature,canvasProperties:{id:s.id+"-canvas",width:r.offsetWidth,tabindex:1}}).init(),""!=this.newLesson.exercises[t].melody&&this.newLesson.exercises[t].handler.importNotes(this.newLesson.exercises[t].melody,this.newLesson.exercises[t].timeSignature),e.next=39;break;case 38:this.newLesson.exercises[t].musicXmlFilename=this.lesson.Exercises[t].musicXmlFilename;case 39:t++,e.next=12;break;case 42:n=0;case 43:if(!(n<this.newLesson.exercises.length)){e.next=49;break}return e.next=46,this.showVex(null,n);case 46:n++,e.next=43;break;case 49:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),mr=pr,vr=(s("04e3"),s("b73d")),fr=s("3a2f"),gr=Object(x["a"])(mr,ur,dr,!1,null,"3d35951c",null),Vr=gr.exports;_()(gr,{VBtn:k["a"],VCard:J["a"],VCardSubtitle:ee["b"],VCardText:ee["c"],VCardTitle:ee["d"],VCol:ce["a"],VContainer:le["a"],VDivider:ue["a"],VFileInput:Ze["a"],VForm:be["a"],VIcon:C["a"],VImg:te["a"],VRow:de["a"],VSelect:Je["a"],VSlider:Bs["a"],VSpacer:B["a"],VSwitch:vr["a"],VTextField:_e["a"],VTextarea:Jt["a"],VTooltip:fr["a"]});var br=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("video",{ref:"videoPlayer",staticClass:"vjs-big-play-centered vjs-16-9 video-js",attrs:{id:"video"}})])},xr=[],wr=(s("090c"),s("7d87"),{name:"MpegDash",data:function(){return{player:null}},watch:{},methods:{},mounted:function(){this.player=Object(ne["default"])(this.$refs.videoPlayer,{controls:!0,fluid:!0,sources:[{src:"https://rhythm-academy.s3.ap-southeast-1.amazonaws.com/wangrunding%40gmail.com/Stand+up+for+Singapore/introduction/mpeg_dash_videos/vertical_1080_test-manifest-full.mpd",type:"application/dash+xml"}],playbackRates:[.8,.9,1,1.1,1.2]})}}),_r=wr,Ar=Object(x["a"])(_r,br,xr,!1,null,"e0b39e0a",null),yr=Ar.exports,kr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"mx-10 my-10 commentCard"},[s("v-card-title",[e._v("Click on a note in student's recording to leave comment")]),s("v-divider"),s("v-card-text",{staticClass:"commentCardScores"},[e.currEx&&e.recording?s("score-feedback",{attrs:{id:"scoresAndLineGraphs",currEx:e.currEx,recording:e.recording,isNewFeedback:!0,onClickNote:e.onClickNote,clickedNoteOnset:null!==e.selectedRowNum&&null!==e.selectedIndex?e.notesByRow[e.selectedRowNum-1][e.selectedIndex].onset:null,shouldIndicateNoteClicked:!0}}):e._e(),null!==e.selectedIndex?s("v-row",{style:{position:"absolute",left:e.commentButtonX+"px",top:e.commentButtonY+"px"},attrs:{justify:"center"}},[s("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[s("v-btn",e._g(e._b({attrs:{icon:"",medium:"",elevation:"2"}},"v-btn",n,!1),r),[s("v-icon",[e._v("mdi-pencil")])],1)]}}],null,!1,1470381488),model:{value:e.commentDialog,callback:function(t){e.commentDialog=t},expression:"commentDialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("Comment on a note")])]),null!==e.selectedIndex?s("v-card-subtitle",{staticClass:"mt-2"},[e._v("Selected note: "+e._s(e.notesByRow[e.selectedRowNum-1][e.selectedIndex].note)+", onset: "+e._s(e.notesByRow[e.selectedRowNum-1][e.selectedIndex].onset)+"s, duration: "+e._s(e.notesByRow[e.selectedRowNum-1][e.selectedIndex].duration)+"s")]):e._e(),s("v-card-text",[s("v-container",[s("v-row",[s("v-text-field",{attrs:{label:"comment",hint:"Press enter to save","persistent-hint":"","append-icon":"mdi-keyboard-return",disabled:null==e.selectedIndex},on:{change:e.onCommentChange},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.commentDialog=!1}}},[e._v("Cancel")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.onCommentChange}},[e._v("Save")])],1)],1)],1)],1):e._e(),s("v-divider"),s("div",{staticClass:"mx-5 mt-5"},[s("span",{staticClass:"text-h6"},[e._v("General comment on student's practice")]),s("v-textarea",{staticClass:"mt-3",attrs:{label:"General Comment","auto-grow":"",outlined:""},model:{value:e.generalComment,callback:function(t){e.generalComment=t},expression:"generalComment"}}),s("v-btn",{staticClass:"mb-3",on:{click:e.onGeneralCommentChange}},[e._v("Save general comment")])],1),s("v-divider")],1),s("v-card-actions",{staticClass:"justify-center"},[s("v-btn",{staticStyle:{margin:"0 auto"},attrs:{large:"",color:"indigo",dark:""},on:{click:e.publishComments}},[e._v("Publish Comments to Student")])],1)],1)},Cr=[],Sr={name:"NewFeedback",components:{EvaluationLineGraph:Ss,"score-feedback":Ks},methods:{publishComments:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.recording.id,t.next=3,g.markAsCommented(s);case 3:e.$store.dispatch("clearOneNotification"),alert("Your comment is sent to student!"),e.$router.push("/notifications");case 6:case"end":return t.stop()}}),t)})))()},onLineGraphScroll:function(){var e=this;clearTimeout(this.scrollTimeout),this.isScrolling||(this.isScrolling=!0),this.scrollTimeout=setTimeout((function(){e.isScrolling=!1}),200)},onClickNote:function(e,t,s){if(this.selectedIndex!==t||this.selectedRowNum!==e){var r;this.selectedIndex=t,this.selectedRowNum=e,this.comment=null!==(r=this.notesByRow[e-1][t].comment)&&void 0!==r?r:null;var n=document.getElementById("scoresAndLineGraphs"),i=n.getBoundingClientRect().left-18;this.commentButtonX=s+i;var o=287;this.commentButtonY=(e-1)*o+170}},onCommentChange:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.selectedRowNum-1,r=Object(xs["a"])(e.notesByRow[s]),n=Object(l["a"])({},e.notesByRow[s][e.selectedIndex]),n.comment=e.comment,r[e.selectedIndex]=n,e.$set(e.notesByRow,s,r),i=JSON.stringify(e.notesByRow.flat()),t.next=9,g.updateFeedback(e.recording.id,i);case 9:o=t.sent.data.recording,e.recording=o,e.commentDialog=!1;case 12:case"end":return t.stop()}}),t)})))()},onGeneralCommentChange:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=JSON.stringify(e.notesByRow.flat()),t.next=3,g.updateFeedback(e.recording.id,s,e.generalComment);case 3:r=t.sent.data.recording,e.recording=r;case 5:case"end":return t.stop()}}),t)})))()},splitTranscriptionIntoRows:function(e){var t=this.recording.bpm,s=60/t*parseInt(this.currEx.timeSignature[0])*4,r=0,n=[];n.push([]);for(var i=0;i<e.length;i++){var o=e[i];if(o.onset<r+s)if(o.onset+o.duration<=r+s)n[n.length-1].push(o);else{var a=Object(l["a"])({},o);a.onset=r+s,a.duration=o.onset+o.duration-(r+s),o.duration=o.duration-a.duration,n[n.length-1].push(o),e[i]=a,r+=s,n.push([]),i--}else r+=s,n.push([]),i--}return n}},data:function(){return{course:null,lesson:null,currEx:null,recording:null,scrollTimeout:null,isScrolling:!1,selectedRowNum:null,selectedIndex:null,notesByRow:[],transcribedNotes:[],commentButtonX:0,commentButtonY:0,commentDialog:!1,comment:null,generalComment:null}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.show(this.$route.params.course_id);case 2:return t=e.sent,this.course=t.data.course,this.lesson=this.course.lessons.find((function(e){return e.id==r.$route.params.lesson_id})),this.videoSrc=this.lesson.exercises[0].videoUrl,this.currEx=this.lesson.exercises[0],e.next=9,g.list(this.currEx.id);case 9:s=e.sent.data.recordings,this.recording=s.find((function(e){return e.id==r.$route.params.recording_id})),null!=this.recording&&(this.transcribedNotes=JSON.parse(this.recording.transcription),this.notesByRow=this.splitTranscriptionIntoRows(this.transcribedNotes),this.generalComment=this.recording.overallComment);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Tr=Sr,Ir=(s("bdb5"),Object(x["a"])(Tr,kr,Cr,!1,null,"6a64f038",null)),Rr=Ir.exports;_()(Ir,{VBtn:k["a"],VCard:J["a"],VCardActions:ee["a"],VCardSubtitle:ee["b"],VCardText:ee["c"],VCardTitle:ee["d"],VContainer:le["a"],VDialog:je["a"],VDivider:ue["a"],VIcon:C["a"],VRow:de["a"],VSpacer:B["a"],VTextField:_e["a"],VTextarea:Jt["a"]});var Nr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course&&e.lesson?s("div",[s("v-container",[s("v-row",[s("v-col",[s("h1",[e._v("Feedback")])])],1),s("v-row",[s("v-col",[s("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[s("v-btn",e._g(e._b({attrs:{light:""}},"v-btn",n,!1),r),[e._v("Past Submissions"),s("v-icon",{attrs:{right:"",dark:""}},[e._v("mdi-menu-down")])],1)]}}],null,!1,160124499)},[s("v-list",e._l(e.recordings,(function(t,r){return s("v-list-item",{key:r,on:{click:function(t){return e.updateFeedback(t,r)}}},[s("v-list-item-title",[e._v(e._s(t.audioFilename))])],1)})),1)],1)],1)],1),e.currRecording&&e.currRecording.overallComment?s("v-row",[s("v-col",{staticClass:"ml-3"},[s("h4",[e._v("Overall comment from tutor:")]),s("div",{staticClass:"ml-5"},[e._v(e._s(e.currRecording.overallComment))])])],1):e._e(),s("v-row",[s("v-col",[e.currEx&&e.currRecording?s("score-feedback",{attrs:{currEx:e.currEx,isShowFeedback:!0,recording:e.currRecording}}):e._e()],1)],1)],1)],1):e._e()},Er=[],Br={name:"ShowFeedback",components:{"score-feedback":Ks},data:function(){return{course:null,lesson:null,newAudio:null,currEx:null,currRecording:null,recordings:[]}},methods:{getPastFeedback:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.list(e.currEx.id);case 2:s=t.sent.data.recordings,e.recordings=s,s.length>0&&(e.currRecording=s[s.length-1]);case 5:case"end":return t.stop()}}),t)})))()},updateFeedback:function(e,t){this.currRecording=this.recordings[t]}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.course&&this.lesson){e.next=6;break}return e.next=3,q.show(this.$route.params.course_id);case 3:t=e.sent;try{this.course=t.data.course}catch(r){console.log(r)}this.lesson=this.course.lessons.find((function(e){return e.id==s.$route.params.lesson_id}));case 6:this.currEx=this.lesson.exercises[0],this.getPastFeedback();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Pr=Br,Or=s("e449"),jr=Object(x["a"])(Pr,Nr,Er,!1,null,"dc0826c8",null),Fr=jr.exports;_()(jr,{VBtn:k["a"],VCol:ce["a"],VContainer:le["a"],VIcon:C["a"],VList:S["a"],VListItem:T["a"],VListItemTitle:N["c"],VMenu:Or["a"],VRow:de["a"]});var Lr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course&&e.lesson?s("div",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("h1",{staticClass:"font-weight-bold"},[e._v("Record your practice!")])])],1),e.currEx?s("audio-recorder",{attrs:{currEx:e.currEx,courseId:e.course.id,lessonId:e.lesson.id}}):e._e()],1)],1):e._e()},Mr=[],Dr={name:"NewRecording",components:{"score-feedback":Ks,"audio-recorder":Js},data:function(){return{course:null,lesson:null,currEx:null}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.course&&this.lesson){e.next=6;break}return e.next=3,q.show(this.$route.params.course_id);case 3:t=e.sent;try{this.course=t.data.course}catch(r){console.log(r)}this.lesson=this.course.lessons.find((function(e){return e.id==s.$route.params.lesson_id}));case 6:this.currEx=this.lesson.exercises[0];case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ur=Dr,$r=Object(x["a"])(Ur,Lr,Mr,!1,null,"7b272de5",null),Kr=$r.exports;_()($r,{VCol:ce["a"],VContainer:le["a"],VRow:de["a"]});var Wr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0==e.notifications?s("v-card",{staticClass:"mx-auto",staticStyle:{"margin-top":"30px"},attrs:{"max-width":"700"}},[s("v-row",{attrs:{justify:"center"}},[s("h1",[e._v("No "+e._s(e.isTutor?"submissions":"notifications")+" found")])])],1):s("v-card",{staticClass:"mx-auto",staticStyle:{"margin-top":"30px"},attrs:{"max-width":"700"}},[s("v-toolbar",{attrs:{color:"indigo",dark:""}},[s("v-app-bar-nav-icon"),s("v-toolbar-title",[e._v("Submissions")]),s("v-spacer")],1),s("v-list",e._l(e.sortedRecordings,(function(t,r){return s("v-list-group",{key:r,attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[s("v-list-item-content",[s("v-list-item-title",{staticClass:"courseName",domProps:{textContent:e._s(t[0].course_name)}})],1)]},proxy:!0}],null,!0)},e._l(t,(function(t,r){return s("v-list-item",{key:r},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(t.student_name)}}),s("v-list-item-subtitle",{domProps:{textContent:e._s(e.getTime(t))}})],1),s("v-spacer"),s("v-list-item-action",[e.isTutor?s("v-btn",{on:{click:function(s){return e.redirect(t)}}},[e._v(" Grade "),s("v-icon",{attrs:{right:"",color:"red lighten-1"}},[e._v("mdi-marker")])],1):e._e(),e.isTutor&&"wangrunding@gmail.com"==e.$store.state.user.email?s("v-btn",{on:{click:function(s){return e.destroy(t)}}},[e._v(" Delete "),s("v-icon",{attrs:{right:"",color:"red lighten-1"}},[e._v("mdi-trash-can")])],1):e._e(),e.isTutor?e._e():s("v-btn",{on:{click:function(s){return e.redirect(t)}}},[e._v(" View "),s("v-icon",{attrs:{right:"",color:"green lighten-1"}},[e._v("mdi-eye")])],1)],1)],1)})),1)})),1)],1)},Hr=[],qr=(s("13d5"),s("c1df")),Xr=s.n(qr),zr={data:function(){return{recordings:[],isTutor:null,sortedRecordings:[],notifications:0}},methods:{getTime:function(e){var t=new Date(e.updated_at).toLocaleString("en-US",{timeZone:"Asia/Singapore"}),s=Xr()(t).calendar();return s},getMessage:function(e){return this.isTutor?this.truncateString("".concat(e.course_name," has a new submission from ").concat(e.student_name)):this.truncateString("".concat(e.course_name," has new comments from ").concat(e.tutor_name))},redirect:function(e){this.isTutor?window.location.href="/feedback/new/".concat(e.course_id,"/lesson/").concat(e.lesson_id,"/recording/").concat(e.recording_id):(window.location.href="/feedback/show/".concat(e.course_id,"/lesson/").concat(e.lesson_id),g.markAsRead(e.recording_id),this.$store.dispatch("clearOneNotification"))},destroy:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!confirm("Are you sure?")){s.next=5;break}return s.next=3,g.delete(e.recording_id);case 3:t.$store.dispatch("clearOneNotification"),t.$router.go();case 5:case"end":return s.stop()}}),s)})))()}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isTutor=v.state.user.isTutor,e.notifications=v.state.notifications,!e.isTutor){t.next=8;break}return t.next=5,g.getUncommentedRecordings();case 5:e.recordings=t.sent.data.recordings,t.next=11;break;case 8:return t.next=10,g.getUnreadComments();case 10:e.recordings=t.sent.data.recordings;case 11:s=function(e,t){return e.reduce((function(e,s){return(e[s[t]]=e[s[t]]||[]).push(s),e}),{})},e.sortedRecordings=s(e.recordings,"course_id");case 13:case"end":return t.stop()}}),t)})))()}},Yr=zr,Gr=(s("7662"),s("56b0")),Qr=Object(x["a"])(Yr,Wr,Hr,!1,null,"701feaba",null),Zr=Qr.exports;_()(Qr,{VAppBarNavIcon:y["a"],VBtn:k["a"],VCard:J["a"],VIcon:C["a"],VList:S["a"],VListGroup:Gr["a"],VListItem:T["a"],VListItemAction:Xs["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"],VRow:de["a"],VSpacer:B["a"],VToolbar:Le["a"],VToolbarTitle:P["b"]});var Jr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-container",[s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[s("h1",[e._v(e._s(e.$route.params.instrument))])])],1),s("v-row",{staticClass:"mt-10"},e._l(e.courses,(function(t){return s("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[s("course-card",{attrs:{course:t}},[s("v-card-actions",[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course(s,t.id)}}},[e._v("Find out more")])],1)],1)],1)})),1)],1)],1)},en=[],tn={name:"Home",components:{"course-card":re},data:function(){return{isLoading:!1,items:[],search:null,courses:[]}},computed:Object(l["a"])({is_student:function(){return this.user?this.user.isStudent:null}},Object(u["b"])(["user"])),methods:{go_to_course:function(e,t,s){void 0!=s?this.$router.push("/course/show/".concat(t,"/lesson/").concat(s)):this.$router.push({name:"showcourse",params:{course_id:t}})}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.listAll(null,this.$route.params.instrument);case 2:this.courses=e.sent.data.courses;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},sn=tn,rn=Object(x["a"])(sn,Jr,en,!1,null,"1d95300e",null),nn=rn.exports;_()(rn,{VBtn:k["a"],VCardActions:ee["a"],VCol:ce["a"],VContainer:le["a"],VRow:de["a"]}),r["default"].use(K["a"]);var on=[{path:"/",name:"home",component:pe},{path:"/register",name:"register",component:ye},{path:"/login",name:"login",component:Re},{path:"/feedback/new/:course_id/lesson/:lesson_id/recording/:recording_id",name:"newfeedback",component:Rr},{path:"/feedback/show/:course_id/lesson/:lesson_id",name:"showfeedback",component:Fr},{path:"/recording/new/:course_id/lesson/:lesson_id",name:"newrecording",component:Kr},{path:"/course/show/:course_id",name:"showcourse",component:De,props:!0},{path:"/course/edit/:course_id",name:"editcourse",component:pt},{path:"/course/form/:course_id",name:"courseform",component:lr},{path:"/lesson/edit-form/:lesson_id",component:Vr},{path:"/lesson/new-form/:course_id",component:Vr},{path:"/course/show/:course_id/lesson/:lesson_id",name:"showlesson",component:rr,props:!0},{path:"/course/index",name:"courseindex",component:Xe},{path:"/course/list/:instrument",name:"courselist",component:nn},{path:"/course/new/",name:"newcourse",component:it},{path:"/user/index/NiIsInR5cCI6IkpXVCJ9",name:"userindex",beforeEnter:function(e,t,s){"wangrunding@gmail.com"!=v.state.user.email?s({path:t.fullPath}):s()},component:xt},{path:"/video",name:"video",component:It},{path:"/notifications",component:Zr},{path:"/courses/threads/index",component:Ot},{path:"/course/threads/index/:course_id",component:Ut},{path:"/course/threads/show/:course_id/:student_id",name:"showthread",component:ts,props:!0},{path:"/payment/:course_id",name:"payment",component:cs},{path:"/osmd",component:vs},{path:"/mpeg-dash",component:yr}],an=new K["a"]({mode:"history",routes:on});an.beforeEach((function(e,t,s){"showcourse"==e.name||"login"==e.name||v.state.isUserLoggedIn||"home"==e.name||"register"==e.name?s():s({name:"login"})}));var cn=an,ln=s("f309"),un=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{id:"svg2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 57.2 99.95"}},[s("title",[e._v("bg")]),s("g",{attrs:{id:"path3821"}},[s("rect",{attrs:{x:"34.97",y:"79.23",width:"22.23",height:"4"}}),s("rect",{attrs:{x:"34.97",y:"88.71",width:"22.23",height:"4"}}),s("path",{attrs:{d:"M25.4,0h4v83.1h-.07c.41,5.12-3.7,11.2-10.33,14.6-7.7,3.9-16,2.6-18.4-2.9s1.9-13.2,9.7-17.2c5.44-2.8,11.31-3,15.1-.73Z",transform:"translate(0.06 -0.04)"}})])])},dn=[],hn={name:"bpmIcon"},pn=hn,mn=(s("036d"),Object(x["a"])(pn,un,dn,!1,null,"5ad94150",null)),vn=mn.exports;r["default"].use(ln["a"]);var fn=new ln["a"]({icons:{values:{custom_bpm:{component:vn}}}}),gn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"panel"}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"10",md:e.md||6}},[s("v-card",{staticClass:"elevation-8"},[s("v-toolbar",{attrs:{light:""}},[s("v-toolbar-title",[s("h2",{staticClass:"font-weight-bold"},[e._v(e._s(e.title))])]),s("v-spacer")],1),e._t("default",[e._v("No slot defined")])],2)],1)],1)],1)},Vn=[],bn={name:"Panel",props:["title","md"]},xn=bn,wn=Object(x["a"])(xn,gn,Vn,!1,null,"6daaccaf",null),_n=wn.exports;_()(wn,{VCard:J["a"],VCol:ce["a"],VRow:de["a"],VSpacer:B["a"],VToolbar:Le["a"],VToolbarTitle:P["b"]});var An=s("0284"),yn=s.n(An),kn=s("ee98"),Cn=s.n(kn);r["default"].use(Cn.a),r["default"].config.productionTip=!1,r["default"].use(yn.a,{id:"UA-178632955-2",router:cn}),r["default"].component("panel",_n),new r["default"]({router:cn,store:v,vuetify:fn,render:function(e){return e($)}}).$mount("#app")},5718:function(e,t,s){},"582c":function(e,t,s){},"5de2":function(e,t,s){"use strict";var r=s("87f3"),n=s.n(r);n.a},"6b7d":function(e,t,s){"use strict";var r=s("88c4"),n=s.n(r);n.a},"6c67":function(e,t,s){},7662:function(e,t,s){"use strict";var r=s("4f40"),n=s.n(r);n.a},"7f3f":function(e,t,s){},"85ec":function(e,t,s){},"87f3":function(e,t,s){},"88c4":function(e,t,s){},9310:function(e,t,s){e.exports=s.p+"img/feedback1.1db6a51b.png"},"977e":function(e,t,s){"use strict";var r=s("c4d7"),n=s.n(r);n.a},ad98:function(e,t,s){"use strict";var r=s("4cf2"),n=s.n(r);n.a},b020:function(e,t,s){e.exports=s.p+"img/play_button.3f8fd321.png"},bdb5:function(e,t,s){"use strict";var r=s("118f"),n=s.n(r);n.a},c1ba:function(e,t,s){},c4d7:function(e,t,s){},c974:function(e,t,s){"use strict";var r=s("582c"),n=s.n(r);n.a},cab5:function(e,t,s){"use strict";var r=s("6c67"),n=s.n(r);n.a},cf2c:function(e,t,s){"use strict";var r=s("3723"),n=s.n(r);n.a},d234:function(e,t,s){"use strict";var r=s("7f3f"),n=s.n(r);n.a},d298:function(e,t,s){},d2e0:function(e,t,s){},dbc9:function(e,t,s){e.exports=s.p+"img/score-overlay-demo.891d8305.png"},e8fe:function(e,t,s){"use strict";var r=s("ebf3"),n=s.n(r);n.a},ebf3:function(e,t,s){},ec17:function(e,t,s){e.exports=s.p+"img/recording.d292637c.png"},f49b:function(e,t,s){},fcdd:function(e,t){e.exports="data:audio/mpeg;base64,SUQzAwAAAAAAMlRJVDIAAAAHAAAANjAgYnBtVFhYWAAAABcAAABTb2Z0d2FyZQBMYXZmNTguMjkuMTAw//uQZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAEAAAIqAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnaysrKysrKysrKysrKysrKysrKysrKysrKy5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5v////////////////////////////////8AAABQTEFNRTMuMTAwBLkAAAAAAAAAADUgJAQMTQAB4AAACKhAiihaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//vQZAAAAhUqVv0FAAAAAA0goAABJfmdVfmtkAAAADSDAAAA3M+rl1MQAACJZjGOSgR4AI05fhE/RN3eBd7it7h3vRE5SneBQGhhYCgeU7wQZIoKVL/uKGUXB//wQ/wQ6vDH/5fw/my9crwBAAAAEAQADwIBhaeAQZ1WPgRtCBAK9AgGYlyi0ZAyVTpm2hqX501pglZjLql4AIgYUMTaTBQoIG27p0nPq57VEYQimOWxkIWy4wRrLuREwxINdRjLicwcUVpbnGcmDNXmYiYmJJVlUFBquFIqikiSN1+ezcseR4jN7E475OxZDWBccPTJBRLQdHkLlYWarkjkDqBMScJQc29hMbJzOh4xsDEIMOCKMyRLAYpLss6VURea1z6zpAoOBxAYmHsmGigeBwMnmCCAJFdWefHngzlEStTTa2pezqAZQokYkGiAYIAFYFIhCWkapkvyML7ZO5NJZ/f46yzGgB4lHrPf//wkjnP9BcqiDD2URyn3M0F2zUbjF3FXFS0NXLLf/+VNdppVM4v1DVj////43mp9/rl2AAAAAAlEJGhCEQdRniaKnJRhvU7tMFh3JuS8X8pDUipqWSWHNGaA0K0LTgxgBYSMyRqllkxlllKIoXkzRjqJiVygZEiZObuXkCBkITJEB3EGEpikxZghwdgmhnS4PtiyxJkNGRFIiky2ONmM3Q/1XQsbLWii6RsgmZlqTJgmXiudrUXlmR9aR9Zkbsiv+gz0/p1VtnetFjBMwYxZNAnidKijE7/6A++/2bUGABeOkU4g5yoCCkaihgxIYGYGWVGAJQIoW8UMhtkDNtS5/HxkDojK0YcnODAIkJDU9oOTqyzs8VnVrp/FwxKhdRGtvmbYDtWPKwYj2SO9jubCtiun4Y6Nf7TrG5th/nM6M5aLMGwXBrmC01//vPUxVc2kLA8YOHuIo4cLGuQJShowIw0K1QfCGTmHkPWxoqOvr+eOGZ+/+YlE/16pjYq//97bYAJIBdvNLYxhhVxLwwxAgsWacprQ0QjknIFQWANdZavtltPclraS+JoNjQKJOa+WUSFpMhVpFFNITQREkkzOyP1PDNXKai+QUQGB0QkJqCL6ff12iE3ZE5S5IP/7kGTWAvVTW1J/YoAAAAANIOAAARRFbUPNPRUAAAA0gAAABFf///8uqjKee4Tixqs44qKjLKuaiPuIbZXTQotdGcZ+p+Kigs3BxloyEKDNyjKv4IgggHO99fmsANEF2/hK0VSNrCQQJAOWXEiwEQgVjUOTXZ0zNL93XqcifmiaszGX0BTB+FjalQ0u7VwtLDAfeHrVVyn1iBjfj1hav7ZxZXQ2RhYY0ilfMjdiDpmu8Zn221RRbOM1v////213vNYvlgSZ9u6d2jVbZ4U/e1g2ivKRttuoctt7m18a0+lqs1/+cWibgx4sLGIP/pJf///+NC3mJbgMgLkEgAgGcLg6IxgGAQDsVFik0m3/3oJVWutJ/wZgUpNwYN/kEAOUPsG7cLAkFIsADwA0AcPhyAX4DBYYOCEQXyE1EK+QImh9ikQxCYmRukTPx2CMhcYhUXMUh1DlEkLNJksfiPhaRmC+anzUsmJ4ySW38hxDSmXxrEkaESNNf//orOnA2EP/1PQhTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7gGTuAPSTW1J7KRVwAAANIAAAARPJb0f1h4AAAAA0goAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//tAZPoABF5BT35mYIAAAA0gwAAAAAABpBwAACAAADSDgAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU="}});
//# sourceMappingURL=app.4f3d7dd9.js.map